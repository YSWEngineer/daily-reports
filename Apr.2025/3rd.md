# 2025/04/03(木)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [x] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [x] 3.3 FizzBuzzプログラムのテスト自動化
   - [x] 3.4 この章のまとめ
- [x] 第4章  配列や繰り返し処理を理解する
   - [x] 4.1 イントロダクション
   - [x] 4.2 配列
   - [x] 4.3 ブロック
   - [x] 4.4 ブロックを使う配列のメソッド
   - [x] 4.5 範囲（Range）
   - [x] 4.6 例題：RGB変換プログラムを作成する
   - [x] 4.7 配列についてもっと詳しく
   - [x] 4.8 ブロックについてもっと詳しく
   - [x] 4.9 範囲（Range）についてもっと詳しく
   - [x] 4.10 さまざまな繰り返し処理
   - [x] 4.11 繰り返し処理用の制御構造
   - [x] 4.12 この章のまとめ
- [x] 第5章  ハッシュやシンボルを理解する
   - [x] 5.1 イントロダクション
   - [x] 5.2 ハッシュ
   - [x] 5.3 シンボル
   - [x] 5.4 続・ハッシュについて
   - [x] 5.5 例題：長さの単位交換プログラムを作成する
   - [x] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [x] 5.7 シンボルについてもっと詳しく
   - [x] 5.8 この章のまとめ
- [x] 第6章  正規表現を理解する
   - [x] 6.1 イントロダクション
   - [x] 6.2 正規表現って何？
   - [x] 6.3 Ruby における正規表現オブジェクト
   - [x] 6.4 例題：Ruby のハッシュ記法を変換する
   - [x] 6.5 正規表現オブジェクトについてもっと詳しく
   - [x] 6.6 この章のまとめ
- [x] 第7章  クラスの作成を理解する
   - [x] 7.1 イントロダクション
   - [x] 7.2 オブジェクト指向プログラミングの基礎知識
   - [x] 7.3 クラスの定義
   - [x] 7.4 例題：改札機プログラムの作成
   - [x] 7.5 selfキーワード
   - [x] 7.6 クラスの継承
   - [x] 7.7 メソッドの可視性
   - [x] 7.8 定数についてもっと詳しく
   - [x] 7.9 さまざまな種類の変数
   - [x] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [x] 7.11 この章のまとめ
- [x] 第8章  モジュールを理解する
   - [x] 8.1 イントロダクション
   - [x] 8.2 モジュールの概要
   - [x] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [x] 8.4 例題：rainbowメソッドの作成
   - [x] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [x] 8.6 モジュールを利用した名前空間の作成
   - [x] 8.7 関数や定数を提供するモジュールの作成
   - [x] 8.8 状態を保持するモジュールの作成
   - [x] 8.9 モジュールに関する高度な話題
   - [x] 8.10 この章のまとめ
- [x] 第9章  例外処理を理解する
   - [x] 9.1 イントロダクション
   - [x] 9.2 例外の捕捉
   - [x] 9.3 意図的に例外を発生させる
   - [x] 9.4 例外処理のベストプラクティス
   - [x] 9.5 例題：正規表現チェッカープログラムの作成
   - [x] 9.6 例外処理についてもっと詳しく
   - [x] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [x] 10.1 イントロダクション
   - [x] 10.2 ブロックを利用するメソッドの定義と yield
   - [x] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


---


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第10章  例外処理を理解する
    - 10.3 Procオブジェクト
      - Procオブジェクトを普通の引数として渡す
      - Proc.new とラムダの違い
      - Proc.new かラムダかを判断する lambda?メソッド 


---


## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第10章  yield と Proc を理解する
    - 10.4 例題：ワードシンセサイザーの作成
      - エフェクトの実装方法を検討する 〜
    

---


## 💡 本日の学び・気付き
### 10.3 Procオブジェクト
#### Procオブジェクトを普通の引数として渡す
以下は、Procオブジェクトを普通の引数として受け取って実行するコード例。
```ruby
# ブロックではなく、1個のProcオブジェクトを引数として受け取る（&を付けない）
irb(main):001* def greet(arrange_proc)
irb(main):002*   puts 'おはよう'
irb(main):003*   text = arrange_proc.call('こんにちは')
irb(main):004*   puts text
irb(main):005*   puts 'こんばんは'
irb(main):006> end
=> :greet

# Procオブジェクトを普通の引数としてgreetメソッドに渡す（&を付けない）
irb(main):007> repeat_proc = Proc.new { |text| text * 2 }
irb(main):008> greet(repeat_proc)
おはよう
こんにちはこんにちは
こんばんは
=> nil
```
このコードにはブロックがないので、メソッド定義の引数やメソッド呼び出しで`&`が使われていない点に注意。

メソッドが受け取れるブロックの数は最大で 1つだが、Procオブジェクトは文字列や数値と同じ「ただのオブジェクト」なので、引数として渡すぶんには制限はない。次のようにすれば、3つの Procオブジェクトを引数として渡すこともできる。
```ruby
# 3種類のProcオブジェクトを受け取り、それぞれの挨拶文字列に適用するgreetメソッド
irb(main):001* def greet(proc_1, proc_2, proc_3)
irb(main):002*   puts proc_1.call('おはよう')
irb(main):003*   puts proc_2.call('こんにちは')
irb(main):004*   puts proc_3.call('こんばんは')
irb(main):005> end
=> :greet

# greetメソッドに渡すProcオブジェクトを用意する
irb(main):006> shuffle_proc = Proc.new { |text| text.chars.shuffle.join }
=> #<Proc:0x000000011f478b08 (irb):6>
irb(main):007> repeat_proc = Proc.new { |text| text * 2 }
=> #<Proc:0x0000000104474ca8 (irb):7>
irb(main):008> question_proc = Proc.new { |text| "#{text}?" }

# 3種類のProcオブジェクトをgreetメソッドに渡す
irb(main):009> greet(shuffle_proc, repeat_proc, question_proc)
うはよお
こんにちはこんにちは
こんばんは?
=> nil
```

#### Proc.new とラムダの違い
Procオブジェクトを作る方法は 4つある。そのうちの 2つは以下の方法で書くことができる。
```ruby
# Proc.newまたはprocメソッドでProcオブジェクトを作成する
Proc.new { |a, b| a + b }
proc { |a, b| a + b }
```
残り 2つの方法は、次のような構文やメソッドを使って Procオブジェクトを作成する。
```ruby
# ->構文またはlambdaメソッドでProcオブジェクトを作成する
->(a, b) { a + b }
lambda { |a, b| a + b }
```
どれも作成されるのは Procクラスのオブジェクトだが、上 2つと下 2つは振る舞いが異なっている。

`->`を使う**ラムダリテラル**について、`->`はラムダを作成するための記号。その後ろに来る`(a, b)`は**引数のリスト**。`{ }`は引数を使って実行する**処理の内容**。

そして、引数のリストに使っている`( )`は省略が可能。
```ruby
-> a, b { a + b }
```
引数がなければ全て省略することが可能。
```ruby
-> { 'Hello!' }
```
ブロックを作成するときと同様、`{ }`は改行して使っても大丈夫。
```ruby
->(a, b) {
  a + b
}
```
また、`{ }`の代わりに、`do ... end`を使うことも可能。
```ruby
->(a, b) do
  a + b
end
```
`Proc.new`と同じように、引数のデフォルト値を持たせることも可能。
```ruby
->(a = 0, b = 0) { a + b }
```
`Proc.new`とラムダはほぼ同じものだが、微妙な違いがいくつかある。中でも一番重要な違いは「**引数の扱い方**」。

単純な呼び出しでは `Proc.new`もラムダも引数の扱いに違いはない。
```ruby
# Proc.newの作成と実行
irb(main):001> add_proc = Proc.new { |a, b| a + b }
irb(main):002> add_proc.call(10, 20)
=> 30

# ラムダの作成と実行
irb(main):003> add_lambda = ->(a, b) { a + b }
irb(main):004> add_lambda.call(10, 20)
=> 30
```
しかし、ラムダは`Proc.new`よりも引数のチェックが厳密になる。
```ruby
# Proc.newの場合（引数がnilでもエラーが起きないようにto_iメソッドを使う）
irb(main):001> add_proc = Proc.new { |a, b| a.to_i + b.to_i }
# Proc.newは引数が1つまたは3つでも呼び出しが可能
irb(main):002> add_proc.call(10)
=> 10
irb(main):003> add_proc.call(10, 20, 100)
=> 30

# ラムダの場合
irb(main):004> add_lambda = ->(a, b) { a.to_i + b.to_i }
# ラムダは個数について厳密なので、引数が2個ちょうどでなければエラーになる
irb(main):005> add_lambda.call(10)
(irb):4:in `block in <top (required)>': wrong number of arguments (given 1, expected 2) (ArgumentError)
irb(main):006> add_lambda.call(10, 20, 30)
(irb):4:in `block in <top (required)>': wrong number of arguments (given 3, expected 2) (ArgumentError)
```
`Proc.new`とラムダの挙動の違いは他にもいくつかあるが、**引数に過不足があったときの挙動の違い**を押さえておけば通常のユースケースでは十分である。

#### Proc.new かラムダかを判断する lambda?メソッド
`Proc.new`もラムダも**Procクラスのインスタンス**である。Procクラスのインスタンスが`Proc.new`として作られたのか、ラムダとして作られたのか判断したい場合は**lambda?メソッド**を使用する。このメソッドは、ラムダとして作られたProcオブジェクトであれば`true`を返す。
```ruby
# Proc.newの場合
irb(main):001> add_proc = Proc.new { |a, b| a + b }
irb(main):002> add_proc.class
=> Proc
irb(main):003> add_proc.lambda?
=> false

# ラムダの場合
irb(main):004> add_lambda = ->(a, b) { a + b }
irb(main):005> add_lambda.class
=> Proc
irb(main):006> add_lambda.lambda?
=> true
```


---


## ✍🏻 感想
### 🍒 やっとラムダ（lambda）に出逢えた！
ラムダ（lambda）について以前から名前を聞いていたものの、今日まで実際の使い方や意味は全く知らなかったです。`Proc.new`に比べて、引数のチェックが厳密になるとされていますが、これが実際のコードにどう影響するのか、興味深いですね🤔


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 hours 08 min
- Total: 1036 hours 07 min
