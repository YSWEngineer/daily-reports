# 2025/08/23(土)
## 📚 プラクティス『lsコマンドを作る1』

<details><summary>🎯 学習の狙い</summary>

- 標準出力について学ぶ
- 標準ライブラリの使い方を学ぶ
- Enumeratorには、each以外に便利なメソッドがあることを学ぶ
- RailsじゃないRubyプログラミングを学ぶ
- メソッド分割を学ぶ
- わかりやすい変数名メソッド名を学ぶ
- 大きな問題を分割する力を学ぶ
</details>


<details><summary>📌 要件</summary>

- [ ] オプション（`-a`や`-r`など）を付けず、且つ引数（フォルダのパス）も指定せずに実行する
- [ ] そのまま実行すると、今いるフォルダ（カレントディレクトリ）の中身を表示する
- [ ] `gem`は使わずに Ruby の標準ライブラリだけで作ること
- [ ] 完成したコードは GitHub の Pull Request として提出すること
- [ ] `rubocop-fjord`でデバッグを実行し、全てパスさせること
- [ ] 2つ以上のメソッドを自分で定義すること
- [ ] 表示は横に最大3列になるようにレイアウトすること
  - 3, 6, 9, 12のように3の倍数の件数だけでなく、最後の列に空欄ができるケースの結果も載せる
  - 「3列から5列に仕様変更してください」または「3列から100列に変えてください」とあとから言われても必要最小限の変更で対応できるようなロジックにしておくこと

</details>

<details><summary>📚 参考資料</summary>

<details><summary>参考</summary>

  - [x] [lsコマンドを作る](https://bootcamp.fjord.jp/pages/380)
</details>
 

<details><summary>学習の狙い</summary>

  - [x] [【lsコマンド】大きな問題を小さく分解してから取り組む](https://bootcamp.fjord.jp/pages/279)
</details>

<details><summary>ヒント</summary>

  - [x] [lsコマンドの使い方と覚えたい15のオプション【Linuxコマンド集】](https://eng-entrance.com/linux_command_ls)
  - [x] [library optparse (Ruby 2.6.0)](https://docs.ruby-lang.org/ja/latest/library/optparse.html)
  - [x] [コマンドライン引数によるオプションに対応する (optparse) | まくまくRubyノート](https://maku77.github.io/ruby/io/optparse.html)
  - [x] [コマンドライン引数・オプションの処理](https://bootcamp.fjord.jp/pages/251)
  - [x] [binding.irb](https://docs.ruby-lang.org/ja/latest/method/Kernel/m/binding.html)
  - [x] [Fileクラス](https://docs.ruby-lang.org/ja/latest/class/File.html)
  - [x] [lsコマンドで表示されるファイルのモード(drwxr-xr-x) 〜RubyのFile::Stat#modeとは〜](https://zenn.dev/universato/articles/20201202-z-mode)
</details>

<details><summary>良いプログラムを書くための方法</summary>

  - [x] [プログラミング初心者は変数名やメソッド名を略さない方がいいよ、という話 - give IT a try](https://blog.jnito.com/entry/2020/10/20/092724)
  - [x] [\[RubyTips\] ハッシュテーブルによる分岐数削減](https://docs.komagata.org/5691)
  - [x] [プログラムを書くときの考え方](https://bootcamp.fjord.jp/pages/147)
  - [x] [rubyでコマンドを作る](https://bootcamp.fjord.jp/pages/250)
  - [x] [RubyTips - komagataのブログ](https://docs.komagata.org/tags/rubytips/)
  - [x] [Rubyスクリプトにもmainメソッドを定義するといいかも、という話 - Qiita](https://qiita.com/jnchito/items/4b4cae54170cc2f4377e)
  - [x] [初心者がRailsプロジェクトへの初PRする前に見るチェックリスト - komagataのブログ](https://docs.komagata.org/5676)
  - [x] [プログラミングでよく使う英単語のまとめ【随時更新】 - Qiita](https://qiita.com/Ted-HM/items/7dde25dcffae4cdc7923)
  - [x] [代表的なデータ構造](https://bootcamp.fjord.jp/pages/148)
  - [x] [配列の二人三脚を避ける](https://bootcamp.fjord.jp/pages/388)
  - [x] [参考：lsコマンドの列幅が人によって異なるのはなぜ？ | FBC
](https://bootcamp.fjord.jp/questions/707)
</details>

 <details><summary>終了条件の確認</summary>

- [x] [終了条件 - lsコマンドを作る](https://bootcamp.fjord.jp/pages/ls-command#requirements)
</details>
</details>


---


### 🧑🏻‍💻 本日の取り組み
#### FjordBootCamp の学習用リポジトリ作成
- プラクティスごとに整理された fbcディレクトリを作成

#### プラクティス『lsコマンドを作る1』🛠️💻
- lsコマンド作成


---


### ⏭️ 次回
#### プラクティス『lsコマンドを作る1』🛠️💻
- lsコマンド作成


---


### 💡 本日の学び・気付き
#### FjordBootCamp の学習用リポジトリ作成
今更ながら、プラクティスごとのディレクトリを作ることで、複数のプラクティスも整理して管理できるよね？（なんで今まで気付かなかったんだ）と思い、作成しました。以下は作成の流れを簡単にまとめた内容です。

##### 作業まとめ（GitHubリポジトリの初期設定まで）
###### 1. ローカルに作業ディレクトリを作成
```shell
% mkdir -p ~/fbc/ls
% cd ~/fbc/ls
```
- プラクティスごとに整理された fbcディレクトリを作成
- `-p`オプションで親ディレクトリも一緒に作成する。
- `ls`ディレクトリは、プラクティス『lsコマンドを作る』専用のディレクトリ。

###### 2. Gitリポジトリを初期化
```shell
% cd ~/fbc
% git init
```
- ローカルリポジトリを Git管理下に置く。

###### 3. GitHubリポジトリと紐付け
```shell
% git remote add origin https://github.com/YSWEngineer/fbc.git
```
- ブラウザで GitHub から fbcリポジトリを作成したので、それをローカルと連携させる。
- GitHub や Git において、`origin`は慣例としてリモートリポジトリの名前として使用されている。

###### 4. プラクティス『lsコマンドを作る』専用のファイルを作成
```shell
% cd ls
% touch ls.rb README.md
```
- `ls.rb`：Ruby で lsコマンドを書くメインとなるファイル。
- `README.md`：今回のプラクティスの目的や要件を整理するメモ兼説明書ファイル。

###### 5. ファイルを Git に追加してコミット
```shell
% git add .
% git commit -m "初回コミット：プラクティスlsコマンドを作る専用のファイルを追加"
```
- `git add .`：全ての変更をステージング。
- `git commit -m`：commit messageを付けて変更した内容を保存。

###### 6. リモートリポジトリとの差分を解消
GitHub に README が既に存在していたため（自分で作っておきながら記憶にない）、リモートリポジトリとローカルリポジトリの履歴を統合する。

参考：[\[Git\] マージしようとするとrefusing to merge unrelated historiesが出たときの対処方法](https://dev.classmethod.jp/articles/git-merge-option-allow-unrelated-histories/)
```shell
% git pull origin main --allow-unrelated-histories 
remote: Enumerating objects: 3, done.
remote: Counting objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)
Unpacking objects: 100% (3/3), 848 bytes | 282.00 KiB/s, done.
From https://github.com/YSWEngineer/fbc
 * branch            main       -> FETCH_HEAD
 * [new branch]      main       -> origin/main
Successfully rebased and updated refs/heads/main.
```
- `--allow-unrelated-histories` により、別々の履歴でもマージが可能。

###### 7. GitHub へのプッシュ
```shell
% git branch -M main
% git push -u origin main
Enumerating objects: 5, done.
Counting objects: 100% (5/5), done.
Delta compression using up to 8 threads
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 441 bytes | 441.00 KiB/s, done.
Total 4 (delta 0), reused 0 (delta 0), pack-reused 0
To https://github.com/YSWEngineer/fbc.git
   8f8d74a..cf5e61e  main -> main
Branch 'main' set up to track remote branch 'main' from 'origin'.
```
- `-M`オプション
  - ブランチ名を変更する（Rename）。
  - 既に同名のブランチがあっても強制的に変更する。
`-u`オプション
  - ローカルブランチとリモートブランチを紐付ける。
  - 一度設定すると、次回からは`git push`や`git pull`だけで変更が可能。

###### 8. 確認
```shell
# 作成した作業用のディレクトリやファイルを確認
~/fbc % ls
ls		README.md
~/fbc % cd ls
~/fbc/ls % ls
ls.rb		README.md
```


---


#### プラクティス『lsコマンドを作る1』🛠️💻
<details open><summary>⚠️ ネタバレに触れているかもしれないので、念の為折り畳みます</summary>

### 現在のディレクトリのファイル一覧を取得
いろいろと調べてみると、Ruby を使ってディレクトリ内のファイル一覧を取得する方法について、いくつか方法があることが分かった。

- `Dir`：ディレクトリ操作に特化したクラス
- `File`：ファイル操作に特化したクラス
- `Pathname`：パス名操作を行うためのクラス
- `Find`：ディレクトリの階層を再帰的に探索するためのモジュール
- `Glob`：特定のパターンに一致するファイル名を取得するためのメソッド

他にもありそうだが、とりあえず1つずつRubyリファレンスマニュアルと照らして、挙動を確認。

#### ls.rbファイル
```ruby
# frozen_string_literal: true

# 簡単なコードでDirの挙動を確認
files = Dir.children('.')  # カレントディレクトリの中にあるディレクトリやファイルを配列として取得し、変数filesに代入する。.や..は含まれない
files.each do |file|  # 変数filesに入っている配列から要素を1つずつ取り出して、変数fileに代入し繰り返し処理を行う
  puts file  # 取り出した要素（ディレクトリやファイル）を出力する
end
```
```shell
~/fbc/ls % ruby ls.rb
README.md
ls.rb
```

#### Dir.children とは？
Ruby でディレクトリやファイルの一覧を取得するためのメソッドの一つ。
```ruby
Dir.children(path)
```
- `path`：どのディレクトリが見たいかを指定
  - `.`は、「現在のディレクトリ」
  - 返り値は「**配列**（そのディレクトリの中にあるディレクトリやファイルの一覧）」

参照サイト：[singleton method Dir.children](https://docs.ruby-lang.org/ja/latest/method/Dir/s/children.html)

#### Dir.entries との違い
`Dir.children`と似たメソッドで`Dir.entries`がある。
- `Dir.entries('.')`：返り値に`.`と`..`が**含まれる**
- `Dir.children('.')`：返り値に`.`と`..`を**含まない**

参考サイト：[singleton method Dir.entries](https://docs.ruby-lang.org/ja/latest/method/Dir/s/entries.html)

#### ちなみにホームからコマンドを実行すると......
```shell
~ % ruby fbc/ls/ls.rb
file.txt
.zshr
.zshrc.bak.20250814171709
.irb_history
.config
Music
.rest-client
.vim
args.sh
argsshift.sh
# 中略
.zsh_sessions
ruby
loop
openssl-1.1.1
src
.zsh
```
↑順序がバラバラの状態で返してきた......ど、どういうこと🤔💭
</details>



---


### ✍🏻 感想
#### 📁💻 整理整頓
今になって FBCのプラクティスをまとめたいと思い立ち、専用のリポジトリを作成しました。実際のコードだけでなく、気付いたこと、参考にした考え方、注釈などをディレクトリごとに整理しておけば、時間が経っても簡単に振り返りやすくなるはずだと考えました。

普段は Notion にまとめていますが、Git・GitHub ともっと仲良くなって自然と付き合えるようになりたいので、あえてこちらで管理する形に挑戦しました。今のところイメージとしてはこんな感じです👇🏻

```shell
fbc/
├── README.md             # 学習用リポジトリの説明
├── ls/                   # lsコマンドプラクティス
│   ├── ls.rb             # メインコード
│   └── README.md         # lsプラクティスの要件やメモ
├── wc/                   # wcコマンドプラクティス
│   ├── wc.rb             # メインコード
│   └── README.md         # wcプラクティスの要件やメモ
└── http/                 # HTTP関連プラクティス
    └── README.md
```

このようなものを作っておくことで、転職活動の際に役立ちそうですし、もっと早く気付ければよかったですが......気付いた「今」がベストなタイミングですね。『lsコマンドを作る1』以前のプラクティスも少しずつ追記していこうと思います。

#### 🐾 やっと踏み出せた
「何をどうすればいいのか」で足踏みしていましたが、ようやく一歩前進できました。久し振りに Rubyリファレンスマニュアルを読み、独特な表現に戸惑いつつも「えっ、前よりも読めるようになってる！」と自分の成長を実感できたのは嬉しい驚きです。

調べたいメソッドに迷わず辿り着けるようになったのも成長の証。とはいえ、メソッドの解説や似たようなメソッドとの違いを理解するのに四苦八苦していますが......🫠

lsコマンド、一つずつ実装していきます🏋🏻


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6 hours 06 min
- Total: 1252 hours 49 min
