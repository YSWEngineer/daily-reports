# 2025/08/02(åœŸ)
## ğŸ“š ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿®æ­£ï¼ˆãƒªãƒãƒ¼ã‚·ç·¨ï¼‰ã€


### ğŸ§© ã‚¿ã‚¹ã‚¯ã°ã‚‰ã—
- [x] ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®å†…å®¹ã‚’å’€åš¼
- [x] ã‚¿ã‚¹ã‚¯ã°ã‚‰ã—ã€ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¹ãƒ†ãƒƒãƒ—ã®ä½œæˆ
- [x] ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è¨€èªåŒ–
- [ ] ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£
- [ ] èª²é¡Œæå‡º


### ğŸ¾ ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¹ãƒ†ãƒƒãƒ—
<details><summary>ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®å†…å®¹ã‚’å’€åš¼</summary>

- [x] ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®å†…å®¹ã‚’å’€åš¼
</details>

<details><summary>ã‚¿ã‚¹ã‚¯ã°ã‚‰ã—ã€ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¹ãƒ†ãƒƒãƒ—ã®ä½œæˆ</summary>

- [x] ã‚¿ã‚¹ã‚¯ã°ã‚‰ã—ã€ã‚¹ãƒ¢ãƒ¼ãƒ«ã‚¹ãƒ†ãƒƒãƒ—ã®ä½œæˆ
</details>

<details><summary>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è¨€èªåŒ–</summary>

- [x] ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®è¨€èªåŒ– **â€»â‘ ã‹ã‚‰é †ã«è¡Œã†**
  - [x] â‘  reversi_methods_test.rb
  - [x] â‘¡ reversi.rb
  - [x] â‘¢ reversi_methods.rb
  - [x] â‘£ position.rb


</details>

<details><summary>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£</summary>

- [ ] ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£
  - test_cannot_put_stone
    - [ ] ä¿®æ­£
  - test_finished_of_quickest_win_board
    - [ ] ä¿®æ­£
  - test_put_stone
    - [x] ä¿®æ­£
  - test_turn
    - [x] ä¿®æ­£
  - test_finished_of_full_board
    - [ ] ä¿®æ­£

</details>

<details><summary>èª²é¡Œæå‡º</summary>

- [ ] ä¿®æ­£ã—ãŸã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ Pull Request ã¨ã—ã¦ã‚¢ãƒƒãƒ—
- [ ] Pull Request ã¨ã—ã¦ã‚¢ãƒƒãƒ—ã—ãŸ URL ã¨ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã®å®Ÿè¡Œçµæœã‚’æå‡º
</details>


---
### ğŸ§‘ğŸ»â€ğŸ’» æœ¬æ—¥ã®å–ã‚Šçµ„ã¿
#### ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿®æ­£ï¼ˆãƒªãƒãƒ¼ã‚·ç·¨ï¼‰ã€
##### test_cannot_put_stone
- ä¿®æ­£ã‚’è¡Œã†


---


### ğŸ¯ æ¬¡å›
#### ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ä¿®æ­£ï¼ˆãƒªãƒãƒ¼ã‚·ç·¨ï¼‰ã€
- ä¿®æ­£ã‚’è¡Œã†
    

---


### ğŸ’¡ æœ¬æ—¥ã®å­¦ã³ãƒ»æ°—ä»˜ã
#### test_cannot_put_stone
<details open><summary>âš ï¸ ãƒã‚¿ãƒãƒ¬æ³¨æ„</summary>

### turnãƒ¡ã‚½ãƒƒãƒ‰å†…ã®ã‚³ãƒ¼ãƒ‰ã‚’æ”¹ã‚ã¦è¨€èªåŒ–
```ruby
def turn(board, target_pos, attack_stone_color, direction)
    return false if target_pos.out_of_board?
    return false if target_pos.stone_color(board) == attack_stone_color

    next_pos = target_pos.next_position(direction)
    if (next_pos.stone_color(board) == attack_stone_color) || turn(board, next_pos, attack_stone_color, direction)
    board[target_pos.row][target_pos.col] = attack_stone_color
    true
  else
    false
  end
end
```
```ruby
def turn(board, target_pos, attack_stone_color, direction)
```
- ã€Œ`board`, `target_pos`, `attack_stone_color`, `direction`ã‚’å¼•æ•°ã«æŒã¤`turn`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹ã€ã€‚
  - `board`ï¼šãƒªãƒãƒ¼ã‚·ã®ç›¤é¢ã€‚
  - `target_pos`ï¼šã²ã£ãã‚Šè¿”ã™ï¼ˆè£è¿”ã—ãŸã„ï¼‰ãƒã‚¹ã€‚
  - `attack_stone_color`ï¼šæ”»æ’ƒã™ã‚‹å´ã®çŸ³ã®è‰²ã€‚
  - `direction`ï¼šæ–¹å‘ã€‚

```ruby
return false if target_pos.out_of_board?
```
- ã€Œã‚‚ã—ã€ã²ã£ãã‚Šè¿”ã—ãŸã„ï¼ˆç‹™ã£ã¦ã„ã‚‹ï¼‰ãƒã‚¹ãŒç›¤é¢å¤–ã ã£ãŸã‚‰ã€`false`ã‚’è¿”ã—ã¦ã€`turn`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€”ä¸­ã§çµ‚ã‚ã‚‰ã›ã‚‹ã€ã€‚
  - `return`ï¼šãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€”ä¸­ã§çµ‚ã‚ã‚‰ã›ã‚‹ã€‚äºˆç´„èªï¼Ÿ
  - `target_pos.out_of_board?`ï¼šã€Œã²ã£ãã‚Šè¿”ã™ãƒã‚¹ã¯ç›¤é¢å¤–ã§ã™ã‹ï¼Ÿã€ã¨ã„ã†å•ã„ã«ç­”ãˆã‚‹å½¢ã§`true`ã¾ãŸã¯`false`ã‚’è¿”ã™ã€‚

```ruby
return false if target_pos.stone_color(board) == attack_stone_color
```
- ã€Œã‚‚ã—ã€ã²ã£ãã‚Šè¿”ã—ãŸã„ï¼ˆç‹™ã£ã¦ã„ã‚‹ï¼‰ãƒã‚¹ã«ã€æ”»æ’ƒã™ã‚‹ï¼ˆè‡ªåˆ†ã®è‰²ã®ï¼‰çŸ³ãŒã‚ã£ãŸã‚‰`false`ã‚’è¿”ã—ã¦ã€`turn`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€”ä¸­ã§çµ‚ã‚ã‚‰ã›ã‚‹ã€ã€‚

```ruby
next_pos = target_pos.next_position(direction)
```
- ã€Œç‹™ã£ã¦ã„ã‚‹ãƒã‚¹ã‹ã‚‰`direction`ãŒç¤ºã™æ–¹å‘ã«ä¸€ã¤é€²ã‚“ã ãƒã‚¹ã‚’ã€å¤‰æ•°`next_pos`ã«ç´ä»˜ã‘ã‚‹ã€ã€‚

```ruby
if (next_pos.stone_color(board) == attack_stone_color) || turn(board, next_pos, attack_stone_color, direction)
```
- ã€Œã‚‚ã—ã€1ãƒã‚¹é€²ã‚“ã å…ˆã«è‡ªåˆ†ã®çŸ³ãŒã‚ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯`next_pos`, `attack_stone_color`, `direction`ã‚’å¼•æ•°ã«ã—ã¦`turn`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã®ãªã‚‰ã€ä»¥ä¸‹ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ã€ã€‚

```ruby
board[target_pos.row][target_pos.col] = attack_stone_color
```
- ã€Œç›¤é¢`board`ã®ã€`target_pos`ãŒç¤ºã™è¡Œï¼ˆ`row`ï¼‰ã¨åˆ—ï¼ˆ`col`ï¼‰ã®ä½ç½®ã«ã€è‡ªåˆ†ã®çŸ³ã‚’ç½®ãã€ã€‚

```ruby
    true
  else
    false
  end
end
```
- ã€ŒæˆåŠŸã—ãŸã‚‰`true`ã‚’è¿”ã—ã€ãã†ã§ãªã‘ã‚Œã°`false`ã‚’è¿”ã™ã€ã€‚

ãã—ã¦ã€
- `return false if target_pos.out_of_board?`
- `return false if target_pos.stone_color(board) == attack_stone_color`

ã“ã® 2è¡Œã¯ã€Œã“ã®çŠ¶æ…‹ã§ã¯ä½•ã‚‚ã§ããªã„ã®ã§`turn`ãƒ¡ã‚½ãƒƒãƒ‰ã®å‡¦ç†ã‚’ä¸­æ–­ã™ã‚‹å½¹å‰²ã€ã‚’æ‹…ã£ã¦ã„ã‚‹ã€‚

ã¨ã„ã†ã“ã¨ã¯ã€2è¡Œã¨åŒã˜å ´æ‰€ã«ã€Œã‚‚ã—ã€ç‹™ã£ã¦ã„ã‚‹ãƒã‚¹ãŒç©ºç™½ã®ãƒã‚¹ã ã£ãŸã‚‰`false`ã‚’è¿”ã—ã¦ã€`turn`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€”ä¸­ã§çµ‚ã‚ã‚‰ã›ã‚‹ã€ã¨ã„ã£ãŸå†…å®¹ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãåŠ ãˆã‚Œã°ã‚ˆã„ã€ã¨è€ƒãˆã‚‹ã€‚

### å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’è€ƒãˆã‚‹
ã‚ã¾ã‚Šé›£ã—ãè€ƒãˆãšã«ã€æ—¢ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã«æ›¸ãã€‚
```ruby
# ã‚‚ã—ç‹™ã£ã¦ã„ã‚‹ãƒã‚¹ãŒç©ºç™½ã®ãƒã‚¹ãªã‚‰falseã‚’è¿”ã—ã€turnãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€”ä¸­ã§çµ‚ã‚ã‚‰ã›ã‚‹
return false if target_pos.stone_color(board) == BLANK_CELL
```

### ãƒ†ã‚¹ãƒˆçµæœã‚’ç¢ºèª
```shell
~/bug_reversi/test % ruby reversi_methods_test.rb
Run options: --seed 5351

# Running:

.....FF..

Finished in 0.007866s, 1144.1648 runs/s, 2161.2001 assertions/s.

  1) Failure:
ReversiMethodsTest#test_finished_of_quickest_win_board [reversi_methods_test.rb:120]:
Expected false to be truthy.

  2) Failure:
ReversiMethodsTest#test_finished_of_full_board [reversi_methods_test.rb:107]:
Expected false to be truthy.

9 runs, 17 assertions, 2 failures, 0 errors, 0 skips
```
â†‘`ReversiMethodsTest#test_cannot_put_stone`ãŒãªããªã‚Šã€failureã®æ®‹ã‚Šã¯2ã¤ã€‚

### æ¬¡ã®ä¿®æ­£ã¸
ãƒ†ã‚¹ãƒˆçµæœã«ã¯ã€
- â‘ `test_finished_of_quickest_win_board`
- â‘¡`test_finished_of_full_board`

**â‘  æœ€ã‚‚æ—©ã„å‹åˆ©ã§ãƒªãƒãƒ¼ã‚·ã®è©¦åˆãŒçµ‚äº†**
**â‘¡ ãƒªãƒãƒ¼ã‚·ã®ç›¤é¢å…¨ã¦ã«ç™½è‰²ã¨é»’è‰²ã®çŸ³ãŒç½®ã‹ã‚Œã¦çµ‚äº†**

ã¨ã€ã€Œ**ãƒªãƒãƒ¼ã‚·ã®çµ‚äº†æ¡ä»¶**ã€ã«ã¤ã„ã¦é–¢ä¿‚ã—ã¦ã„ã‚‹ã¨æ¨æ¸¬ã€‚ãã—ã¦â‘ ãƒ»â‘¡å…±ã«`Expected false to be truthy.`ï¼ˆã€Œ**false ãŒè¿”ã‚‹ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ãŸãŒã€å®Ÿéš›ã¯ true ã‚’è¿”ã—ã¦ã„ã‚‹**ã€ï¼‰ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã€`false`ãŒè¿”ã‚‹ã‚ˆã†ã«ä¿®æ­£ã™ã‚Œã°è‰¯ã„ã¨è€ƒãˆã‚‹ã€‚

### ãƒ†ã‚¹ãƒˆãŒä½•ã‚’æœŸå¾…ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã™ã‚‹
- â‘ `test_finished_of_quickest_win_board`
  - â†’ ã€Œæœ€ã‚‚æ—©ã„å‹åˆ©ã§è©¦åˆãŒçµ‚äº†ã€ã¨ã¯ã€ç›¤é¢ã®çŸ³ã®è‰²ãŒé»’è‰²ã ã‘ã‚ã‚‹ã„ã¯ç™½è‰²ã ã‘ã®çŠ¶æ…‹ã‚’æŒ‡ã™ã€‚
  - riversi_methods_test.rbã‚’ç¢ºèªã™ã‚‹ã¨ä»¥ä¸‹ã®å†…å®¹ã®ã‚³ãƒ¼ãƒ‰ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹â†“ã€‚
```ruby
def test_finished_of_quickest_win_board
    assert finished?(build_board(<<~BOARD)) # ç™½æœ€çŸ­å‹åˆ©
      --------
      ---W----
      ---WW---
      -WWWWW--
      ---WWW--
      ---WWW--
      --------
      --------
    BOARD
    assert finished?(build_board(<<~BOARD)) # é»’æœ€çŸ­å‹åˆ©
      --------
      --------
      ----B---
      ---BBB--
      --BBBBB-
      ---BBB--
      ----B---
      --------
    BOARD
  end
```
ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨ã€ã€Œæœ€ã‚‚æ—©ã„å‹åˆ©ã§è©¦åˆãŒçµ‚äº†ï¼ˆ`quickest_win`ï¼‰ã€ã¯ä»¥ä¸‹ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚
**1. ç›¤é¢ã«ç™½çŸ³ã ã‘ãŒæ®‹ã£ã¦ã„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚**
**2. ç›¤é¢ã«é»’çŸ³ã ã‘ãŒæ®‹ã£ã¦ã„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚**



- â‘¡`test_finished_of_full_board`






</details>


---


### âœğŸ» æ„Ÿæƒ³
#### ğŸ¤” ä¿®æ­£ã‚³ãƒ¼ãƒ‰ã£ã¦ï¼Ÿ
ãƒã‚°ã®åŸå› ã«ãªã‚Šãã†ãªç®‡æ‰€ã«ç›®æ˜Ÿã‚’ä»˜ã‘ã‚‰ã‚Œã¾ã—ãŸã€‚
æ¬¡ã¯ã€ãã®éƒ¨åˆ†ã«å¯¾ã—ã¦å…·ä½“çš„ã«ã©ã‚“ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã€ã©ã®ã‚ˆã†ã«ä¿®æ­£ã‚’åŠ ãˆã‚‹ã‹ã‚’è©¦ã—ã¦ã„ãã¾ã™ã€‚
å…ˆãšã¯ä»®èª¬ã‚’ç«‹ã¦ã¦ã€ãƒ†ã‚¹ãƒˆçµæœã‚’ç¢ºèªã—ãªãŒã‚‰é€²ã‚ã¦ã„ãäºˆå®šã§ã™ã€‚



---


### â° å­¦ç¿’æ™‚é–“
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  hours  min
- Total: 1195 hours 12 min
