# 2025/12/29(月)
## 📚 プラクティス『🛠️💻 lsコマンドを作る2』

<details><summary>🎯 学習の狙い</summary>

- 標準出力について学ぶ
- 標準ライブラリの使い方を学ぶ
- Enumeratorには、each以外にも便利なメソッドがあることを学ぶ
- RailsじゃないRubyプログラミングを学ぶ
- メソッド分割を学ぶ
- わかりやすい変数名・メソッド名を学ぶ
- 大きな問題を分割する力を学ぶ
</details>

<details><summary>📌 要件（Docs：lsコマンドを作る 参照）</summary>

- [x] `-a`オプションを付けたとき、`.`で始まる隠しファイルも表示対象にする
- [x] ⚠️ 注意事項：`..`は表示されなくてもよい
- [x] そのまま実行すると、今いるフォルダ（カレントディレクトリ）の中身を表示する
- [x] `gem`は使わずに Ruby の標準ライブラリだけで作ること
- [x] 完成したコードは GitHub の Pull Request として提出すること
- [x] `rubocop-fjord`でデバッグを実行し、全てパスさせること
- [x] 表示は横に最大3列になるようにレイアウトすること
  - 3, 6, 9, 12のように3の倍数の件数だけでなく、最後の列に空欄ができるケースの結果も載せる
  - 「3列から5列に仕様変更してください」または「3列から100列に変えてください」とあとから言われても必要最小限の変更で対応できるようなロジックにしておくこと
</details>

<details><summary>📍 処理の流れ ※ 随時、追加・変更あり</summary>

**1. オプションの有無を判定**

**2. ファイル一覧取得**

**3. 出力するファイルを選別（隠しファイルを含む or 含まない）**

**4. 表示するための整形**

**5. 1 〜 4 を踏まえた上での出力**
</details>

<details><summary> 🧩 タスクばらし ※ 随時、追加・変更あり</summary>

- [x] タスク1：前提の整理
  - [x] `ls`コマンド、`-a`オプションについて確認

- [x] タスク2：`-a`オプションを受け取れる状態にする
  - [x] `OptionParser`を使用して引数を確認する
  - [x] `-a`オプションを含む処理 / 含まない処理を分けて考える（条件分岐🤔）

- [x] タスク3：ディレクトリの中身を取得

- [x] タスク4：隠しファイルの扱いを決める
  - [x] `-a`オプションが付いているなら`.`から始まるファイルを表示させる
  - [x] `-a`オプションが付いていないなら隠しファイルは表示させない

- [x] タスク5：レイアウトの調整
  - [x] 『lsコマンドを作る1』で作成したレイアウトの処理をそのまま使用🤔
  - [x] `-a`オプションを使ったときに隠しファイルが表示されるようにする

- [x] タスク6：rubocop-fjord に通す

- [x] タスク7：提出
  - [x] 作成した lsコマンドを Pull Request として提出
  - [x] 提出物にlsコマンドの実行結果とOS標準（macなど自分の使ってるOS）のlsコマンドをのスクリーンショットを併記して貼る
  - [x] rubocop-fjord のチェックが全てパスした画面をスクショして添付
</details>


---


## 🧑🏻‍💻 本日の取り組み
### 📚 プラクティス『🛠️💻 lsコマンドを作る2』 
- メンターさんのコメントをもとにコードを修正
- 課題を再提出


---


## ⏭️ 次回
### 📚 プラクティス『lsコマンドを作る3』
- プラクティスの内容を確認から着手する


---


### 💡 本日の学び・気付き
#### プラクティス『🛠️💻 lsコマンドを作る2』再提出
<details><summary>⚠️ ネタバレに注意 </summary>

### glob の段階で hidden file を含める方法がある！
→ `File::FNM_DOTMATCH`を使用する。

### Dir.glob と hidden file の関係
#### 通常の glob
```ruby
Dir.glob('*')
```
- `.`で始まるファイルは最初から対象外。
- そのため、`.git`などの hidden file は取得されない。

#### hidden file を含める glob
```ruby
Dir.glob('*', File::FNM_DOTMATCH)
```
- `.`で始まるファイルも含めて取得される。
- `.`は含まれる。
- `..`は含まれない（今回のプラクティスでは問題なし）。

### 修正前と修正後のコード
```ruby
# 修正前
files = Dir.entries('.').reject { |file| ['.', '..'].include?(file) }
files = files.reject { |file| file.start_with?('.') } unless show_hidden
files = files.sort
```
```ruby
# 修正後
files =
  if show_hidden
    Dir.glob('*', File::FNM_DOTMATCH)
  else
    Dir.glob('*')
  end

files = files.sort
```
</details>


---


## ✍🏻 感想
### 🙌🏻 課題再提出
早速レビューをいただきました。仕事から帰宅後すぐにご指摘くださった箇所を確認し、コメントの意図を咀嚼しながらコードの修正に取り組みました。挙動や rubocop-fjord では問題がなかったため、そのまま再提出しています。

FBC では、メンターさんとのこのようなキャッチボールがとても好きなのですが、今回もそのやり取りの中で新しい気付きがありました。

:@yoshitsugu: さん、お忙しい中、本当にありがとうございます🥹🙏🏻


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 hours 15 min
- Total: 1458 hours 19 min
