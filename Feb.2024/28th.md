# 2023/02/28(水)
## 🕺今の気持ち
- どんどんプラクティスを進ませよう
- 成長スピードを早めよう
- 自分の考えや気持ちを簡潔に言語化したり、相手にわかりやすく伝える話し方ができるようになろう
- 心と身体の状態を把握しながら行動しよう
---


## ✍🏻本日の取り組み
#### プラクティス『SSH の基本を理解する』

---


## 💡学んだこと

<details><summary>スーパーユーザー（rootユーザー）でのログインを禁止にする</summary>

### 手順

1. rootユーザーから一般ユーザーに切り替える
`su - ユーザー名`

2. パスワード認証方式を用いて、ログインする
`ssh -p5555 yoshiwo@IPアドレス`

3. ユーザー名を確認
`whoami`

4. SSH設定ファイルを開く
`sudo vim /etc/ssh/sshd_config`

5. スーパーユーザーでのログインを禁止（無効）にする
作業内容は「rootログインを有効にする」前の状態に戻します。`/PermitRootLogin`と入力、returnキーを押し`PermitRootLogin`という単語が含まれる箇所を検索します。その行の`yes`を`prohibit-password`に変更します。結果としてその行は`PermitRootLogin prohibit-password`となります。
```
PermitRootLogin prohibit-password
```

6. 変更した設定を保存して終了する
escキーを押してコマンドモードに切り替えて、`:wq`と入力して変更した内容を保存して、ファイルを閉じます。

7. 設定の検証
設定が正しいかどうか、SSHサーバーの設定を以下のコマンドを実行してテストします。
`sudo sshd -t`

8. 設定の反映
設定を反映するために以下のコマンドを入力して、SSHサーバーのサービスを再起動します。
`sudo service ssh restart`
`sudo service ssh status`

9. 設定の確認
パスワード認証方式を用いても、スーパーユーザーでのログインができないことを確認します。
```
ssh -p 5555 root@IPアドレス
root@IPアドレス's password:
# rootユーザーのパスワードを入力しますが以下のようなテキストが表示されます
Permission denied, please try again.
root@IPアドレス's password:
```

</details>


<details><summary>公開鍵認証方式でのログイン（途中まで）</summary>

### 公開鍵認証方式を使うには？
1. 「公開鍵」と「秘密鍵」の生成
2. 公開鍵のサーバーへの登録

が事前に必要です。

### パスワード認証方式について
- パスワード認証方式は、SSH接続の一般的な認証方法の一つです
- ユーザーは、ユーザー名とパスワードを使用してサーバーにログインします
- サーバーは、入力されたパスワードが登録されたパスワードと一致するかどうかを確認します。一致する場合、クライアントの認証が行われます
- この方式のメリットは、設定が簡単であることです
- この方式のデメリットは、パスワードが弱い場合やパスワードが漏洩した場合にはセキュリティリスクとなってしまう点です
- authentication：認証
- 具体的な手順
  - ①**SSHクライアントの起動**：ユーザーはSSHクライアント（ターミナルなど）を起動します
  - ②**SSHコマンドの入力**：ユーザーはSSHコマンドを入力します。このコマンドは通常、`ssh ユーザー名@IPアドレス`の形式をとります
  - ③**パスワードの入力**：ユーザーにはパスワードの入力を求められるので、正しいパスワードを入力することでログインすることができます

### 公開鍵認証方式のみを使用する
1. SSH設定ファイルを開く
`sudo vim /etc/ssh/sshd_config`

2. パスワード認証を無効にする
`/PasswordAuthentication`と入力して検索を行います。該当の行が`yes`に設定されている場合は、それを`no`に変更します。結果としてその行は`PasswordAuthentication no`となります。

3. 公開鍵認証を有効にする
SSH設定ファイルは開いたままにして、続けて`/PubkeyAuthentication`と入力して検索を行います。該当の行が`no`に設定されている場合は、それを`yes`に変更します。結果としてその行は`PubkeyAuthentication yes`となります。

4. 設定を保存して終了する
escキーを押してコマンドモードに切り替え、`:wq`と入力して設定の保存とファイルを閉じます。

5. 設定の検証、設定の反映
設定が正しいかどうか以下のコマンドを入力してテストします。
`sudo sshd -t`
設定を反映させるために以下のコマンドを入力して、SSHサーバーのサービスを再起動します。
`sudo service ssh restart`
`sudo service ssh status`

</details>

---


## 🌞次の目標
-  プラクティス『SSH の基本を理解する』をコツコツと進める

---


## ❤️‍🔥感想
#### ✨タスクばらしのおかげで
数日間学習できない期間がありましたが、タスクばらしのおかげで手順を忘れることなくコツコツと先に進むことができました。今回のプラクティスもいよいよゴールが見えてきました。次回は「公開鍵認証方式でのログイン」を終わらせることを目標に引き続き頑張って参ります。

---


## ⏰学習時間
- Today:&nbsp;&nbsp; 2 hours 15 min
- Total: 181 hours 57 min
