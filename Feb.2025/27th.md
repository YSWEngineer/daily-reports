# 2025/02/27(木)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [x] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [x] 3.3 FizzBuzzプログラムのテスト自動化
   - [x] 3.4 この章のまとめ
- [x] 第4章  配列や繰り返し処理を理解する
   - [x] 4.1 イントロダクション
   - [x] 4.2 配列
   - [x] 4.3 ブロック
   - [x] 4.4 ブロックを使う配列のメソッド
   - [x] 4.5 範囲（Range）
   - [x] 4.6 例題：RGB変換プログラムを作成する
   - [x] 4.7 配列についてもっと詳しく
   - [x] 4.8 ブロックについてもっと詳しく
   - [x] 4.9 範囲（Range）についてもっと詳しく
   - [x] 4.10 さまざまな繰り返し処理
   - [x] 4.11 繰り返し処理用の制御構造
   - [x] 4.12 この章のまとめ
- [x] 第5章  ハッシュやシンボルを理解する
   - [x] 5.1 イントロダクション
   - [x] 5.2 ハッシュ
   - [x] 5.3 シンボル
   - [x] 5.4 続・ハッシュについて
   - [x] 5.5 例題：長さの単位交換プログラムを作成する
   - [x] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [x] 5.7 シンボルについてもっと詳しく
   - [x] 5.8 この章のまとめ
- [x] 第6章  正規表現を理解する
   - [x] 6.1 イントロダクション
   - [x] 6.2 正規表現って何？
   - [x] 6.3 Ruby における正規表現オブジェクト
   - [x] 6.4 例題：Ruby のハッシュ記法を変換する
   - [x] 6.5 正規表現オブジェクトについてもっと詳しく
   - [x] 6.6 この章のまとめ
- [x] 第7章  クラスの作成を理解する
   - [x] 7.1 イントロダクション
   - [x] 7.2 オブジェクト指向プログラミングの基礎知識
   - [x] 7.3 クラスの定義
   - [x] 7.4 例題：改札機プログラムの作成
   - [x] 7.5 selfキーワード
   - [x] 7.6 クラスの継承
   - [x] 7.7 メソッドの可視性
   - [x] 7.8 定数についてもっと詳しく
   - [x] 7.9 さまざまな種類の変数
   - [x] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [x] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [x] 8.1 イントロダクション
   - [x] 8.2 モジュールの概要
   - [x] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [ ] 8.4 例題：rainbowメソッドの作成
   - [ ] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [ ] 8.6 モジュールを利用した名前空間の作成
   - [ ] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第8章  モジュールを理解する   
    - 8.4 例題：rainbowメソッドの作成
      - rainbowメソッドを実装する
    

## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第8章  モジュールを理解する
    - 8.4 例題：rainbowメソッドの作成
      - rainbowメソッドのリファクタリング
    


------------


## 💡 本日の学び・気付き
### 8.4 例題：rainbowメソッドの作成
####  rainbowメソッドを実装する
rainbowメソッドを実装するために、テストコードから書き始める。今回は文字列や配列で rainbowメソッドが呼び出せるよう、Stringクラスと Arrayクラスにあらかじめ Rainbowableモジュールを`include`しておく必要がある。これは setupメソッドで行うことにする。
```ruby
require 'minitest/autorun'
require_relative '../lib/rainbowable'

class RainbowableTest < Minitest::Test
  def setup
    # 文字列や配列でrainbowメソッド画呼び出せるよう、Rainbowableモジュールをinclude
    String.include Rainbowable
    Array.include Rainblwable
  end
  
  def test_rainbow
    # とりあえずモジュールが参照できることを確認する
    assert Rainbowable
  end
end
```
テストコードの実装。ANSIエスケープシーケンスの書式に従うと、次のようなコードになる。
```ruby
def test_rainbow
    expected = "\e[31mH\e[32me\e[33ml\e[34ml\e[35mo\e[36m,\e[31m \e[32mw\e[33mo\e[34mr\e[35ml\e[36md\e[31m!\e[0m"
    assert_equal expected, 'Hello, world!'.rainbow

    expected = "\e[31m[\e[32m1\e[33m,\e[34m \e[35m2\e[36m,\e[31m \e[32m3\e[33m]\e[0m"
    assert_equal expected, [1, 2, 3].rainbow
end
```
テストを実行する。
```shell
~/ruby-book % ruby test/rainbowable_test.rb
Run options: --seed 22500

# Running:

F

Finished in 0.033745s, 29.6340 runs/s, 29.6340 assertions/s.

  1) Failure:
RainbowableTest#test_rainbow [test/rainbowable_test.rb:13]:
--- expected
+++ actual
@@ -1 +1 @@
-"\e[31mH\e[32me\e[33ml\e[34ml\e[35mo\e[36m,\e[31m \e[32mw\e[33mo\e[34mr\e[35ml\e[36md\e[31m!\e[0m"
+nil


1 runs, 1 assertions, 1 failures, 0 errors, 0 skips
```
↑もちろん、テストは失敗する。今回は rainbowメソッドを次のようなロジックで実装することにする。

**1. to_sメソッドを使って自分自身の文字列表現を取得する。**
**2. 取得した文字列を1文字ずつループ処理する。**
**3. 各文字の手前に ANSIエスケープシーケンスを付与する。文字色は 31 から 36 まで順に切り替え、最後まで進んだらまた 31 に戻る。**
**4. 各文字を連結して1つの文字列にする。**
**5. 最後に文字色をリセットするための`\e[0m`を付与する。**

文字列を1文字ずつループ処理する場合は each_charメソッドを使う。また、文字色を 31 から 36 まで切り替えて 31 に戻す処理は、ループカウンタを 6 で割った余りに 31 を足すと良さそう。
```ruby
module Rainbowable
  def rainbow
    # 1. to_sメソッドを使って自分自身の文字列表現を取得する
    str = self.to_s

    # ループカウンタと、色を付けた文字を順に格納する配列を用意
    count = 0
    colored_chars = []

    # 2. 取得した文字列を1文字ずつループ処理する
    str.each_char do |char|
      # 文字列は31から36まで順に切り替え、最後まで進んだらまた31に戻る
      color = 31 + count % 6

      # 3. 各文字の手前にANSIエスケープシーケンスを付与する（さらに、その文字を配列に追加する）
      colored_chars << "\e[#{color}m#{char}]"
      count += 1
    end

    # 4. 各文字を連結して1つの文字列にする
    ret = colored_chars.join

    # 5. 最後に文字色をリセットするための\e[0mを付与する
    ret + "\e[0m"
  end
end
```
```shell
~/ruby-book % ruby test/rainbowable_test.rb
Run options: --seed 46064

# Running:

.

Finished in 0.000882s, 1133.7869 runs/s, 2267.5738 assertions/s.

1 runs, 2 assertions, 0 failures, 0 errors, 0 skips
```
テストはパスしたが、本当に文字の色が変わっているのか分からないので、試しにテストコードの最後で実際に rainbowメソッドの戻り値を putsしてみる。
```ruby
require 'minitest/autorun'
require_relative '../lib/rainbowable'

class RainbowableTest < Minitest::Test
  def setup
    # 文字列や配列でrainbowメソッド画呼び出せるよう、Rainbowableモジュールをinclude
    String.include Rainbowable
    Array.include Rainbowable
  end
  
  def test_rainbow
    expected = "\e[31mH\e[32me\e[33ml\e[34ml\e[35mo\e[36m,\e[31m \e[32mw\e[33mo\e[34mr\e[35ml\e[36md\e[31m!\e[0m"
    assert_equal expected, 'Hello, world!'.rainbow

    expected = "\e[31m[\e[32m1\e[33m,\e[34m \e[35m2\e[36m,\e[31m \e[32m3\e[33m]\e[0m"
    assert_equal expected, [1, 2, 3].rainbow

    # rainbowメソッドの戻り値をターミナルに出力
    puts 'Hello, world!'.rainbow
    puts [1, 2, 3].rainbow
  end
end
```

<a href="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBK3JXQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--1cbf513fb7ac5a3a0698d23908840298b1da7383/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202025-02-27%2017.12.13.png" target="_blank" rel="noopener noreferrer"><img src="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBK3JXQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--1cbf513fb7ac5a3a0698d23908840298b1da7383/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88%202025-02-27%2017.12.13.png" width="1021" height="385" alt="スクリーンショット 2025-02-27 17.12.13.png"></a>

`Hello, world!`と`[1, 2, 3]`の色が変わっている。


-------------


## ✍🏻 感想
### 👂🏻 終始耳を傾ける
『FBCメンターパネルトーク🧑‍🏫』に参加しました。メンターパネルトークでは、メンターの皆さんから多岐にわたる知見を拝聴できるので、個人的にずっと待ち遠しかったイベントの一つでした。

「ふーん、なるほど」で終わらせるのではなく、知見をちゃんと自分のものとして取り入れたいと思います。メンターの皆さんは日頃からお忙しいとは思いますが、また近いうちに第3回を行ってほしいです。

動画がアップされましたら、何度も見返したいです。

さまざまな質問にお答えくださったメンターの皆さん、ご一緒してくださった皆さん、どうもありがとうございました😊🙏🏻

------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 4 hours 15 min
- Total: 974 hours 41 min
