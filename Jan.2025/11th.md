# 2025/01/11(土)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [ ] 第3章  テストを自動化する
   - [ ] 3.1 イントロダクション
   - [ ] 3.2 Minitest の基本
   - [ ] 3.3 FizzBuzzプログラムのテスト自動化
   - [ ] 3.4 この章のまとめ
- [ ] 第4章  配列や繰り返し処理を理解する
   - [ ] 4.1 イントロダクション
   - [ ] 4.2 配列
   - [ ] 4.3 ブロック
   - [ ] 4.4 ブロックを使う配列のメソッド
   - [ ] 4.5 範囲（Range）
   - [ ] 4.6 例題：RGB変換プログラムを作成する
   - [ ] 4.7 配列についてもっと詳しく
   - [ ] 4.8 ブロックについてもっと詳しく
   - [ ] 4.9 範囲（Range）についてもっと詳しく
   - [ ] 4.10 さまざまな繰り返し処理
   - [ ] 4.11 繰り返し処理用の制御構造
   - [ ] 4.12 この章のまとめ
- [ ] 第5章  ハッシュやシンボルを理解する
   - [ ] 5.1 イントロダクション
   - [ ] 5.2 ハッシュ
   - [ ] 5.3 シンボル
   - [ ] 5.4 続・ハッシュについて
   - [ ] 5.5 例題：長さの単位交換プログラムを作成する
   - [ ] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [ ] 5.7 シンボルについてもっと詳しく
   - [ ] 5.8 この章のまとめ
- [ ] 第6章  正規表現を理解する
   - [ ] 6.1 イントロダクション
   - [ ] 6.2 正規表現って何？
   - [ ] 6.3 Ruby における正規表現オブジェクト
   - [ ] 6.4 例題：Ruby のハッシュ記法を変換する
   - [ ] 6.5 正規表現オブジェクトについてもっと詳しく
   - [ ] 6.6 この章のまとめ
- [ ] 第7章  クラスの作成を理解する
   - [ ] 7.1 イントロダクション
   - [ ] 7.2 オブジェクト指向プログラミングの基礎知識
   - [ ] 7.3 クラスの定義
   - [ ] 7.4 例題：改札機プログラムの作成
   - [ ] 7.5 selfキーワード
   - [ ] 7.6 クラスの継承
   - [ ] 7.7 メソッドの可視性
   - [ ] 7.8 定数についてもっと詳しく
   - [ ] 7.9 さまざまな種類の変数
   - [ ] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [ ] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [ ] 8.1 イントロダクション
   - [ ] 8.2 モジュールの概要
   - [ ] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [ ] 8.4 例題：rainbowメソッドの作成
   - [ ] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [ ] 8.6 モジュールを利用した名前空間の作成
   - [ ] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第2章  Ruby の基礎を理解する
      - 2.12 そのほかの基礎知識 〜 2.13 この章のまとめ

## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第3章  テストを自動化する
      - 3.1 イントロダクション 〜


------------


## 💡 本日の学び・気付き
### 🍒 プロを目指す人のためのRuby入門 <改訂2版>
#### 2.12 そのほかの基礎知識
##### ガベージコレクション（GC）
Ruby は使用されなくなったオブジェクトを回収し、自動的にメモリを解放する。この仕組みをガベージコレクション（Garbage Collection、略してGC）と言う。

##### エイリアスメソッド
たとえば、Stringクラスの lengthメソッドと sizeメソッドは、名前が異なるだけでどちらも同じメソッド。このような全く同じ実装で名前だけ異なるメソッドのことを**エイリアスメソッド**と呼ぶ。
```ruby
# lengthもsizeも、どちらも文字数を返す
irb(main):001> 'hello'.length
=> 5
irb(main):002> 'hello'.size
=> 5
```

##### 式（Expression）と文（Statement）
Ruby では他の言語では文と見なされるような要素が式になっていることが多い。
```ruby
# if文が値を返すので変数に代入できる
a =
  if true
    '真です'
  else
    '偽です'
  end
a #=> "真です"

# メソッドの定義も実は値（シンボル）を返している
b = def foo; end
b #=> :foo
```
厳密に言えば Ruby の if文は文ではなく、「if式」。メソッドの定義の構文も「メソッド定義式」と呼んだほうが実態に即している。Ruby では「文のように見えるが実は式」という要素が多いことは、頭の片隅に置いておくこと。

##### 擬似変数
`nil`、`true`、`false`は**擬似変数**と呼ばれる特殊な変数。他にも次のような擬似変数がある。
- `self`：オブジェクト自身
- `__FILE__`：現在のソースファイル名
- `__LINE__`：現在のソースファイル中の行番号
- `__ENCODING__`：現在のソースファイルのスクリプトエンコーディング
擬似変数は変数と同じように値を読み出すことができるが、代入しようとするとエラーが発生する。

##### 参照の概念を理解する
Ruby の変数にはオブジェクトそのものではなく、**オブジェクトへの参照**が格納されている。変数を他の変数に代入したり、メソッドの引数として渡したりすると、新しい変数やメソッドの引数は**元の変数と同じオブジェクトを参照**する。`object_id`メソッドを使うと、異なる変数が同じオブジェクトを参照しているかどうかが分かる。
```ruby
# aとbはどちらも同じ文字列だが、オブジェクトとしては別物
irb(main):001> a = 'hello'
=> "hello"
irb(main):002> a.object_id
=> 6740
irb(main):003> b = 'hello'
=> "hello"
irb(main):004> b.object_id
=> 14260

# cにbを代入する。bとcはどちらも同じオブジェクト
irb(main):005> c = b
=> "hello"
irb(main):006> c.object_id
=> 14260

# メソッドの引数にcを渡す。引数として受け取ったdはb、cと同じオブジェクトを参照している
irb(main):007* def m(d)
irb(main):008*   d.object_id
irb(main):009> end
irb(main):010> m(c)
=> 14260

# equal?メソッドを使って同じオブジェクトかどうか確認しても良い（trueなら同じオブジェクト）
irb(main):011> a.equal?(b)
=> false
irb(main):012> b.equal?(c)
=> true
```
同じオブジェクトを参照している場合、オブジェクトの状態が変更されると、その変更がそのまま各変数に影響する。
```ruby
# b、cは同じオブジェクト、aは異なるオブジェクト
irb(main):013> a = 'hello'
=> "hello"
irb(main):014> b = 'hello'
irb(main):015> c = b
=> "hello"

# 渡された文字列を破壊的に大文字に変換するメソッドを定義する
irb(main):016* def m!(d)
irb(main):017*   d.upcase!
irb(main):018> end
=> :m!

# cにm!メソッドを適用する
irb(main):019> m!(c)
=> "HELLO"

# b、cはいずれも大文字になる
irb(main):020> b
=> "HELLO"
irb(main):021> c
=> "HELLO"

# aは別のオブジェクトなので大文字にならない
irb(main):022> a
=> "hello"
```
参照の概念において、特に**文字列や配列、ハッシュといった変更可能なオブジェクト（ミュータブルなオブジェクトとも呼ばれる）を扱う場合は、同一のオブジェクトを参照しているのか、異なるオブジェクトを参照しているのかを意識**しないと、思いがけないバグを作り込んでしまうことがある。

##### 組み込みライブラリ、標準ライブラリ、gem
Ruby では最初から数多くのライブラリが標準ライブラリとして用意されている。中でも利用頻度が高いライブラリは**組み込みライブラリ**として提供されている。文字列の Stringクラスや、数値の Integerクラスも組み込みライブラリ。

有志の開発者が作成している外部ライブラリは**gem**と呼ばれる形式でパッケージングされる。実は、**irb**も gem になっている。

##### require と require_relative
組み込みライブラリでない標準ライブラリや gem を利用する場合は、明示的にそのライブラリを読み込む必要がある。ライブラリを読み込む場合は次のような構文を使う。
```ruby
require ライブラリ名
```
```ruby
# Dateクラスは組み込みライブラリではないので、そのままでは使用できない
irb(main):023> Date.today
(irb):23:in `<main>': uninitialized constant Date (NameError)

# dateライブラリを読み込むとDateクラスが使えるようになる
irb(main):024> require 'date'
irb(main):025> Date.today
=> #<Date: 2025-01-11 ((2460687j,0s,0n),+0s,2299161j)>
```
自分で作成した Rubyプログラムを読み込む場合は`require_relative`を使う。

##### putsメソッド、printメソッド、pメソッド、ppメソッド
`puts`メソッドは改行を加えて変数の内容やメソッドの戻り値をターミナルに出力する。`puts`メソッド自身の戻り値は`nil`になる。
```ruby
irb(main):026> puts 123
123
=> nil
irb(main):027> puts 'abc'
abc
=> nil
```
`print`メソッドは改行を加えない。
```ruby
irb(main):028> print 123
123=> nil
irb(main):029> print 'abc'
abc=> nil
```
`p`メソッドは`puts`メソッドと同じように改行を加えて出力する。ただし、文字列を出力するとダブルクオートで囲まれている。また、引数で渡されたオブジェクトそのものがメソッドの戻り値になる。
```ruby
irb(main):030> p 123
123
=> 123
irb(main):031> p 'abc'
"abc"
=> "abc"
```
`pp`メソッドは大きくて複雑な配列やハッシュ、オブジェクトの内容を見やすく整形して出力する。`p`メソッドでは確認しづらいときに`pp`メソッドを使うと便利な場合がある。
```ruby
# pメソッドの場合
irb(main):034> p Encoding.aliases.take(5)
[["BINARY", "ASCII-8BIT"], ["CP437", "IBM437"], ["CP720", "IBM720"], ["CP737", "IBM737"], ["CP775", "IBM775"]]

# ppメソッドの場合
irb(main):035> pp Encoding.aliases.take(5)
[["BINARY", "ASCII-8BIT"],
 ["CP437", "IBM437"],
 ["CP720", "IBM720"],
 ["CP737", "IBM737"],
 ["CP775", "IBM775"]]
```
改行文字を含む文字列の場合
```ruby
irb(main):036> s = "abc\ndef"
=> "abc\ndef"
irb(main):037> puts s
abc
def
=> nil
irb(main):038> print s
abc
def=> nil
irb(main):039> p s
"abc\ndef"
=> "abc\ndef"
irb(main):040> pp s
"abc\n" + "def"
=> "abc\ndef"
```
配列を渡した時の表示
```ruby
irb(main):041> a = [1, 2, 3]
=> [1, 2, 3]
irb(main):042> puts a
1
2
3
=> nil
irb(main):043> print a
[1, 2, 3]=> nil
irb(main):044> p a
[1, 2, 3]
=> [1, 2, 3]
irb(main):045> pp a
[1, 2, 3]
=> [1, 2, 3]
```
4つのメソッドの使い分けとしては、`puts`メソッドと`print`メソッドは**一般ユーザ向け**、`p`メソッドと`pp`メソッドは**開発者向け**に分かれる。

###### putsメソッド、printメソッド、pメソッド、ppメソッドの違い
|メソッド   |出力後の改行   |配列の表示   |文字列変換   |戻り値   |対象者   |
|:---|:---|:---|:---|:---|:---|
|puts   |あり   |要素ごとに改行   |to_s   |nil   |一般ユーザ   |
|print   |なし   |改行しない   |to_s   |nil   |一般ユーザ   |
|p   |あり   |改行しない   |inspect   |引数のオブジェクト   |開発者   |
|pp   |あり   |見やすく整形   |inspect に似た方法   |引数のオブジェクト   |開発者   |


-------------


## ✍🏻 感想
### 🍒 irb って gem だったの！？
「えっ！」と気付かされることがたくさんあるチェリー本。Ruby中級に入る前に学んだカレンダー問題やプログラムの修正で得た知識が、点と点から線で繋がり始めたり、点がより大きく、より濃くなってきています。この日報でも度々書いていますが、分からないことが分かったり、知らなかったことを知るのは楽しいですね。この先、学習が思うように進めなかったりして落ち込むようなことがあると思いますが、「楽しい」と感じる気持ちは忘れないように大切にします。この気持ちだけはブレたらあかんで！


------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 2 hours 00 min
- Total: 866 hours 45 min
