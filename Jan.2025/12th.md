# 2025/01/12(日)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [ ] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [ ] 3.3 FizzBuzzプログラムのテスト自動化
   - [ ] 3.4 この章のまとめ
- [ ] 第4章  配列や繰り返し処理を理解する
   - [ ] 4.1 イントロダクション
   - [ ] 4.2 配列
   - [ ] 4.3 ブロック
   - [ ] 4.4 ブロックを使う配列のメソッド
   - [ ] 4.5 範囲（Range）
   - [ ] 4.6 例題：RGB変換プログラムを作成する
   - [ ] 4.7 配列についてもっと詳しく
   - [ ] 4.8 ブロックについてもっと詳しく
   - [ ] 4.9 範囲（Range）についてもっと詳しく
   - [ ] 4.10 さまざまな繰り返し処理
   - [ ] 4.11 繰り返し処理用の制御構造
   - [ ] 4.12 この章のまとめ
- [ ] 第5章  ハッシュやシンボルを理解する
   - [ ] 5.1 イントロダクション
   - [ ] 5.2 ハッシュ
   - [ ] 5.3 シンボル
   - [ ] 5.4 続・ハッシュについて
   - [ ] 5.5 例題：長さの単位交換プログラムを作成する
   - [ ] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [ ] 5.7 シンボルについてもっと詳しく
   - [ ] 5.8 この章のまとめ
- [ ] 第6章  正規表現を理解する
   - [ ] 6.1 イントロダクション
   - [ ] 6.2 正規表現って何？
   - [ ] 6.3 Ruby における正規表現オブジェクト
   - [ ] 6.4 例題：Ruby のハッシュ記法を変換する
   - [ ] 6.5 正規表現オブジェクトについてもっと詳しく
   - [ ] 6.6 この章のまとめ
- [ ] 第7章  クラスの作成を理解する
   - [ ] 7.1 イントロダクション
   - [ ] 7.2 オブジェクト指向プログラミングの基礎知識
   - [ ] 7.3 クラスの定義
   - [ ] 7.4 例題：改札機プログラムの作成
   - [ ] 7.5 selfキーワード
   - [ ] 7.6 クラスの継承
   - [ ] 7.7 メソッドの可視性
   - [ ] 7.8 定数についてもっと詳しく
   - [ ] 7.9 さまざまな種類の変数
   - [ ] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [ ] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [ ] 8.1 イントロダクション
   - [ ] 8.2 モジュールの概要
   - [ ] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [ ] 8.4 例題：rainbowメソッドの作成
   - [ ] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [ ] 8.6 モジュールを利用した名前空間の作成
   - [ ] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第3章  テストを自動化する
      - 3.1 イントロダクション 〜 3.2 Minitest の基本

## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第3章  テストを自動化する
      - 3.3 FizzBuzzプログラムのテスト自動化 〜


------------


## 💡 本日の学び・気付き
### 🍒 プロを目指す人のためのRuby入門 <改訂2版>
#### 3.1 イントロダクション
##### 「プログラマの三大美徳」
プログラミングの世界には「プログラマの三大美徳」と呼ばれる3つの美徳がある。
- **怠惰：全体の労力を減らすために手間（つまりプログラムを書いたり、コードを改善したりすること）を惜しまない気質**
- **短気：コンピュータの動作が怠慢なとき（つまりプログラムの品質が悪いとき）に感じる怒り**
- **傲慢：自分の書いたプログラムは誰に見せても恥ずかしくないと胸張って言える自尊心**

#### 3.2 Minitest の基本
テストを自動化するためにはテスト用のフレームワーク（テスティングフレームワーク）を利用する。Ruby にはいくつかのテスティングフレームワークがある。なかでも、Minitest は、
- **Ruby をインストールすると一緒にインストールされるため、特別なセットアップが不要。**
- **学習コストが比較的低い。**
- **Rails のデフォルトのテスティングフレームワークなので、Rails を開発するときにも知識を活かしやすい。**

**Minitest のバージョン確認コマンド**
```shell
% ruby -r minitest -e "puts Minitest::VERSION"
5.25.4
```

**テストの自動化の手順**
- **①テスティングフレームワークのルールに沿って、プログラムの実行結果を検証する Rubyプログラム（テストコード）を書く。**
- **②①で作ったテストコードを実行する。**
- **③テスティングフレームワークが実行結果をチェックし、その結果が正しいか間違っているかを報告する。**

##### テストコードのひな形
Minitest を使ったテストコードの基本形
```ruby
01 require 'minitest/autorun'
02
03 class SampleTest < Minitest::Test
04   def test_sample
05     assert_equal 'RUBY', 'ruby'.upcase
06   end
07 end
```
- 1行目`require 'minitest/autorun'`は、ライブラリを読み込んでプログラム内で Minitest を使えるようにするためのコード。
- 3行目`class SampleTest < Minitest::Test`から7行目`end`までが、テストコードの本体（テストクラス）。
   - `SampleTest`はクラスの名前。慣習として`JapaneseCalendarTest`や`TestOrderItem`など、`Test`で終わる、または`Test`で始まる名前を付けることが多い。
   - また、テストコードが書かれたファイルのファイル名は`japanese_calendar_test.rb`や`test_order_item.rb`のように、**クラス名と合わせる**。クラスの名前は**キャメルケース**、ファイルの名前は**スネークケース**で書くこと。
   - `Minitest::Test`の部分は`SampleTest`クラスが`Minitest::Test`クラスを継承することを表している。
- 4行目`def test_sample`から6行目までが実行対象となるテストメソッド。
   - Minitest は、`test_`で始まるメソッドを探して、それを実行する。そのため、メソッド名を`test_`で始めることが必須になる。`test_`から後ろの部分は自由だが、`test_item_name`や`test_send_mail`など、**メソッド内でテストする内容が推測できるような名前を付ける**こと。
- 5行目`assert_equal 'RUBY', 'ruby'.upcase`が実行結果を確認するための検証メソッド。ここでは、Minitest が提供している`assert_equal`メソッドを使い、`'ruby'.upcase`の実行結果が`'Ruby'`になることを検証している。

**assert_equal**メソッドの使い方
```ruby
assert_equal 期待する結果, テスト対象となる値や式
```

##### 本書で使用する Minitest の検証メソッド
Minitest にはさまざまな検証メソッドが用意されているが、チェリー本で使用するのは次の3つだけ。
```ruby
# aがbと等しければパスする
assert_equal b, a

# aが真であればパスする
assert a

# aが偽であればパスする
refute a
```

##### テストコードの実行と結果の確認
テストコードの実行は、普通の Rubyファイルと実行方法は同じ。
```ruby
# テストコードの実行
% ruby sample_test.rb

# テストコードの結果
% ruby sample_test.rb 
Run options: --seed 60107

# Running:

.

Finished in 0.000626s, 1597.4441 runs/s, 1597.4441 assertions/s.

1 runs, 1 assertions, 0 failures, 0 errors, 0 skips
```
- `# Running`の下に表示されているドット（`.`）がテストの進捗状況。
- `Finished in 0.000626s, 1597.4441 runs/s, 1597.4441 assertions/s.`はテスト実行スピードを表示している。
   - `0.000626s`：テスト実行にかかった秒数
   - `1597.4441 runs/s`：1秒間に実行できるであろうテストメソッドの件数
   - `1597.4441 assertions/s.`：1秒間に実行できるであろう検証メソッドの件数
- 最後の行はテストの実行結果のまとめ。
   - `1 runs`：実行したテストメソッドの件数
   - `1 assertions`：実行した検証メソッドの件数
   - `0 failures`：検証に失敗したテストメソッドの件数
   - `0 errors`：検証中にエラーが発生したテストメソッドの件数
   - `0 skips`：skipメソッドにより実行をスキップさせたテストメソッドの件数

↑`failures`と`errors`の件数がどちらもゼロであれば、テストは全部パスしたことになる。

##### テストが失敗した場合の実行結果
テストが失敗した場合の実行結果
```ruby
# わざとcapitalizeメソッド（最初の1文字だけを大文字にするメソッド）を呼ぶ
require 'minitest/autorun'

class SampleTest < Minitest::Test
  def test_sample
    assert_equal 'RUBY', 'ruby'.capitalize
  end
end
```
```shell
% ruby sample_test.rb
Run options: --seed 40367

# Running:

F

Finished in 0.000617s, 1620.7457 runs/s, 1620.7457 assertions/s.

  1) Failure:
SampleTest#test_sample [sample_test.rb:5]:
Expected: "RUBY"
  Actual: "Ruby"

1 runs, 1 assertions, 1 failures, 0 errors, 0 skips
```
- ` 1) Failure:`：実行結果が失敗
- `SampleTest#test_sample [sample_test.rb:5]:`：SampleTestクラスのtest_sampleメソッド（sample_test.rbの5行目）で失敗した
- `Expected: "RUBY"`：期待した結果
- `Actual: "Ruby"`：実際の結果

テストが失敗するとそのテストメソッドはそれ以上実行されない。実行対象のテストメソッドが複数あった場合はテストメソッドの実行に移る。

##### 実行中にエラーが発生した場合の実行結果
検証メソッドで値を検証する前にエラーが起きて検証できなかった場合は、実行結果が異なる。
```ruby
# nilはもじれつではないので、upcaseメソッドを呼ぶことはできない
require 'minitest/autorun'

class SampleTest < Minitest::Test
  def test_sample
    assert_equal 'RUBY', nil.upcase
  end
end
```
```shell
% ruby sample_test.rb
Run options: --seed 50324

# Running:

E

Finished in 0.000823s, 1215.0667 runs/s, 0.0000 assertions/s.

  1) Error:
SampleTest#test_sample:
NoMethodError: undefined method `upcase' for nil
    sample_test.rb:5:in `test_sample'

1 runs, 0 assertions, 0 failures, 1 errors, 0 skips
```
- `1) Error:`：実行結果がエラー
- `SampleTest#test_sample:`：SampleTestクラスのtest_sampleメソッドでエラーが起きた
- NoMethodError: undefined method `upcase' for nil：nilにはupcaseメソッドは定義されていない、というエラーが起きた
- sample_test.rb:5:in `test_sample' ：sample_test.rbの5行目、test_sampleメソッド内でエラーが起きた


-------------


## ✍🏻 感想
### 🍒 少しでも机に向かう
就寝前に1時間ほどチェリー本を開きました。自分の時間が持てない日でも、プログラミングに切り替える時間を作っていきます。


------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 1 hours 53 min
- Total: 868 hours 38 min
