# 2025/01/15(水)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [x] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [x] 3.3 FizzBuzzプログラムのテスト自動化
   - [x] 3.4 この章のまとめ
- [ ] 第4章  配列や繰り返し処理を理解する
   - [x] 4.1 イントロダクション
   - [x] 4.2 配列
   - [x] 4.3 ブロック
   - [x] 4.4 ブロックを使う配列のメソッド
   - [ ] 4.5 範囲（Range）
   - [ ] 4.6 例題：RGB変換プログラムを作成する
   - [ ] 4.7 配列についてもっと詳しく
   - [ ] 4.8 ブロックについてもっと詳しく
   - [ ] 4.9 範囲（Range）についてもっと詳しく
   - [ ] 4.10 さまざまな繰り返し処理
   - [ ] 4.11 繰り返し処理用の制御構造
   - [ ] 4.12 この章のまとめ
- [ ] 第5章  ハッシュやシンボルを理解する
   - [ ] 5.1 イントロダクション
   - [ ] 5.2 ハッシュ
   - [ ] 5.3 シンボル
   - [ ] 5.4 続・ハッシュについて
   - [ ] 5.5 例題：長さの単位交換プログラムを作成する
   - [ ] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [ ] 5.7 シンボルについてもっと詳しく
   - [ ] 5.8 この章のまとめ
- [ ] 第6章  正規表現を理解する
   - [ ] 6.1 イントロダクション
   - [ ] 6.2 正規表現って何？
   - [ ] 6.3 Ruby における正規表現オブジェクト
   - [ ] 6.4 例題：Ruby のハッシュ記法を変換する
   - [ ] 6.5 正規表現オブジェクトについてもっと詳しく
   - [ ] 6.6 この章のまとめ
- [ ] 第7章  クラスの作成を理解する
   - [ ] 7.1 イントロダクション
   - [ ] 7.2 オブジェクト指向プログラミングの基礎知識
   - [ ] 7.3 クラスの定義
   - [ ] 7.4 例題：改札機プログラムの作成
   - [ ] 7.5 selfキーワード
   - [ ] 7.6 クラスの継承
   - [ ] 7.7 メソッドの可視性
   - [ ] 7.8 定数についてもっと詳しく
   - [ ] 7.9 さまざまな種類の変数
   - [ ] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [ ] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [ ] 8.1 イントロダクション
   - [ ] 8.2 モジュールの概要
   - [ ] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [ ] 8.4 例題：rainbowメソッドの作成
   - [ ] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [ ] 8.6 モジュールを利用した名前空間の作成
   - [ ] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第4章  配列や繰り返し処理を理解する
      - 4.3 ブロック 途中 〜 4.4 ブロックを使う配列のメソッド まで

## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第4章  配列や繰り返し処理を理解する
      - 4.5 範囲（Range） 〜


------------


## 💡 本日の学び・気付き
### 🍒 プロを目指す人のためのRuby入門 <改訂2版>
#### 4.3 ブロック
##### do ... end と {}
Ruby の文法上、改行を入れなくてもブロックは動作する。
```ruby
numbers = [1, 2, 3, 4]
sum = 0
# ブロックをあえて改行せずに書く
numbers.each do |n| sum += n end
sum #=> 10
```
`do ... end`を使う代わりに`{}`を囲んだ、もう一つのブロックの記法
```ruby
numbers = [1, 2, 3, 4]
sum = 0
# do ... endの代わりに{}を使う
numbers.each { |n| sum += n }
sum #=> 10
```
`do ... end`と`{}`はどちらも同じブロックなので、`{}`を使い、ブロックの内部を改行させることも可能。
```ruby
numbers = [1, 2, 3, 4]
sum = 0
# {}でブロックを作り、なおかつ改行を入れる
numbers.each { |n|
  sum += n
}
sum #=> 10
```
`do ... end`と`{}`の使い分けは明確に決まってはいないが......
- **改行を含む長いブロックを書く場合は、**`do ... end`
- **1行でコンパクトに書きたいときは、**`{}`

と使い分けられるケースが多い。Ruby のコードを読む場合はメソッドの後ろに出てくる`do ... end`や`{}`に注目し、ブロックがどのような用途で使われているのか調べてみると良い勉強になる。

#### 4.4 ブロックを使う配列のメソッド
ブロックを使う配列のメソッドのうち、使用頻度が高いメソッド。
- **map/collect**
- **select/find_all/reject**
- **find/detect**
- **sum**

##### map/collect
`each`メソッドの次に使用頻度が高いメソッドは`map`メソッド（エイリアスメソッドは`collect`）。`map`メソッドは各要素に対してブロックを評価した結果を新しい配列にして返す。
```ruby
# 配列の各要素を十倍した新しい配列を作るコード
numbers = [1, 2, 3, 4, 5]
new_numbers = []
new_numbers.each { |n| new_numbers << n * 10 }
new_numbers #=> [10, 20, 30, 40, 50]

# mapメソッドを使った配列の各要素を十倍した新しい配列を作るコード
numbers = [1, 2, 3, 4, 5]
# ブロックの戻り値が新しい配列の各要素になる
new_numbers = new_numbers.map { |n| n * 10 }
new_numbers #=> [10, 20, 30, 40, 50]
```
空の配列を用意して、**他の配列をループ処理した結果を空の配列に詰め込んでいくような処理の大半**は、`map`メソッドに置き換えることができるはず。

##### select/find_all/reject
`select`メソッド（エイリアスメソッドは`find_all`)は各要素に対してブロックを評価し、その戻り値が真の要素を集めた配列を返すメソッド。たとえば、偶数の数値だけを集めた配列を新たに作ることができる。
```ruby
numbers = [1, 2, 3, 4, 5, 6]
# ブロックの戻り値が真になった要素だけが集められる
even_numbers = numbers.select { |n| n.even? }
even_numbers #=> [2, 4, 6]
```
`reject`メソッドは`select`メソッドの反対で、ブロックの戻り値が真になった要素を除外した配列を返す（ブロックの戻り値が偽である要素を集めるメソッド）。
```ruby
numbers = [1, 2, 3, 4, 5, 6]
# 3の倍数を除外する（3の倍数以外を集める）
non_multiples_of_three = numbers.reject { |n| n % 3 == 0 }
non_multiples_of_three #=> [1, 2, 4, 5]
```

##### find/detect
`find`メソッド（エイリアスメソッドは`detect`）はブロックの戻り値が真になった最初の要素を返す。
```ruby
numbers = [1, 2, 3, 4, 5, 6]
# ブロックの戻り値が最初に真になった要素を返す
even_number = numbers.find{ |n| n.even? }
even_number #=> 2
```

##### sum
`sum`メソッドは要素の合計を求めるメソッド。
```ruby
numbers = [1, 2, 3, 4]
numbers.sum #=> 10
```
ブロックを与えると、ブロックパラメータに各要素が順番に渡され、ブロックの戻り値が合計される。
```ruby
numbers = [1, 2, 3, 4]
# 各要素を2倍しながら合計する
numbers.sum { |n| n * 2 } #=> 20
```
初期値は0だが、引数で0以外の初期値を指定することもできる。
```ruby
numbers = [1, 2, 3, 4]
# 初期値に5を指定する（5 + 1 + 2 + 3 + 4 = 15）
numbers.sum(5) #=> 15
```
初期値に文字列を指定すると、各要素の文字列が`+`で連結されて1つの文字列になる。
```ruby
chars = ['a', 'b', 'c']
# 文字列を連結する（'' + 'a' + 'b' + 'c' = 'abc'）
chars.sum('') #=> "abc"
```
配列の要素を連結して1つの文字列にするときは`join`メソッドを使うこともできる。
```ruby
chars = ['a', 'b', 'c']
chars.join #=> "abc"
```
第1引数に区切り文字を指定することもできる。
```ruby
chars = ['a', 'b', 'c']
# 区切り文字をハイフンにして各要素を連結する
chars.join('-') #=> "a-b-c"
```
連結するときは`to_s`メソッドで各要素を文字列に変換してから連結する。そのため数値など文字列以外の要素が含まれていても大丈夫。
```ruby
date = ['a', 2, 'b', 4]
# 配列に数値が含まれていても連結可能（to_sメソッドで文字列に変換されるため）
data.join #=> "a2b4"
```
単純な要素の連結であれば`sum`メソッドより`join`メソッドを使ったほうがシンプルで分かりやすい。ただし、`sum`メソッドを使うと、空文字列（`""`）以外の初期値（先頭の文字列）与えたり、ブロック内で文字列を加工することができる。
```ruby
chars = ['a', 'b', 'c']
# 先頭に'>'を付け、各要素を大文字にして連結する
chars.sum('>') { |c| c.upcase } #=> ">ABC"
```

##### & とシンボルを使ってもっと簡潔に書く
ブロックを使うメソッドは条件によってはかなり簡潔に書くことができる。
```ruby
# このコードは、
irb(main):011> ['ruby', 'java', 'python'].map { |s| s.upcase }
=> ["RUBY", "JAVA", "PYTHON"]
# こう書き換えられる
irb(main):012> ['ruby', 'java', 'python'].map(&:upcase)
=> ["RUBY", "JAVA", "PYTHON"]

# このコードは、
irb(main):013> [1, 2, 3, 4, 5, 6].select { |n| n.odd? }
=> [1, 3, 5]
# こう書き換えられる
irb(main):014> [1, 2, 3, 4, 5, 6].select(&:odd?)
=> [1, 3, 5]
```
上記のコードでは、`map`メソッドや`select`メソッドにブロックを渡す代わりに、`&:メソッド名`という引数を渡している。この書き方は以下の条件が揃ったときに使うことができる。
- **①ブロックパラメータが1個だけである。**
- **②ブロックの中で呼び出すメソッドには引数がない。**
- **③ブロックの中では、ブロックパラメータに対してメソッドを1回呼び出す以外の処理がない。**

逆に、以下のようなコードでは`&:メソッド名`の書き方に変換することはできない。
```ruby
# ブロックの中でメソッドではなく演算子を使っている
[1, 2, 3, 4, 5, 6].select { |n| n % 3 == 0 }

# ブロック内のメソッドで引数を渡している
[9, 10, 11, 12].map { |n| n.to_s(16) }

# ブロックの中で複数の文を実行している
[1, 2, 3, 4].map do |n|
  m = n * 4
  m.to_s
end
```
`&:upcase`や`&:odd?`のうち、`:upcase`や`:odd?`の部分は**シンボル**と呼ばれる**オブジェクト**になっている。


-------------


## ✍🏻 感想
### 🍒 配列についてもっと分かりたい
- ブロックの書き方
- ブロックを使う配列のメソッド
- & とシンボルで書く条件

を中心に学びました。押さえておくべきことが一気に出てきて、理解するのに時間が掛かりました。特に難しく感じたのが、`map`メソッドや`select`メソッドにブロックを渡す代わりに`&:メソッド名`という引数を渡す書き方です。書き方に必要な条件も幾つかあり、何度も読み書きして慣れるしかないと感じました。


------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 2 hours 15 min
- Total: 876 hours 50 min
