# 2025/01/20(月)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [x] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [x] 3.3 FizzBuzzプログラムのテスト自動化
   - [x] 3.4 この章のまとめ
- [ ] 第4章  配列や繰り返し処理を理解する
   - [x] 4.1 イントロダクション
   - [x] 4.2 配列
   - [x] 4.3 ブロック
   - [x] 4.4 ブロックを使う配列のメソッド
   - [x] 4.5 範囲（Range）
   - [x] 4.6 例題：RGB変換プログラムを作成する
   - [x] 4.7 配列についてもっと詳しく
   - [ ] 4.8 ブロックについてもっと詳しく
   - [ ] 4.9 範囲（Range）についてもっと詳しく
   - [ ] 4.10 さまざまな繰り返し処理
   - [ ] 4.11 繰り返し処理用の制御構造
   - [ ] 4.12 この章のまとめ
- [ ] 第5章  ハッシュやシンボルを理解する
   - [ ] 5.1 イントロダクション
   - [ ] 5.2 ハッシュ
   - [ ] 5.3 シンボル
   - [ ] 5.4 続・ハッシュについて
   - [ ] 5.5 例題：長さの単位交換プログラムを作成する
   - [ ] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [ ] 5.7 シンボルについてもっと詳しく
   - [ ] 5.8 この章のまとめ
- [ ] 第6章  正規表現を理解する
   - [ ] 6.1 イントロダクション
   - [ ] 6.2 正規表現って何？
   - [ ] 6.3 Ruby における正規表現オブジェクト
   - [ ] 6.4 例題：Ruby のハッシュ記法を変換する
   - [ ] 6.5 正規表現オブジェクトについてもっと詳しく
   - [ ] 6.6 この章のまとめ
- [ ] 第7章  クラスの作成を理解する
   - [ ] 7.1 イントロダクション
   - [ ] 7.2 オブジェクト指向プログラミングの基礎知識
   - [ ] 7.3 クラスの定義
   - [ ] 7.4 例題：改札機プログラムの作成
   - [ ] 7.5 selfキーワード
   - [ ] 7.6 クラスの継承
   - [ ] 7.7 メソッドの可視性
   - [ ] 7.8 定数についてもっと詳しく
   - [ ] 7.9 さまざまな種類の変数
   - [ ] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [ ] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [ ] 8.1 イントロダクション
   - [ ] 8.2 モジュールの概要
   - [ ] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [ ] 8.4 例題：rainbowメソッドの作成
   - [ ] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [ ] 8.6 モジュールを利用した名前空間の作成
   - [ ] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第4章  配列や繰り返し処理を理解する
      - 4.8 ブロックについてもっと詳しく
         - 番号指定パラメータ 〜 繰り返し処理以外でも使用されるブロック まで

## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第4章  配列や繰り返し処理を理解する
      - 4.8 ブロックについてもっと詳しく
        - do...end と {} の結合度の違い


------------


## 💡 本日の学び・気付き
### 🍒 プロを目指す人のためのRuby入門 <改訂2版>
#### 4.8 ブロックについてもっと詳しく
##### 番号指定パラメータ
番号指定パラメータ（numbered parameter）を使うと、明示的にブロックパラメータを指定する代わりに、パラメータの順番に応じて`_1`から`_9`までの番号を使うことができる。
```ruby
# 番号指定パラメータを使わない場合（ブロックパラメータが1つ）
['1', '20', '300'].map { |s| s.rjust(3, '0') }
#=> ["001", "020", "300"]

# 番号指定パラメータを使う場合
['1', '20', '300'].map { _1.rjust(3, '0') }
#=> ["001", "020", "300"]

# 番号指定パラメータを使わない場合（ブロックパラメータが2つ）
['Japan', 'us', 'italy'].map.with_index { |country, n| [n, country] }
#=> [[0, "Japan"], [1, "us"], [2, "italy"]]

# 番号指定パラメータを使う場合
['japan', 'us', 'italy'].map.with_index { [_2, _1] }
#=> [[0, "japan"], [1, "us"], [2, "italy"]]
```
ブロックパラメータに配列が渡される場合は番号指定パラメータの使い方によって代入される値が変わってくるので注意が必要。以下のコードは`_1`に入れ子になった配列が代入される。
```ruby
dimenstions = [
  [10, 20],
  [30, 40],
  [50, 60],
]
# dimenstions.each { |dimenstion| p dimenstion }と書いたのと同じ
irb(main):222> dimenstions.each { p _1 }
[10, 20]
[30, 40]
[50, 60]
```
`_2`も一緒に使うと、`_1`には入れ子になった配列の最初の要素が代入される。
```ruby
# dimenstions.each { |length, width| puts "#{length} / #{width}" }と書いたのと同じ
irb(main):223> dimenstions.each { puts "#{_1} / #{_2}" }
10 / 20
30 / 40
50 / 60
```
ブロックが入れ子になっている場合、番号指定パラメータが2つ以上のブロックで使われているとエラーになる。
```ruby
sum = 0
[[1, 2, 3], [4, 5, 6]].each do
  # 外側のブロックで番号指定パラメータを使う
  _1.each do
    # 内側のブロックでも番号指定パラメータを使おうとするとエラーになる
    sum += _1
  end
end
#=> numbered parameter is already used in (SyntaxError)
```
入れ子になっている場合でも、番号指定パラメータが使われているブロックが1つだけであればエラーにならない。
```ruby
irb(main):230> sum = 0
=> 0
irb(main):231* [[1, 2, 3], [4, 5, 6]].each do |values|
irb(main):232*   values.each do
# 内側のブロックでしか番号指定パラメータを使ってないのでOK
irb(main):233*     sum += _1
irb(main):234*   end
irb(main):235> end
=> [[1, 2, 3], [4, 5, 6]]
irb(main):236> sum
=> 21
```
従来のブロックパラメータと番号してパラメータを混在させた場合も構文エラーが発生する。
```ruby
# 従来のブロックパラメータ|s|と、番号指定パラメータ_1が混在すると構文エラー
['1', '20', '300'].map { |s| _1.rjust(3, '0') }
#=> ordinary parameter is defined (SyntaxError)
```

##### ブロックローカル変数
ブロックパラメータを`;`で区切り、続けて変数を宣言すると、ブロック内でのみ有効な独立したローカル変数を宣言することができる（ブロックローカル変数）。
```ruby
irb(main):256> numbers = [1, 2, 3, 4]
=> [1, 2, 3, 4]
irb(main):257> sum = 0
=> 0
# ブロックの外にあるsumとは別物の変数sumを用意する
irb(main):258* numbers.each do |n; sum|
# 別物のsumを10で初期化し、ブロックパラメータの値を加算する
irb(main):259*   sum = 10
irb(main):260*   sum += n
# 加算した値をターミナルに表示する
irb(main):261*   puts sum
irb(main):262> end
11
12
13
14
=> [1, 2, 3, 4]
irb(main):263> sum
=> 0
```

##### 繰り返し処理以外でも使用されるブロック
ブロックは、配列やハッシュの繰り返し処理で利用されることが多いが、それ以外の場面でもよく利用される。
```ruby
# sample.txtを開いて文字列を書き込む（クローズ処理は自動的に行われる）
File.open('./sample.txt', 'w') do |file|
  file.puts('1行目のテキストです。')
  file.puts('2行目のテキストです。')
  file.puts('3行目のテキストです。')
end
```
ファイルのような外部リソースを扱う際は「オープンしたら必ずクローズする」という処理が必要になる。Ruby の`File.open`メソッドとブロックを組み合わせると、オープンするだけでなく、「必ずクローズする」という処理まで`File.open`メソッドが面倒見てくれる。


-------------


## ✍🏻 感想
### 🍒 理解が難しくなってきた
この辺りから、コードがどのようにして出力されているのかが分からなくなってきました。


------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 1 hours 27 min
- Total: 892 hours 24 min
