# 2025/01/09(木)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [ ] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [ ] 2.10 真偽値と条件分岐についてもっと詳しく
   - [ ] 2.11 メソッド定義についてもっと詳しく
   - [ ] 2.12 そのほかの基礎知識
   - [ ] 2.13 この章のまとめ
- [ ] 第3章  テストを自動化する
   - [ ] 3.1 イントロダクション
   - [ ] 3.2 Minitest の基本
   - [ ] 3.3 FizzBuzzプログラムのテスト自動化
   - [ ] 3.4 この章のまとめ
- [ ] 第4章  配列や繰り返し処理を理解する
   - [ ] 4.1 イントロダクション
   - [ ] 4.2 配列
   - [ ] 4.3 ブロック
   - [ ] 4.4 ブロックを使う配列のメソッド
   - [ ] 4.5 範囲（Range）
   - [ ] 4.6 例題：RGB変換プログラムを作成する
   - [ ] 4.7 配列についてもっと詳しく
   - [ ] 4.8 ブロックについてもっと詳しく
   - [ ] 4.9 範囲（Range）についてもっと詳しく
   - [ ] 4.10 さまざまな繰り返し処理
   - [ ] 4.11 繰り返し処理用の制御構造
   - [ ] 4.12 この章のまとめ
- [ ] 第5章  ハッシュやシンボルを理解する
   - [ ] 5.1 イントロダクション
   - [ ] 5.2 ハッシュ
   - [ ] 5.3 シンボル
   - [ ] 5.4 続・ハッシュについて
   - [ ] 5.5 例題：長さの単位交換プログラムを作成する
   - [ ] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [ ] 5.7 シンボルについてもっと詳しく
   - [ ] 5.8 この章のまとめ
- [ ] 第6章  正規表現を理解する
   - [ ] 6.1 イントロダクション
   - [ ] 6.2 正規表現って何？
   - [ ] 6.3 Ruby における正規表現オブジェクト
   - [ ] 6.4 例題：Ruby のハッシュ記法を変換する
   - [ ] 6.5 正規表現オブジェクトについてもっと詳しく
   - [ ] 6.6 この章のまとめ
- [ ] 第7章  クラスの作成を理解する
   - [ ] 7.1 イントロダクション
   - [ ] 7.2 オブジェクト指向プログラミングの基礎知識
   - [ ] 7.3 クラスの定義
   - [ ] 7.4 例題：改札機プログラムの作成
   - [ ] 7.5 selfキーワード
   - [ ] 7.6 クラスの継承
   - [ ] 7.7 メソッドの可視性
   - [ ] 7.8 定数についてもっと詳しく
   - [ ] 7.9 さまざまな種類の変数
   - [ ] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [ ] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [ ] 8.1 イントロダクション
   - [ ] 8.2 モジュールの概要
   - [ ] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [ ] 8.4 例題：rainbowメソッドの作成
   - [ ] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [ ] 8.6 モジュールを利用した名前空間の作成
   - [ ] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第2章  Ruby の基礎を理解する
      - 2.8 文字列についてもっと詳しく 〜  2.10 真偽値と条件分岐についてもっと詳しく （途中まで）

## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
   - 第2章  Ruby の基礎を理解する
      - 2.10 真偽値と条件分岐についてもっと詳しく （途中から）


------------


## 💡 本日の学び・気付き
### 🍒 プロを目指す人のためのRuby入門 <改訂2版>
#### 2.8 文字列についてもっと詳しく
##### ヒアドキュメント（行指向文字列リテラル）
文字列は途中で改行することができる。
```ruby
puts "Line 1,
Line 2"
#=> Line 1,
#   Line 2

puts 'Line 1,
Line 2'
#=> Line 1,
#   Line 2
```
しかし、複数行にわたる長い文字列を作成する場合はヒアドキュメント（行指向文字列リテラル）を使ったほうがスッキリ描ける。
```ruby
<<識別子
1行目
2行目
3行目
識別子

# 例
irb(main):009" a = <<TEXT
irb(main):010" これはヒアドキュメントです。
irb(main):011" 複数行にわたる長い文字列を作成するのに便利です。

irb(main):012> TEXT
irb(main):013> puts a
これはヒアドキュメントです。
複数行にわたる長い文字列を作成するのに便利です。
```
↑例では識別子に TEXT を使ったが、識別子は自由に付けられる。この識別子は監修として、TEXT や HTML のように、**全て大文字にする**ことが多い。

`<<-TEXT`のように`-`を入れると、最後の識別子をインデントさせることができる。メソッドの内部でヒアドキュメントを使う場合など、識別子をインデントさせたい場合に便利。
```ruby
def some_method
  <<-TEXT
これはヒアドキュメントです。
<<-を使うと最後の識別子をインデントさせることができます。
  TEXT
end

puts some_method
#=> これはヒアドキュメントです。
#   <<-を使うと最後の識別子をインデントさせることができます。
```
さらに、`<<~TEXT`のように`~`を使うこともできる。`~`を使うと内部の文字列をインデントさせても先頭の空白部分が無視される。
```ruby
def some_method
  <<-TEXT
    これはヒアドキュメントです。
    <<-を使うと最後の識別子をインデントさせることができます。
  TEXT
end

puts some_method
#=> これはヒアドキュメントです。
#   <<~を使うと最後の識別子をインデントさせることができます。
```

##### フォーマットを指定して文字列を作成する
**sprintfメソッド**を使うと、指定されたフォーマットの文字列を作成することができる。
```ruby
# 以下は少数第3位まで数字を表示する文字列を作成するコード例
irb(main):032> sprintf('%0.3f', 1.2)
=> "1.200"
```
変わった書き方だと**フォーマット文字列** % **表示したいオブジェクト**の形式で書いても同じ結果が得られる。
```ruby
irb(main):033> '%0.3f' % 1.2
=> "1.200"
```
表示したいオブジェクトを複数渡すこともできる。
```ruby
irb(main):038> sprintf('%0.3f + %0.3f', 1.2, 0.48)
=> "1.200 + 0.480"
irb(main):039> '%0.3f + %0.3f' % [1.2, 0.48]
=> "1.200 + 0.480"
```

##### その他、文字列作成のいろいろ
他のオブジェクトから文字列を作ることもできる。
```ruby
# 数値を文字列に変換する
irb(main):040> 123.to_s
=> "123"

# 配列の各要素を連結して1つの文字列にする
irb(main):041> [10, 20, 30].join
=> "102030"

# *演算子を使って文字列を繰り返す
irb(main):042> 'Hi!' * 10
=> "Hi!Hi!Hi!Hi!Hi!Hi!Hi!Hi!Hi!Hi!"

# String.newを使って新しい文字列を作る（あまり使わない）
irb(main):043> String.new('hello')
=> "hello"
```

文字列リテラルの間に空白を挟むと1つの文字列リテラルと見なされる。が、このような書き方を見かけることはめったにない。
```ruby
# 以下は'abcdef'と書いたのと同じ（めったに使わない）
irb(main):044> 'abc' 'def'
=> "abcdef"

# スペースがなくても可能（めったに使わない）
irb(main):045> 'abc''def'
=> "abcdef"
```
ダブルクオートと`\u`を組み合わせて Unicode のコードポイントから文字列を作成することも可能。
```ruby
irb(main):046> "\u3042\u3044\u3046"
=> "あいう"
```
コードポイントが4桁でない場合は0埋めして4桁にするか、`\u{}`の形式を使う。
```ruby
# NG: 4桁でないのでエラー
irb(main):048> puts "\u41"
/Users/yoshiwo/.rbenv/versions/3.3.1/lib/ruby/3.3.0/irb/workspace.rb:117:in `eval': (irb):48: invalid Unicode escape (SyntaxError)

# OK: 0埋めして4桁にする
irb(main):049> puts "\u0041"
A

# OK: もしくは\u{ }の形式を使う
irb(main):050> puts "\u{41}"
A
```

##### 文字と文字列の違いはない
Ruby では、1文字だけの「文字」も、複数文字の「文字列」も、いずれも「文字列（Stringオブジェクト）」として扱われる。
```ruby
# 1文字でも文字列
irb(main):051> 'a'
=> "a"

# 2文字以上でも文字列
irb(main):052> 'abc'
=> "abc"

# 0文字でも文字列
irb(main):053> ''
=> ""
```
`?`を使って1文字だけの文字列を作ることもできる。
```ruby
irb(main):058> ?a
=> "a"
```

#### 2.9 数値についてもっと詳しく
##### 基数指示子を用いた整数リテラル
2進数の場合は`0b`、8進数の場合は`0`または`0o`、16進数の場合は`0x`という基数指示子を先頭に付けると、それぞれ10進法以外の記数法で整数値を書くことができる。
```ruby
# 2進数
irb(main):054> 0b11111111
=> 255

# 8進数
irb(main):055> 0377
=> 255
irb(main):056> 0o377
=> 255

# 16進数
irb(main):057> 0xff
=> 255
```
`0d`を付けることで10進数を表すこともできる。
```ruby
# 10進数（0dを付けなくても同じなので、普通は付けない）
irb(main):059> 0d255
=> 255
```

##### ビット演算
整数値は次の演算子を使ってビット演算（整数値の2進表現に対応したビット列に関する演算）ができる。
- &：ビットごとの論理積（AND）
- |：ビットごとの論理和（OR）
- ^：ビットごとの排他的論理和（XOR）
- \>>：右ビットシフト
- <<：左ビットシフト
- ~：ビットごとの論理反転（NOT）

##### 指数表現
Ruby では指数表現を使って浮動小数点数を表すこともできる。次の`2e-3`は「2 × 10¯³」で0.002の意味になる。
```ruby
irb(main):060> 2e-3
=> 0.002
```

##### 数値クラスのあれこれ
数値関連のクラスにはいくつか種類がある。整数であればIntegerクラス、少数であればFloatクラスになる。
```ruby
irb(main):065> 10.class
=> Integer
irb(main):066> 1.5.class
=> Float
```

#### 2.10 真偽値と条件分岐についてもっと詳しく
##### && や || の戻り値と評価を終了するタイミング
Ruby は式全体が真または魏であることが決定するまで左から順に指揮を評価する。式全体の真または偽が確定すると、式の評価を終了し、最後に評価した式の値を返す。
たとえば、`1 && 2 && 3`であれば、全ての式を評価する必要があるため、最後の式である 3 が戻り値になる。一方、`1 && nil && 3`は2つ目の`nil`を評価した時点で指揮全体の真偽値が魏であることが確定するため、そこで評価を終了し、`nil`を返す。
`||`の場合も考え方は同じ。`nil || false || 2 ||`の戻り値が 2 になるのは、2を評価した時点で式全体の真偽値が真であることが確定したから。式全体の真偽値が確定した時点で評価を終了する評価法のことを**短絡評価(ショートサーキット)と言う。**

↓`||`を使った式の戻り値や、真偽値が確定した時点で評価が終了されることを活用した架空のコード例
```ruby
# Alice, Bob, Carolと順に検索し、最初に見つかったユーザ（nilまたはfalse以外の値）を変数に格納する
user = find_user('Alice') || find_user('Bob') || find_user('Carol')

# 正常なユーザであればメールを送信する（左辺が偽であればメール送信は実行されない）
user.valid? && send_email_to(user)
```


-------------



## ✍🏻 感想
### 🍒 奥深さを知る
まだ第2章なのですが、「Rubyってこんなこともできるんだ！」とハッとすることがたくさんあります。次回も基礎の奥深さを学んでいきます。Ruby を学ぶ人は絶対にチェリー本が必須ですね！

### 🤦🏻 年末年始の疲れが......
年末年始の疲れが今頃になってどっとやってきた感じです。そのせいか2、3日前から体調が思わしくなく、学習時間も短いです。今年は一日の中で自分のために使える時間を増やしたいと考えています。ちゃんとセルフコントロールしていかなければ！

------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 2 hours 30 min
- Total: 860 hours 17 min
