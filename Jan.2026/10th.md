# 2026/01/10(土)
## 📚 プラクティス『🛠️💻 lsコマンドを作る3』

<details><summary>🎯 学習の狙い</summary>

- 標準出力について学ぶ
- 標準ライブラリの使い方を学ぶ
- Enumeratorには、each以外にも便利なメソッドがあることを学ぶ
- RailsじゃないRubyプログラミングを学ぶ
- メソッド分割を学ぶ
- わかりやすい変数名・メソッド名を学ぶ
- 大きな問題を分割する力を学ぶ
</details>

<details><summary>📌 要件 ※ 随時、追加・変更あり</summary>

- [x] `-r`オプションが指定された場合は、取得したファイル一覧を通常の並び順ではなく、配列を`reverse`（逆順に）した結果を表示すること。
- [x] `-r`オプションが指定されていない場合は、これまで通りの順序で表示すること。
- [x] `gem`は使わずに Ruby の標準ライブラリだけで作ること
- [x] `rubocop-fjord`でデバッグを実行し、全てパスさせること
- [x] 完成したコードは GitHub の Pull Request として提出すること

</details>

<details><summary>📍 処理の流れ ※ 随時、追加・変更あり</summary>

1. コマンドライン引数から`-r`オプションの有無を判定する

2. 対象のディレクトリのファイル一覧を配列として取得する

3. `-r`オプションが指定されている場合は、その配列を`reverse`させる

4. 最終的な配列を標準出力として表示する
</details>

<details><summary> 🧩 タスクばらし ※ 随時、追加・変更あり</summary>

- [x] タスク1：コマンドライン引数を解析し、`-r`オプションの有無を取得する。
- [x] タスク2：対象のディレクトリのファイル一覧を配列として取得する
- [x] タスク3：`-r`オプションが指定されている場合、取得した配列に`reverse`メソッドを適用する
- [x] タスク4：最終的な配列を標準出力として表示する
- [x] タスク5：`-r`オプションが指定されていない場合でも、lsコマンドと同じ挙動になることを確認する
- [x] タスク6：rubocop-fjord に通す
- [x] タスク7：提出
  - [x] 作成した lsコマンドを Pull Request として提出
  - [x] 提出物に、lsコマンドの実行結果と、OS標準（macなど自分の使ってるOS）のlsコマンドの実行結果のスクリーンショットを併記して貼る
  - [x] rubocop-fjord のチェックが全てパスした画面をスクショして添付
</details>


---


## 🧑🏻‍💻 本日の取り組み
### 📚 プラクティス『🛠️💻 lsコマンドを作る3』 
- 要件・処理の流れ・タスクばらしを作成する
- `-r`オプションを実装する
- メンターさんに課題を提出する


---


## ⏭️ 次回
### 📚 プラクティス『lsコマンドを作る4』
- プラクティスの内容を確認する
- できれば、要件・処理の流れ・タスクばらしを作成する


---


### 💡 本日の学び・気付き
#### プラクティス『🛠️💻 lsコマンドを作る3』課題を提出
<details><summary>⚠️ ネタバレに注意 </summary>

### -rオプションを実装する
- `-r`オプション実装前のコード
```ruby
# frozen_string_literal: true

# !/usr/bin/env ruby
require 'optparse'

show_hidden = false

opt = OptionParser.new
opt.on('-a') do
  show_hidden = true
end

opt.parse!(ARGV)

flags = show_hidden ? File::FNM_DOTMATCH : 0
files = Dir.glob('*', flags)

files = files.sort

# 以下省略
```
- `-r`オプション実装後のコード
```ruby
# frozen_string_literal: true

# !/usr/bin/env ruby
require 'optparse'

show_hidden = false
reverse = false

opt = OptionParser.new
opt.on('-a') { show_hidden = true }
opt.on('-r') { reverse = true }

opt.parse!(ARGV)

flags = show_hidden ? File::FNM_DOTMATCH : 0
files = Dir.glob('*', flags)

files = files.sort
files = files.reverse if reverse

# 以下省略
```
#### -rオプションを実装するための取り組み
- 今回のプラクティスでも同様に**要件・オプションの処理の流れ・タスクばらし**を作成し、これらを元に`-r`オプションを実装。
- `-a`オプションと同じ要領で`-r`オプションを追加できるのでは？と考えた。
- `-r`オプションは、ファイルを**逆順**で表示するコマンドライン引数。
- 逆順で表示するためには、`Dir.glob('*')`で取得したファイル一覧の配列を`reverse`メソッドを用いて**逆順の配列**を生成すればよいのでは？と考えた。
- コードを書く上で、ブロックの記法である`do ... end`を`{}`に書き換えた。
- 「`-r`オプションが指定されていたら、配列を逆順にするだけ」という単純な条件分岐なので、通常の`if`文ではなく、後ろに`if`が付く書き方`if`修飾子で書いた。
</details>


---


## ✍🏻 感想
### 🙌🏻 『lsコマンドを作る3』提出！
要件・処理の流れ・タスクばらしをしっかり作成し、`-a`オプションを実装した経験のおかげで、今回は`-r`オプションも実装することができました。

メンターさんからOKをもらうまでは安心できませんが、今回の実装は「スッ」とイメージングができたので自分でも驚きました（いつもプラクティスではうんうん唸りながら時間をかけて取り組んでいるので）。

レビューが届くまで、次のプラクティスを予習します。


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 hours 27 min
- Total: 1466 hours 59 min
