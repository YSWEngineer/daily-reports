# 2026/01/15(木)
## 📚 プラクティス『🛠️💻 lsコマンドを作る4』

<details><summary>🎯 学習の狙い</summary>

- 標準出力について学ぶ
- 標準ライブラリの使い方を学ぶ
- Enumeratorには、each以外にも便利なメソッドがあることを学ぶ
- RailsじゃないRubyプログラミングを学ぶ
- メソッド分割を学ぶ
- わかりやすい変数名・メソッド名を学ぶ
- 大きな問題を分割する力を学ぶ
</details>

<details><summary>📌 要件 ※ 随時、追加・変更あり</summary>

- [ ] `-l`オプションが指定された場合は、各ファイルについて「詳細情報（long format）」を一行ずつ表示すること
- [ ] `-l`オプションが指定されていない場合は、これまで通りファイル名のみを表示すること
- [ ] 表示する詳細情報は、以下の内容を含ませること
  - ファイルタイプ
  - ファイルモード
  - リンク数
  - 所有者
  - 所有グループ
  - サイズ
  - タイムスタンプ（更新日時）
  - ファイル名もしくはディレクトリ名
- [ ] `gem`は使わずに Ruby の標準ライブラリだけで作ること
- [ ] `rubocop-fjord`でデバッグを実行し、全てパスさせること
- [ ] 完成したコードは GitHub の Pull Request として提出すること

</details>

<details><summary>📍 処理の流れ ※ 随時、追加・変更あり</summary>

1. コマンドライン引数から`-l`オプションの有無を判定する

2. 対象のディレクトリのファイル一覧を配列として取得する

3. `-l`オプションが指定されていない場合 → これまで通り、ファイル名の配列をそのまま表示する

4. `-l`オプションが指定されている場合 → ①配列の各要素（各ファイル）について詳細情報を取得する / ②取得した複数の属性を一行の文字列に整形する

5. 整形済みの各行を上から順に標準出力へ表示させる
</details>

<details><summary> 🧩 タスクばらし ※ 随時、追加・変更あり</summary>

- [ ] タスク1：コマンドライン引数を解析し、`-l`オプションの有無を取得する
- [ ] タスク2：対象のディレクトリのファイル一覧を配列として取得する
- [ ] タスク3：「一つのファイルについて、どんな情報が取れるのか」を調べる
- [ ] タスク4：取得した「詳細情報（各属性）」を表示する
  - [ ] 先ずはバラバラに値を取り出せるようにする
- [ ] タスク5：複数の属性を整形して表示する
  - [ ] 横に並べて一行にする
- [ ] タスク6：タスク3〜5で行った処理を全てのファイルに対して適用する
  - [ ] 先ずは1ファイルで成功させる
  - [ ] 次に`each`で各ファイルに処理を適用させる
- [ ] タスク7：`-l`オプションが指定されていないときに、`ls`コマンドと同じ挙動になることを確認する
- [ ] タスク8：rubocop-fjord に通す
- [ ] タスク9：提出
  - [ ] 作成した lsコマンドを Pull Request として提出
  - [ ] 提出物に、`ls -l`コマンドの実行結果と、OS標準（macなど自分の使ってるOS）の`ls -l`コマンドの実行結果のスクリーンショットを併記して貼る
  - [ ] rubocop-fjord のチェックが全てパスした画面をスクショして添付
</details>


---


## 🧑🏻‍💻 本日の取り組み
### 📚 プラクティス『🛠️💻 lsコマンドを作る4』 
- `-l`オプションについての理解
- 専門用語の理解
- 要件・処理の流れ・タスクばらしの作成


---


## ⏭️ 次回
### 📚 プラクティス『lsコマンドを作る4』
- `-l`オプションの実装


---


### 💡 本日の学び・気付き
#### -lオプションとは
`ls -l`はファイル名だけでなく、
- ファイルタイプ
- ファイルモード
- リンク数
- 所有者
- 所有グループ
- サイズ
- タイムスタンプ（更新日時）
- ファイル名もしくはディレクトリ名

を一行ずつ表示するオプション。
つまり、ファイルの中身ではなく、ファイルの**性質や状態に関する情報**（**メタ情報**）を表示する。

#### メタ情報、属性とは
- `メタ情報`：ファイルそのものではなく、「ファイルについての情報」（例：サイズ、タイムスタンプ、ファイルモード、所有者など）。
- `属性`：メタ情報の中の一つ一つの項目のこと（例：「サイズ」という属性、「タイムスタンプ」という属性、「ファイルモード」という属性）。

`ls -l`コマンドは「**各ファイルが持つ複数の属性を横に並べて表示するコマンド**」。

#### -lオプションの処理のイメージ
1. 先ずディレクトリ内のファイル一覧を配列で取得する
2. 一つずつファイルを取り出す
3. そのファイルについて
  - ファイルタイプは？
  - ファイルモードは？
  - タイムスタンプは？

などの**属性**を調べる

4. それらを`ls -l`の表示順に並べて一行の文字列にする
5. それを全ファイル分繰り返して表示する

#### 属性メソッドとは
`File::Stat`オブジェクトは、
- ファイルモード
- リンク数
- 所有者
- 所有グループ
- サイズ
- タイムスタンプ（更新日時）

などの**属性**（ファイルの性質）を内部に持っている。
それらを取り出すためのメソッドが、
- `mode`
- `nlink`
- `uid`
- `gid`
- `size`
- `mtime`

などで、これらは「オブジェクトが持っている属性の値を返すメソッド」なので、まとめて**属性メソッド**と呼ぶ。
```ruby
stat = File.stat("sample.txt")
stat.size #=> ファイルサイズという属性
stat.mtime #=> タイムスタンプ（更新日時）という属性
```

#### File::Statオブジェクトとは
一言で言うと、「ある一つのファイルについての属性（詳細情報）を全部まとめて持っている箱」。

Ruby では、
- クラス：設計図
- オブジェクト：その設計図から作られた実体

`File::Stat`はクラス（設計図）で、
```ruby
stat = File.stat("sample.txt")
```
と書くと、
- `"sample.txt"`という**一つのファイル専用**の、`File::Stat`クラスの**オブジェクト**が作られる。

これが`File::Stat`オブジェクト。

そして、そのオブジェクトの中身は上述した
- ファイルタイプ
- ファイルモード
- リンク数
- 所有者
- 所有グループ
- サイズ
- タイムスタンプ（更新日時）

などの**属性**が入っている。

#### 今の理解レベルでのタスクばらし
- タスク1：`-l`オプションが指定されたかどうかを判定する
- タスク2：対象のディレクトリのファイル一覧を配列で取得する
- タスク3：一つのファイルについて、どんな情報（ファイルタイプ・ファイルモード・所有者など）が Ruby で取得できるのか調べる
- タスク4：取得した情報を、そのままの数値ではなく、`ls -l`コマンドの表示に近い文字列の形に変換する
- タスク5：それらの情報を、`ls -l`コマンドと同じ順番で並べて「**一行分の表示**」を作る
- タスク6：上記の処理を`Dir.glob`メソッドで取得した全てのファイルに対して繰り返し行う


---


## ✍🏻 感想
### 🤔 -lオプションを理解する
`-l`オプションは、`-a`オプションと比べて、単にファイル一覧を表示するだけでなく、各ファイルが持つ属性を一つずつ調べ、それを整形して表示する必要があるため、難易度が一気に上がったと感じました。

特に、`File::Stat`オブジェクトという「一つのファイルの属性をまとめて持っている箱」の存在を理解することが、`-l`オプションの処理全体をイメージする上で重要だと分かりました。

また、`-l`オプションの要件を踏まえた上で、**要件 → 処理の流れ → タスクばらし**、という順で考えることで、「何をすればよいのか」を整理して捉えられるようになりました。

まだ理解が浅い部分が多々ありますが、一つずつ属性を理解し、少しずつ組み立てていけば、必ず形にできるはずだと感じています。
焦らず、これまで通り地道に積み上げていきます。


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 hours 33 min
- Total: 1472 hours 09 min
