# 2026/01/07(水)
## 📚 プラクティス『🛠️💻 lsコマンドを作る2』

<details><summary>🎯 学習の狙い</summary>

- 標準出力について学ぶ
- 標準ライブラリの使い方を学ぶ
- Enumeratorには、each以外にも便利なメソッドがあることを学ぶ
- RailsじゃないRubyプログラミングを学ぶ
- メソッド分割を学ぶ
- わかりやすい変数名・メソッド名を学ぶ
- 大きな問題を分割する力を学ぶ
</details>

<details><summary>📌 要件（Docs：lsコマンドを作る 参照）</summary>

- [x] `-a`オプションを付けたとき、`.`で始まる隠しファイルも表示対象にする
- [x] ⚠️ 注意事項：`..`は表示されなくてもよい
- [x] そのまま実行すると、今いるフォルダ（カレントディレクトリ）の中身を表示する
- [x] `gem`は使わずに Ruby の標準ライブラリだけで作ること
- [x] 完成したコードは GitHub の Pull Request として提出すること
- [x] `rubocop-fjord`でデバッグを実行し、全てパスさせること
- [x] 表示は横に最大3列になるようにレイアウトすること
  - 3, 6, 9, 12のように3の倍数の件数だけでなく、最後の列に空欄ができるケースの結果も載せる
  - 「3列から5列に仕様変更してください」または「3列から100列に変えてください」とあとから言われても必要最小限の変更で対応できるようなロジックにしておくこと
</details>

<details><summary>📍 処理の流れ ※ 随時、追加・変更あり</summary>

**1. オプションの有無を判定**

**2. ファイル一覧取得**

**3. 出力するファイルを選別（隠しファイルを含む or 含まない）**

**4. 表示するための整形**

**5. 1 〜 4 を踏まえた上での出力**
</details>

<details><summary> 🧩 タスクばらし ※ 随時、追加・変更あり</summary>

- [x] タスク1：前提の整理
  - [x] `ls`コマンド、`-a`オプションについて確認

- [x] タスク2：`-a`オプションを受け取れる状態にする
  - [x] `OptionParser`を使用して引数を確認する
  - [x] `-a`オプションを含む処理 / 含まない処理を分けて考える（条件分岐🤔）

- [x] タスク3：ディレクトリの中身を取得

- [x] タスク4：隠しファイルの扱いを決める
  - [x] `-a`オプションが付いているなら`.`から始まるファイルを表示させる
  - [x] `-a`オプションが付いていないなら隠しファイルは表示させない

- [x] タスク5：レイアウトの調整
  - [x] 『lsコマンドを作る1』で作成したレイアウトの処理をそのまま使用🤔
  - [x] `-a`オプションを使ったときに隠しファイルが表示されるようにする

- [x] タスク6：rubocop-fjord に通す

- [x] タスク7：提出
  - [x] 作成した lsコマンドを Pull Request として提出
  - [x] 提出物にlsコマンドの実行結果とOS標準（macなど自分の使ってるOS）のlsコマンドをのスクリーンショットを併記して貼る
  - [x] rubocop-fjord のチェックが全てパスした画面をスクショして添付
</details>


---


## 🧑🏻‍💻 本日の取り組み
### 🗣️ グループコーチング
- 昨夜の内容を振り返る

### 📚 プラクティス『🛠️💻 lsコマンドを作る2』 
- メンターさんのコメントをもとにコードを修正
- 課題を再々提出


---


## ⏭️ 次回
### 📚 プラクティス『lsコマンドを作る3』
- プラクティスの内容を確認から着手する


---


### 💡 本日の学び・気付き
#### プラクティス『🛠️💻 lsコマンドを作る2』再々提出
<details><summary>⚠️ ネタバレに注意 </summary>

### メンターさんからのコメント・アドバイス
再提出したコードでも問題はないものの、「**よりシンプルに書けること**」「**Rubyリファレンスマニュアルにある書き方を使うと、意図が明確になること**」といったアドバイスをいただきました。

### Dir.globについて
参考にした Rubyリファレンスマニュアル
https://docs.ruby-lang.org/ja/latest/method/Dir/s/=5b=5d.html
特に以下の記述に注目しました。
```ruby
glob(pattern, flag = 0, base: nil, sort: true) -> [String]
```
これを言語化すると、
> Dir.globは
> - 第1引数には`pattern`と名付けられた引数を指定できる。
> - 第2引数には`flags`と名付けられた引数を指定でき、指定しない場合は`0`になる。
> - 第3引数以降はキーワード引数で、それぞれ初期値を持つ。

という意味になる。
そのため、`Dir.glob('*')`は第2引数が省略されており、`Dir.glob('*', 0)`と同じ挙動になる。


### if文ではなく三項演算子を用いる
三項演算子の構文
```ruby
式 ? 真だった場合の処理 : 偽だった場合の処理
```
再々提出時には、`-a`オプションの有無によって`Dir.glob`の第2引数（`flags`）を切り替える形に書き換えた。
```ruby
flags = show_hidden ? File::FNM_DOTMATCH : 0
# -aオプションが指定されていれば「隠しファイル」を
# -aが指定されていなければ「何も指定しない（0）」
```


### 修正前と修正後のコード
```ruby
# 修正前
files =
  if show_hidden
    Dir.glob('*', File::FNM_DOTMATCH)
  else
    Dir.glob('*')
  end
```
```ruby
# 修正後
flags = show_hidden ? File::FNM_DOTMATCH : 0
files = Dir.glob('*', flags)
```
#### 違いを言語化して比較すると
- 修正前のコード
→ 「`-a`オプションの実装に**処理を分岐させている**」
- 修正後のコード
→ 「三項演算子で条件をまとめ、`Dir.glob`では**引数だけを切り替えている**」

その結果、「`Dir.glob`の第2引数を変えたいだけ」という意図が、コードの読み手により直接的に伝わる形になった。
</details>


---


## ✍🏻 感想
### 🤔 スピードと要領、そして柔軟性
昨夜は今年最初のグループコーチングに参加しました。参加者の皆さんの発表から多くの刺激を受けるとともに、的確なアドバイスもいただきました。

今年は「スピードを意識し、要領よく立ち回ること」を目標にしていますが、そこに、状況に応じて物事を取り入れ、活用していくといった「柔軟性」も付け加えていきたいと感じました。


### 🙌🏻 課題再々提出
メンターさんのアドバイスを受け、 Rubyリファレンスマニュアルを改めて読み直し、理解に努めました。再々提出したコードが完全に正解かどうかはまだ分かりませんが、修正後のコードを見てみると「Ruby らしい Ruby のコードとは、こういう書き方なのかもしれない」と感じることができました。

レビューを通して、もう一段階上の書き方に触れられたことは大きな学びでした。同時に、Rubyリファレンスマニュアルの読み込みがまだまだ浅いことも気付きました。

そういえば、今年最初の日報です。
皆様、本年もどうぞよろしくお願いいたします😊🙏🏻


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 hours 50 min
- Total: 1460 hours 09 min
