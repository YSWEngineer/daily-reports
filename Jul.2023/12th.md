# 2023/07/12(水) 日報
## 取り組んだ課題
### 『Linuxの基礎コマンドを理解する』
- 『Linux標準教科書』
  - 第5章 基本的なコマンド2 - 5.6 ファイルの比較(diff) ~ 第7章 管理者の仕事 - 7.1.1 ユーザ


## 分かったこと・気付き
### ファイルの比較(diff)
- diffコマンドはファイルを比較するコマンド。
- 主に変更の有無を調べる場合に用いられる。
- diffコマンドの結果は標準出力されるが、リダイレクトすればファイル出力することも可能。
```
# diffコマンドによる比較
yoshiwo@YSWs-MBP ~ % diff file1 file2
1a2
> new line

# diff -uコマンドによる比較
yoshiwo@YSWs-MBP ~ % diff -u file1 file2
--- file1	2023-07-12 08:16:13
+++ file2	2023-07-12 08:17:29
@@ -1 +1,2 @@
 test text
+new line

# diff -cコマンドによる比較
yoshiwo@YSWs-MBP ~ % diff -c file1 file2
*** file1	Wed Jul 12 08:16:13 2023
--- file2	Wed Jul 12 08:17:29 2023
***************
*** 1 ****
--- 1,2 ----
  test text
+ new line

# file2の内容を変更してdiffコマンドで比較
yoshiwo@YSWs-MBP ~ % diff file1 file2
1c1,2
< test text
---
> overwrite text
> new line

# diff -uコマンドによる比較
yoshiwo@YSWs-MBP ~ % diff -u file1 file2
--- file1	2023-07-12 08:16:13
+++ file2	2023-07-12 08:37:29
@@ -1 +1,2 @@
-test text # 削除された行の頭にマイナス記号が付加
+overwrite text # 追加された行にプラス記号が付加
+new line # 追加された行にプラス記号が付加
# 「test text」が削除、新たに「overwrite test」「new line」という行が差分追加されていることがわかる

# ちなみにdiff -cコマンドの場合
yoshiwo@YSWs-MBP ~ % diff -c file1 file2
*** file1	Wed Jul 12 08:16:13 2023
--- file2	Wed Jul 12 08:37:29 2023
***************
*** 1 ****
! test text
--- 1,2 ----
! overwrite text
! new line
```

### viの基本操作
- viはページャであり、エディタでもある。
- viでファイルを開いた場合はコマンドモードとインサートモードがある。
- エディタの開始はviコマンドに続けて編集したいファイルのファイル名を指定する。
- エディタの終了はコマンドモードで終了コマンドを実行する。

#### ファイルを開く
- viコマンドの後に編集したいファイルを指定する。

#### ファイルを閉じる
- `escキー`を押した後、`:q`と入力。qはquitの略。

#### ファイルを保存する
- `escキー`を押した後、`:w`と入力。wはwriteの略。
```
yoshiwo@YSWs-MBP ~ % vi test.txt
↓
:w
(コマンドを入力)
↓
"test.txt" [New] 0L, 0B written
```

#### ファイルを保存して終了する
- `escキー`を押した後、`:wq`と入力。
  - `w`で変更内容が書き込まれ、`q`でファイルを閉じる。
```
yoshiwo@YSWs-MBP ~ % vi test.txt
↓
:wq
(コマンドを入力)
↓
yoshiwo@YSWs-MBP ~ % vi test.txt
yoshiwo@YSWs-MBP ~ %
```
 
#### ファイルを保存せずに強制的に閉じる
- `escキー`を押した後、`:q!`と入力。
- :qコマンドの後に!を付けることで、`ファイルを保存せずに強制的に終了`できる。
```
yoshiwo@YSWs-MBP ~ % vi test.txt
↓
:q!
(コマンドを入力)
↓
yoshiwo@YSWs-MBP ~ % vi test.txt
yoshiwo@YSWs-MBP ~ %
```

### インサートモードとコマンドモード
- viエディタを起動すると、コマンドモードでファイルが開かれる。
- 文字列を打ち込むには`iコマンド`若しくは`aコマンド`などでインサートモードへ切り替える。
- viコマンドは`スクリーンエディタ`と呼ばれ、基本的にカーソルがある位置に対してコマンドを実行する。

#### テキストの入力
- インサートモードへは、コマンドでインサートモードへと切り替える必要がある。

#### カーソルの移動
- 追加する文字がある場合は、カーソルを修正したい箇所へ移動して文字を入力する。
- カーソルの左右移動
  - 「`H`」で左へ移動
  - 「`L`」で右へ移動
- カーソルの上下移動
  - 「`J`」で下へ移動
  - 「`K`」で上へ移動
- コマンドを使った行頭への移動
  - `0（ゼロ）コマンド`で、カレント行の行頭へ移動できる。
- コマンドを使った行末への移動
  - `$コマンド`で、カレント行の行末へ移動できる。

### さまざまな編集操作
#### 文字のカット・アンド・ペースト
- 文字のカット・アンド・ペーストの機能はコマンドモードで実行する。

#### カット・アンド・ペーストで使うコマンド
| コマンド | 内容 |
| :---: | :--- |
| x | 1文字削除 |
| dd | 1行削除 |
| yy | 1行コピー |
| nyy | n行コピー |
| p | カーソルの文字の次または次の行にペースト |
| P | カーソルの文字の前または前の行にペースト |
| u | カット、ペーストを一回取り消し（アンドゥ） |
- 文字の削除に利用するxコマンドで削除した最後の文字はバッファと呼ばれる一時的な箱に入る。
- pコマンドを実行するとバッファに保存された文字を取り出すことができる。
- pコマンドはカーソルがある文字の後に文字をペーストする。
- Pコマンドはカーソルがある文字の前に文字をペーストする。

#### 行のカット・アンド・ペースト
- ddコマンドで行単位でカットを行う。カットした行のテキストはバッファへ入るので、pコマンドまたはPコマンドを実行すると文字列をペーストできる。
- pコマンドでは文字列がカーソルの下にペーストされる。
- Pコマンドでは文字列がカーソルの上にペーストされる

#### 行のコピー・アンド・ペースト
- yyコマンドで行全体をコピーする。yyコマンドを実行すると、文字列はバッファに入る。
- バッファ内のテキストはpコマンド、若しくはPコマンドでペーストできる。
- 3yyとコマンドを入力すると、3行をコピーする。

#### 編集の取り消し（アンドゥ）
- テキストの編集で失敗をした時、元に戻すためのコマンドをアンドゥ（undo）といい、uコマンドを入力する。

### 置換と検索
#### 検索と置換に関するコマンド
| コマンド | 内容 |
| :---: | :--- |
| /検索文字列 | 文字列の検索 |
| n | 下方向へ再検索 |
| N | 上方向へ再検索 |
| :対象の行s/検索文字列/置換文字列/オプション | 文字列を置換する |

#### 文字列の置換
- 置換する対象は行範囲を指定することも、文書全体を対象にすることもできる。

#### 置換方法の指定
| コマンド | 内容 |
| :---: | :--- |
| :ns/old/new | n 行目の最初の old を new に置換して終了 |
| :ns/old/new/g | n 行目の全ての old を new に置換して終了 |
| :%s/old/new/g | ファイル全体の検索語句を置換する |
| :%s/old/new/gc | 置換の度に確認を求める |

### グループとユーザー
- Linuxを利用するにはユーザーアカウントが必要。
- グループとユーザーを適切に設定することで、ファイルやディレクトリ、任意のプログラムやシェルスクリプトなどを必要なユーザーにのみ参照・編集する権限や実行する権限を与えることができる。

## 次の目標
- できれば今週中に『Linux標準教科書』 第12章までを自分の言葉で要点をまとめ、記事の作成に着手すること


## 感じたこと
- 『Linux標準教科書』のインプット学習はSlackのtimesの機能をフル活用しています。テキストの内容を消化し（インプット）、自分の言葉に置き換えて要点をまとめてtimesに書き出す(アウトプット)。今はこの作業にひたすらに励んでいます。引き続き頑張ります。

## 学習時間
- Today:&nbsp;&nbsp; 5 hours 25 min
- Total: 329 hours 43 min
