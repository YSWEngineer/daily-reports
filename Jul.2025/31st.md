# 2025/07/31(木)
## 📚 プラクティス『プログラムの修正（リバーシ編）』


### 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] ソースコードの言語化
- [ ] ソースコードを修正
- [ ] 課題提出


### 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>ソースコードの言語化</summary>

- [x] ソースコードの言語化 **※①から順に行う**
  - [x] ① reversi_methods_test.rb
  - [x] ② reversi.rb
  - [x] ③ reversi_methods.rb
  - [x] ④ position.rb


</details>

<details><summary>ソースコードを修正</summary>

- [ ] ソースコードを修正
  - test_cannot_put_stone
    - [ ] 修正
  - test_finished_of_quickest_win_board
    - [ ] 修正
  - test_put_stone
    - [x] 修正
  - test_turn
    - [x] 修正
  - test_finished_of_full_board
    - [ ] 修正

</details>

<details><summary>課題提出</summary>

- [ ] 修正したソースコードを Pull Request としてアップ
- [ ] Pull Request としてアップした URL とテストコードの実行結果を提出
</details>


---
### 🧑🏻‍💻 本日の取り組み
#### プラクティス『プログラムの修正（リバーシ編）』
- `true`を返す原因を突き止める
#### ミートアップ2025年7月『特別授業：オブジェクト指向でのプログラムの書き方・考え方』
- 駒形さんがブラックジャックを組み立てていく様子を拝見


---


### 🎯 次回
#### プラクティス『プログラムの修正（リバーシ編）』
- 修正を行う
    

---


### 💡 本日の学び・気付き
#### test_cannot_put_stone
<details><summary>⚠️ネタバレに触れているような気がするので折り畳みます</summary>

### turnメソッド内の 8方向の確認
#### 黒石をe6に石を置いた時、8方向が示した結果


|   |p direciton   |p target_pos.to_cell_ref   |p target_pos.stone_color(board)   |finishコマンドの結果   |
|---|---|---|---|---|
|:top_left（左上）   |:top_left   |"d5"   |"B"   |"false"   |
|:top（上）   |:top   |"e5"   |"W"   |"true"   |
|:top_right（右上）   |:top-right   |"f5"   |"-"   |"false"（finishを繰り返して最終的にfalseを返す）|
|:left（左）   |:left   |"d6"   |"-"   |"false"（finishを繰り返して最終的にfalseを返す）   |
|:right（右）   |:right   |"f6"   |"-"   |"false"（finishを繰り返して最終的にfalseを返す）   |
|:bottom_left（左下）   |:bottom_left   |"d7"   |"-"   |"false"（finishを繰り返して最終的にfalseを返す）   |
|:bottom（下）   |:bottom   |"e7"   |"-"   |"false"（finishを繰り返して最終的にfalseを返す）   |
|:bottom_right（右下）   |:bottom_right   |"a1"   |"b2"   |"-"   |

- `:top_left`
  - `e6`に黒石（`B`）を置こうとしたとき、左上方向（`:top`）の`d5`に黒石（`B`）があり、ひっくり返す必要はない。だから`false`を返す。
- `:top`
  - `e6`に黒石（`B`）を置いたとき、上方向（`:top`）の`e5`に白石（`W`）があり、さらにその上に黒石（`B`）が続いていたため、白石を黒石で挟むた（＝ひっくり返せた）。
  - よって、`turn`メソッドが`true`を返したのは正しい挙動。
- `:top_right`
  - 石を置いたマス（`e6`）の右上（`f5`）には何も置かれていない。
  - 空白のマス（`-`）なので、ひっくり返すことはできない。
  - `finish`コマンドを繰り返すことで、`false`を返した。
- `:left`
  - 石を置いたマス（`e6`）の左（`d6`）には何も置かれていない。
  - 空白のマス（`-`）なので、ひっくり返すことはできない。
  - `finish`コマンドを繰り返すことで、`false`を返した。
- `:right`
  - 石を置いたマス（`e6`）の右（`f6`）には何も置かれていない。
  - 空白のマス（`-`）なので、ひっくり返すことはできない。
  - `finish`コマンドを繰り返すことで、`false`を返した。
- `:bottom_left`
  - 石を置いたマス（`e6`）の左下（`d7`）には何も置かれていない。
  - 空白のマス（`-`）なので、ひっくり返すことはできない。
  - `finish`コマンドを繰り返すことで、`false`を返した。
- `:bottom`
  - 石を置いたマス（`e6`）の下（`e7`）には何も置かれていない。
  - 空白のマス（`-`）なので、ひっくり返すことはできない。
  - `finish`コマンドを繰り返すことで、`false`を返した。
- `:bottom_right`
  - 石を置いたマス（`e6`）の下（`f7`）には何も置かれていない。
  - 空白のマス（`-`）なので、ひっくり返すことはできない。
  - `finish`コマンドを繰り返すことで、`false`を返した。

### デバッグを通しての気付き
1. ↑デバッグで、隣接するマスがを調べた時、`target_pos.stone_color(board)`が`"-"`（空白）だったケースがあった。
2. でもコードは最初の`finish`で`true`や`false`を返さなかった。
3. `finish`を何度も入力して結果的に`false`が返ってきた。

この時、「空白のマス（`"-"`）を最初に止めてやらないといけないのでは？🤔」と感じ、また 27日の日報での推測

> 「空のマス（"-"）の場合にfalseを返す」といった内容のコードがプログラムにはなく、空のマスでもそのまま処理されてしまっている。

を思い出し、↑これをコードとして書き込めば良いのでは？と考えています。


</details>


---


### ✍🏻 感想
#### 🤔 修正コードって？
バグの原因になりそうな箇所に目星を付けられました。
次は、その部分に対して具体的にどんなコードを書いて、どのように修正を加えるかを試していきます。
先ずは仮説を立てて、テスト結果を確認しながら進めていく予定です。


#### 🔍 流れを知る
今夜は、ミートアップ2025年7月『特別授業：オブジェクト指向でのプログラムの書き方・考え方』に参加しました。私自身はプラクティスがまだ進んでおらず「オブジェクト指向って何？」というレベルでしたが、それでも「何か一つでも学ぼう」という気持ちで受講しました。

後日、資料と動画をアップしていただけるとのことですので、公開されたらしっかり復習し、知識や考え方を身に付けたいと思います。
本日は貴重な授業をありがとうございました😊🙏🏻


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 hours 54 min
- Total: 1195 hours 12 min
