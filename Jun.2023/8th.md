# 2023/06/08(木) 日報
## 取り組んだ課題
- web技術の基本を学ぶ
  - 『プロになるためのWeb技術入門』 Lesson 7 途中まで

## 分かったこと・気付き
- `SQLステートメント（Structured Query Language Statement）`：データベースに対して実行する命令やクエリの形式を指す。SQLステートメントを使用することで、データベースに対してデータの操作や問い合わせを行うことができる。データベースの操作において非常に重要。データの取得、追加、更新、削除など、さまざまなデータベース操作を行う際に使用される。
- 一般的なSQLステートメント
  - `SELECT文`：データベースからデータを取得するためのクエリを実行。例)「SELECT * FROM テーブル名」は、指定したテーブルの全ての列のデータを取得。
  - `INSERT文`：データベースに新しいデータを挿入するためのクエリを実行。例)「INSERT INTO テーブル名 (列1, 列2) VALUES (値1, 値2)」は、指定したテーブルに新しい行を挿入。
  - `UPDATE文`：既存のデータベースのデータを更新するためのクエリを実行。例)「UPDATE テーブル名 SET 列1 = 値1 WHERE 条件」は、指定したテーブルの特定の行の特定の列の値を更新。
  - `DELETE文`：データベースからデータを削除するためのクエリを実行。例)「DELETE FROM テーブル名 WHERE 条件」は、指定したテーブルの特定の行を削除。
- フレームワーク利用のメリット
  1. 設計・開発工数の削減

     最大のメリットは、先人が試行錯誤の末に考え出した優れた設計を再利用できることが挙げられる。これによって設計に要する時間を減らすことができる。アーキテクチャとしてMVCモデルを採用することや、それらをJavaのクラスレベルでどのように実現するかなどが、フレームワークとしてあらかじめ決められているので、利用者はフレームワークの規定に合わせて必要なコードを作成するだけでよい。
            
  2. 品質の向上

     生産性の向上は、結果として品質の向上にもつながる。人間なのだから、どんなに注意深くコードを書いても必ずミスを犯してしまうもの。ミスを減らす唯一の方法は、「できる限り作らない」こと。フレームワークを利用することで、新たに設計したりコードを書いたりする部分が大幅に削減できる。その結果、システム全体の品質向上にも寄与できる。また、フレームワーク自体の品質については常に不具合の修正や機能改善が行われている。そのため、歴史が長く、利用者も多く活発に開発・保守活動が行われているフレームワークほど安心することができる。

  3. テスト工数の削減

     生産性と品質の向上はテスト工数の削減、ひいてはシステム全体の開発のコストの削減にも寄与する。信頼性の高いフレームワークを利用していれば、フレームワーク自身をテストする必要はまずないので、その分テストにかかる工数を減らすことができる。
- フレームワーク利用のデメリット
  1. 学習コストの増大

     どのようなフレームワークでも、その使い方を学習する必要がある。そのため、フレームワーク導入の初期段階では、学習に時間が掛かってしまい、思ったほどの効果があげられないことがよくある。また、利用するフレームワークに合わせた設計手法やテスト手法も確立しなければならないということ。そして、技術は常に進歩するものでフレームワークも例外ではない。組織的にフレームワークを導入する場合は、長期的視点でどのフレームワークを採用すべきかについても考えていかなければならない。

  2. 設計における自由度の低下
      
     フレームワークを利用するということは、「設計と共通実装を再利用する」こと。どのようなフレームワークでもその想定利用範囲が決まっており、その想定を超えた範囲のことを実現しようとすると、逆にフレームワークが足枷となって難易度が非常に高くなってしまうことが多くなる。そのため、フレームワークを利用する際には、あらかじめそのフレームワークで実現できる範囲を把握した上で、システムの設計に取り組まなければならない。フレームワークを利用するということは、設計や機能に対する一定の自由度と引き換えに生産性や品質を向上させているのだということを意識しなければならない。

  3. 長期的な技術力の低下
     
     大抵のフレームワークは簡単に使用できるように内部をブラックボックス化（外部から見た場合に内部の詳細や仕組みが分からない状態）してしまうため、その裏側でどのようなことが行われているのかを知ることができなくなってしまう。開発の現場で不具合が発生した際、フレームワークの使い方やフレームワークそのものが原因となっていることも多い。そういった問題を解決するにはフレームワークの裏側でどのようなことが行われているのかを知っておかなければ、問題を解決することもできない。
- `ブラックボックス化`
  - 外部から見た場合に内部の詳細や仕組みが分からない状態を指す。
  - メリット：利用者が内部の複雑な処理や実装の詳細を意識せずに使うことができるという点。これにより、利用者は簡単に使い方や機能に集中することができる。また、内部の変更やアップデートが行われても、外部のインターフェースが変わらない限り、利用者側には影響が出ないという柔軟性もある。
  - デメリット：内部の実装や処理が不明瞭であるため、トラブルシューティングやカスタマイズが難しいこと。利用者が問題を解決するためには、内部の動作を理解する必要があるが、その情報が提供されていない場合は困難。
- Webアプリケーションを開発するにあたって、最も留意しなければならないポイントの1つがセキュリティ対策。
- Webアプリケーションを含む情報システムにおいて守るべき情報セキュリティには、以下3つがある。
  1. 第三者への情報の流出を防ぐこと（機密性）

     情報流出は最も問題になりやすいセキュリティリスクである。流出した情報の持ち主である顧客の被害はもちろんのこと、そのシステムを運営する企業にとっては信頼が失墜し、最悪の場合は会社の経営に大きな影響を与える問題に発展しかねない。

  2. 第三者による情報の改竄を防ぐこと（完全性）

     システムが管理する情報を第三者が改竄することによって、本来の利用者やシステムを運営する企業に不利英気を与える可能性がある。例）銀行の口座残高やショッピングポイントを不正に変更する。企業や政府機関のWebサイトを第三者が勝手に書き換える。意図しない情報を発信させる。コンピュータウイルスなどに感染させる不正サイトに誘導させる。

  3. 適切な権限を持った人間が適切な情報を利用できること（可用性）

     ログイン情報の流出や情報改竄などにより、本来提供すべき情報やサービスを利用者に提供できなくなってしまうことがある。情報やサービスの提供先が顧客であれば、社会的信頼の喪失や賠償問題に発展し、自社の業務に使用するシステムであれば、業務が追考できないといった直接的打撃となる。
- `SQLインジェクション`
  - Webフォームなどの入力インターフェースを利用してデータベースに発行されるSQLを開発者が意図しない形に変更することで、情報の不正取得や改竄を行う方法。
  - SQLインジェクションによって第三者による不正なログイン、閲覧権限のない情報へのアクセス、データベースの不正改竄や削除といった攻撃を許すことになり、個人情報の流出、業務停止・混乱といった問題へと発展してしまう。
  - 実際の被害例）2005年5月に起きた著名な商品情報提供サイトからのユーザのメールアドレス約2万件が流出した事例。2005年3月に大手旅行情報サイトから約9万件の個人情報が流出した事例などが挙げられる。
  - SQLインジェクションの恐ろしい点はインターネット経由で世界中から攻撃が可能である点と、被害者が情報流出に気づきにくいという点。攻撃されていることに気がつかないということは被害の発見が遅れ、被害の拡大につながる。
- `SQLインジェクションを防ぐ、いくつかの方法`
    1. **入力値のチェック**
        
        最も有効な方法は入力値のチェックを行う方法。例えば、パスワードの入力において半角英数字のみ受け付けるようにすれば、SQLインジェクションで利用される「’（アポストロフィ）」の混入を防ぐことができる。また、たいていのプレゼンテーションフレームワークでは、入力チェックを自動的に行う「バリデーション（Validation）」機能が提供されている。これらを利用することで簡単にSQLインジェクションを防ぐことができる。
        
    2. **プリペアード・ステートメントの利用**
        
        プリペアード・ステートメントとは、文字列連結でSQLを組み立てるのではなく、WHERE区など条件によって変化する部分をプレースホルダとして登録したSQLを事前に用意しておき、あとからパラメータを割り当てる方法。SQLの解釈を先に実行してしまうため、条件の追加などの構造の変更が後から行えない。これがSQLインジェクションの防止に役立っている。
- `クロスサイトスクリプティング（XSS）`
  - 「クロスサイトスクリプティング（Cross Site Scripting）」はSQLインジェクションと同じようにHTMLの中に悪意のある動作をするJavaScriptを埋め込むことによる攻撃手法で、JavaScriptインジェクションとも呼ばれる。
  - JavaScriptはWebサーバからWebブラウザへ返されるレスポンス（つまり、HTML）の中に埋め込むことができ、埋め込んだスクリプト（コンピュータプログラムの一形態であり、特定の処理やタスクを自動化するために使用されます。スクリプトは通常、スクリプト言語と呼ばれるプログラミング言語で書かれ、テキストファイルとして保存されます）をWebブラウザに実行させることができる。ここで悪意のあるスクリプトが実行されると、クッキーの盗難やページの改竄などが実行できてしまう。その結果、クロスサイトスクリプティングは不正ログインや個人情報の流出といった問題につながってしまう。
  - XSSに利用されるのは、フォームへ入力された文字列をそのままHTMLへ出力しているようなサイト。このような脆弱性を作らないためには、HTMLへ文字列を出力する際に「サニタイジング（Sanitizing）」と呼ばれる処理が有効。サニタイジングとは「消毒する」という意味だが、ここではHTMLに埋め込むと元のHTMLの構造を変更したり破壊したりしてしまう文字列を削除したり無害な文字列に変換したりする処理のことを言う。
- `セッションハイジャック`
  - 「セッションハイジャック（Session Hijack）」は、クライアントとサーバの間でやりとりされているセッションIDを第三者が盗み取ることで、Webサイトの利用者になりすましてサービスを利用してしまう攻撃のこと。
  - セッションIDが盗まれてしまうと、攻撃者によって利用者の個人情報が流出してしまったり、利用者の代わりに勝手に買い物をされてしまったりという被害が発生してしまう。
  - セッションハイジャックを防ぐには、以下のいくつかの方法があるが、できる限りこれら全てを実施しておくことが望ましい。
    **クロスサイトスクリプティング（XSS）対策**
        
      最もよく用いられるセッションハイジャックの手段が、クロスサイトスクリプティング。クロスサイトスクリプティングに対する脆弱性をなくしておくことが、セッションハイジャックに対する対策にもなる。
        
    **通信経路の暗号化**
        
      インターネットを流れる通信は、特殊な機材やソフトウェアを利用することで盗聴が可能。そのため暗号化されていない通信経路を流れるセッションIDは、第三者に盗まれてしまう可能性がある。
        
      これを防ぐには、通信路を「SSL（Secure Sockets Layer）」によって暗号化することが必要となる。これにより、少なくともインターネット上を流れるセッションIDが第三者へ盗まれる可能性はなくなる。
        
    **セッション・タイムアウト値の変更**
        
      セッション情報は明示的に破棄されない限り、タイムアウトが発生するまでサーバ側に保持され続ける。例えば、Webアプリケーションの利用者がログアウト操作を忘れてしまった場合などは、セッション・タイムアウトが発生するまでセッションIDも有効のままであるため、何らかの方法によりセッションIDが盗まれた場合に被害を受けやすくなる。
        
      そのため、重要な情報を扱うWebアプリケーションでは、セッション・タイムアウトの時間を短めに設定することで、万が一セッションIDを盗まれてもそれを悪用される危険性を減らすことができる。
        
      一方で、セッション・タイムアウト時間を短く設定し過ぎると、少しの間Webアプリケーションの操作を行わないだけでセッションが無効になってしまい、ログインからやり直しということになりかねない。
        
      安全性と操作性のバランスを考慮する必要がある。
        
    **セッションIDのランダム化**
        
      十分大きな桁数の数字の中からランダムに選択し、攻撃者が適当な数字を選択してもセッションIDを引き当てられないようにする必要がある。
        
      セッションはPHPなどの言語処理系やアプリケーションサーバによって実現されている。
        
      セッションの安全性はセッションIDが十分大きな桁の数字の中からランダムに選択されたものであることに支えられているということは知っておくべき。
- `SSL（Secure Sockets Layer）`
  - TCP／IP上の通信を暗号化し、第三者が盗聴しても内容を判らなくするための技術。HTTPのよる通信をSSLで暗号化したものが「HTTP over SSL」であり、URIのスキームでは「https」として表される 。

## 次の目標
- 『プロになるためのWeb技術入門』 読了。
- ステートフル・ステートレス・リクエスト・レスポンス・クッキー・プロトコル・ポート番号について自分の言葉で説明した内容をブログやQiitaに投稿し、URLを提出する。

## 感じたこと
- 著書でインプットに時間が掛かったのがLesson 6でした。他のLessonに比べてページ数が多く、著者が最も伝えたかった箇所だと思っています。まだ理解が及ばなかったり、用語の意味が曖昧な部分も多くありますので復習を欠かさず行います。

## 学習時間
- Today:&nbsp;&nbsp; 3 hours 25 min
- Total: 220 hours 48 min
