# 2025/03/10(月)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [x] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [x] 3.3 FizzBuzzプログラムのテスト自動化
   - [x] 3.4 この章のまとめ
- [x] 第4章  配列や繰り返し処理を理解する
   - [x] 4.1 イントロダクション
   - [x] 4.2 配列
   - [x] 4.3 ブロック
   - [x] 4.4 ブロックを使う配列のメソッド
   - [x] 4.5 範囲（Range）
   - [x] 4.6 例題：RGB変換プログラムを作成する
   - [x] 4.7 配列についてもっと詳しく
   - [x] 4.8 ブロックについてもっと詳しく
   - [x] 4.9 範囲（Range）についてもっと詳しく
   - [x] 4.10 さまざまな繰り返し処理
   - [x] 4.11 繰り返し処理用の制御構造
   - [x] 4.12 この章のまとめ
- [x] 第5章  ハッシュやシンボルを理解する
   - [x] 5.1 イントロダクション
   - [x] 5.2 ハッシュ
   - [x] 5.3 シンボル
   - [x] 5.4 続・ハッシュについて
   - [x] 5.5 例題：長さの単位交換プログラムを作成する
   - [x] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [x] 5.7 シンボルについてもっと詳しく
   - [x] 5.8 この章のまとめ
- [x] 第6章  正規表現を理解する
   - [x] 6.1 イントロダクション
   - [x] 6.2 正規表現って何？
   - [x] 6.3 Ruby における正規表現オブジェクト
   - [x] 6.4 例題：Ruby のハッシュ記法を変換する
   - [x] 6.5 正規表現オブジェクトについてもっと詳しく
   - [x] 6.6 この章のまとめ
- [x] 第7章  クラスの作成を理解する
   - [x] 7.1 イントロダクション
   - [x] 7.2 オブジェクト指向プログラミングの基礎知識
   - [x] 7.3 クラスの定義
   - [x] 7.4 例題：改札機プログラムの作成
   - [x] 7.5 selfキーワード
   - [x] 7.6 クラスの継承
   - [x] 7.7 メソッドの可視性
   - [x] 7.8 定数についてもっと詳しく
   - [x] 7.9 さまざまな種類の変数
   - [x] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [x] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [x] 8.1 イントロダクション
   - [x] 8.2 モジュールの概要
   - [x] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [x] 8.4 例題：rainbowメソッドの作成
   - [x] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [x] 8.6 モジュールを利用した名前空間の作成
   - [x] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第8章  モジュールを理解する
    - 8.7 関数や定数を提供するモジュールの作成
      - モジュールに特異メソッドを定義する
      - module_functionメソッド
      - モジュールに定数を定義する
      - モジュール関数や定数を持つモジュールの例


------------


## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第8章  モジュールを理解する
    - 8.8 状態を保持するモジュールの作成


------------


## 💡 本日の学び・気付き
### 8.7 関数や定数を提供するモジュールの作成
モジュールはモジュール単体で使うこともできる。
#### モジュールに特異メソッドを定義する
`include`や`extend`を使うとモジュールのメソッドをインスタンスメソッドやクラスメソッドとして追加することができる。しかし、場合によっては他のクラスに組み込まなくてもモジュール単体でそのメソッドを呼び出したい、と思うケースがある。こういう場合はモジュール自身に**特異メソッド**を定義すれば、直接`モジュール名.メソッド名`という形でそのメソッドを呼び出すことができる。
```ruby
irb(main):001* module Loggable
# 特異メソッドとしてメソッドを定義する
irb(main):002*   def self.log(text)
irb(main):003*     puts "[LOG] #{text}"
irb(main):004*   end
irb(main):005> end

# 他のクラスにミックスインしなくてもモジュール単体でそのメソッドを呼び出せる
irb(main):006> Loggable.log('Hello.')
[LOG] Hello.
```
モジュールはクラスと違ってインスタンスが作れないため、`new`する必要が全くない「**単なるメソッド（関数）の集まり**」を作りたいケースに向いている。

モジュールでもクラスと同様に`class << self`を使い、特異メソッドを定義することができる。特異メソッドをたくさん定義する場合はメソッド名の前の`self.`がなくせる分、タイプ量を減らすことができる。
```ruby
irb(main):001* module Loggable
irb(main):002*   class << self
irb(main):003*     def log(text)
irb(main):004*       puts "[LOG] #{text}"
irb(main):005*     end
irb(main):006*   end
irb(main):007> end
irb(main):008> Loggable.log('Hello.')
[LOG] Hello.
```

#### module_functionメソッド
モジュールではミックスインとしても使え、なおかつモジュールの特異メソッドとしても使える、一石二鳥なメソッドを定義することができる。両方で使えるメソッドを定義する場合は module_functionメソッドを使って、対象のメソッド名を指定する。

以下は module_functionメソッドを利用するモジュールのコード例。
```ruby
irb(main):001* module Loggable
irb(main):002*   def log(text)
irb(main):003*     puts "[LOG] #{text}"
irb(main):004*   end
# logメソッドをミックスインとしても、モジュールの特異メソッドとしても使えるようにする
# （module_functionは対象のメソッドの定義よりも下で呼び出すこと）
irb(main):005*   module_function :log
irb(main):006> end

# モジュールの特異メソッドとしてlogメソッドを呼び出す
irb(main):007> Loggable.log('Hello.')
[LOG] Hello.

# Loggableモジュールをincludeしたクラスを定義する
irb(main):008* class Product
irb(main):009*   include Loggable

irb(main):010*   def title
# includeしたLoggableモジュールのlogメソッドを呼び出す
irb(main):011*     log 'title is called.'
irb(main):012*     'A great movie'
irb(main):013*   end
irb(main):014> end
=> :title

# ミックスインとしてlogメソッドを呼び出す
irb(main):015> product = Product.new
irb(main):016> product.title
[LOG] title is called.
=> "A great movie"
```
↑ミックスインとしてもモジュールの特異メソッドとしても使えるメソッドのことを**モジュール関数**と呼ぶ。

ちなみに、`module_function`でモジュール関数となったメソッドは、他のクラスにミックスインすると自動的に privateメソッドになる。
```ruby
irb(main):017> product = Product.new
# logメソッドはprivateなので外部からは呼び出せない
irb(main):018> product.log 'Hello.'
(irb):18:in `<main>': private method `log' called for an instance of Product (NoMethodError)
```
また、module_functionメソッドを引数なしで呼び出した場合は、そこから下に定義されたメソッドがすべてモジュール関数になる。
```ruby
module Loggable
  # ここから下のメソッドはすべてモジュール関数
  module_function
  
  def log(text)
    puts "[LOG] #{text}"
  end
end
```

#### モジュールに定数を定義する
クラスに定数を定義できたように、モジュールにも定数を定義することができる。定義の仕方や参照の仕方はクラスの場合と同じ。
```ruby
irb(main):001* module Loggable
# 定数を定義する
irb(main):002*   PREFIX = '[LOG]'

irb(main):003*   def log(text)
irb(main):004*     puts "#{PREFIX} #{text}"
irb(main):005*   end
irb(main):006> end

# 定数を参照する
irb(main):007> Loggable::PREFIX
=> "[LOG]"
```

#### モジュール関数や定数を持つモジュールの例
モジュール関数や定数を持つ、代表的な Ruby の組み込みライブラリは Mathモジュール。このモジュールは、数学の計算でよく使われる関数（メソッド）が数多く定義されている。Mathモジュールのメソッドはモジュール関数になっているため、モジュールの特異メソッドとしても、ミックスインとしても利用することができる。
```ruby
# モジュールの特異メソッドとしてsqrt（平方根）メソッドを利用する
irb(main):001> Math.sqrt(2)
=> 1.4142135623730951

irb(main):002* class Calculator
irb(main):003*   include Math

irb(main):004*   def calc_sqrt(n)
# ミックスインとしてMathモジュールのsqrtメソッドを使う
irb(main):005*     sqrt(n)
irb(main):006*   end
irb(main):007> end
=> :calc_sqrt

irb(main):008> calculator = Calculator.new
irb(main):009> calculator.calc_sqrt(2)
=> 1.4142135623730951
```
また、Mathモジュールには自然対数の底を表す`E`と、円周率を表す`PI`という定数が定義されている。
```ruby
irb(main):010> Math::E
=> 2.718281828459045
irb(main):011> Math::PI
=> 3.141592653589793
```
`puts`や`p`のような Kernelモジュールのメソッドはモジュール関数になっているため、Kernelモジュールの特異メソッドとして呼び出すこともできる。
```ruby
irb(main):015> Kernel.puts 'Hello.'
Hello.
=> nil
irb(main):016> Kernel.p [1, 2, 3]
[1, 2, 3]
=> [1, 2, 3]
```


-------------


## ✍🏻 感想
### 🍒 モジュールの使い途
モジュールがクラスと組み合わせるだけでなく、単体でも利用できることを初めて知りました。使い方には多少工夫が求められるものの、その仕組みを理解してマスターすることで、より効率的にプログラムを作成できる可能性を感じています......でも、難しいですね🤔


------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 1 hours 29 min
- Total: 996 hours 20 min
