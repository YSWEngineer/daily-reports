# 2025/03/23(日)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [x] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [x] 3.3 FizzBuzzプログラムのテスト自動化
   - [x] 3.4 この章のまとめ
- [x] 第4章  配列や繰り返し処理を理解する
   - [x] 4.1 イントロダクション
   - [x] 4.2 配列
   - [x] 4.3 ブロック
   - [x] 4.4 ブロックを使う配列のメソッド
   - [x] 4.5 範囲（Range）
   - [x] 4.6 例題：RGB変換プログラムを作成する
   - [x] 4.7 配列についてもっと詳しく
   - [x] 4.8 ブロックについてもっと詳しく
   - [x] 4.9 範囲（Range）についてもっと詳しく
   - [x] 4.10 さまざまな繰り返し処理
   - [x] 4.11 繰り返し処理用の制御構造
   - [x] 4.12 この章のまとめ
- [x] 第5章  ハッシュやシンボルを理解する
   - [x] 5.1 イントロダクション
   - [x] 5.2 ハッシュ
   - [x] 5.3 シンボル
   - [x] 5.4 続・ハッシュについて
   - [x] 5.5 例題：長さの単位交換プログラムを作成する
   - [x] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [x] 5.7 シンボルについてもっと詳しく
   - [x] 5.8 この章のまとめ
- [x] 第6章  正規表現を理解する
   - [x] 6.1 イントロダクション
   - [x] 6.2 正規表現って何？
   - [x] 6.3 Ruby における正規表現オブジェクト
   - [x] 6.4 例題：Ruby のハッシュ記法を変換する
   - [x] 6.5 正規表現オブジェクトについてもっと詳しく
   - [x] 6.6 この章のまとめ
- [x] 第7章  クラスの作成を理解する
   - [x] 7.1 イントロダクション
   - [x] 7.2 オブジェクト指向プログラミングの基礎知識
   - [x] 7.3 クラスの定義
   - [x] 7.4 例題：改札機プログラムの作成
   - [x] 7.5 selfキーワード
   - [x] 7.6 クラスの継承
   - [x] 7.7 メソッドの可視性
   - [x] 7.8 定数についてもっと詳しく
   - [x] 7.9 さまざまな種類の変数
   - [x] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [x] 7.11 この章のまとめ
- [x] 第8章  モジュールを理解する
   - [x] 8.1 イントロダクション
   - [x] 8.2 モジュールの概要
   - [x] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [x] 8.4 例題：rainbowメソッドの作成
   - [x] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [x] 8.6 モジュールを利用した名前空間の作成
   - [x] 8.7 関数や定数を提供するモジュールの作成
   - [x] 8.8 状態を保持するモジュールの作成
   - [x] 8.9 モジュールに関する高度な話題
   - [x] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [x] 9.1 イントロダクション
   - [x] 9.2 例外の捕捉
   - [x] 9.3 意図的に例外を発生させる
   - [x] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


---


## 🧑🏻‍💻 本日の取り組み
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第9章  例外処理を理解する
    - 9.5 例題：正規表現チェッカープログラムの作成
      - テスト駆動開発をするかどうか
      - 実装のフローチャートを考える
      - 文字入力を受け付ける getsメソッド
      - 実装を開始する


---


## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第9章  例外処理を理解する
    - 9.5 例題：正規表現チェッカープログラムの作成
      - 例外処理を組み込む
    

---


## 💡 本日の学び・気付き
### 9.5 例題：正規表現チェッカープログラムの作成
#### 実装のフローチャートを考える
正規表現チェッカープログラムの仕様を手掛けるために、以下のフローチャートを見て認識を確認しておくこと。

<a href="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBeURjQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--da54d205833f50497c463be6f516d406d080a6ad/IMG_1321.jpeg" target="_blank" rel="noopener noreferrer"><img src="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBeURjQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--da54d205833f50497c463be6f516d406d080a6ad/IMG_1321.jpeg" width="4032" height="2268" alt="IMG_1321.jpeg"></a>

#### 文字入力を受け付ける getsメソッド
ターミナル上でユーザの入力を受け付ける場合は、**getsメソッド**を使用する。このメソッドは **Kernelモジュール**で定義されているメソッドなので、**グローバル関数**のようにどこでも使える。

```ruby
# getsメソッドを呼ぶとプログラムはユーザの入力を待つ
irb(main):001> input = gets
# ここでHelloと入力してからリターンキーを押す
Hello
=> "Hello\n"
```
↑実行例を見ると、`gets`で入力を受け付けるだけだと、ユーザが最後に入力したリターンキーが改行文字（\n）として文字列に含まれてしまう。改行文字を削除するには、**chompメソッド**を使用する。
```ruby
irb(main):002> input = gets
# ここでHelloと入力してからリターンキーを押す
Hello
=> "Hello\n"
irb(main):003> input = input.chomp
irb(main):004> input
=> "Hello"
```
実際は上記のように書かなくても、`gets.chomp`と書くことで改行文字を取り除いた文字列を取得することができる。
```ruby
irb(main):001> input = gets.chomp
# ここでHelloと入力してからリターンキーを押す
Hello
=> "Hello"
irb(main):002> input
=> "Hello"
```

##### 確認①：Kernelモジュールについて
Ruby の Kernelモジュールは、**Rubyプログラムの基本的な機能を提供するモジュール**。特に**どこからでも呼び出せるメソッドを多く持っている**のが特徴。
###### 代表的なメソッド
- `puts`や`print`（画面に表示する）
- `gets`（ユーザから入力を受け取る）
- `p`（オブジェクトを表示する）

これらは、定義なしで使用できるため、まるでグローバル関数のようにどこでも呼び出すことができる。

##### 確認②：グローバル関数について
グローバル関数とは、**プログラムのどこからでも呼び出せる関数**のこと。そもそも **Ruby には「グローバル関数」そのものは存在しない**が、Kernelモジュールのメソッドが定義なしでどこでも呼び出せるため、**あたかもグローバル関数のように使用できる**。

##### ここまでをまとめると
- **getsメソッド**はターミナルから入力を受け取るために使う。
- **Kernelモジュール**は基本的なメソッドを提供し、どこからでも使えるようにしている。
- **グローバル関数**のように使えるが、正確には Kernelモジュールのメソッドを呼び出している。

イメージとしては「**Ruby が裏で便利なメソッドを使えるように準備してくれている**」と考えればよい！

#### 実装を開始する
libディレクトリに regexp_checker.rbファイルを作成し、そこに以下のようなテキスト入力を受け付けるコードを書く。
```ruby
pring 'Text?: '
text = gets.chomp
# 動作確認のため変数の中身を表示
puts text
```
**printメソッド**を使うと文字列を表示したあと改行にしないようにでき、`Text?: `の横に文字列を続けて入力することが可能になる。

ファイルを保存し、プログラムを実行して、ターミナル上で文字列がにゅ力でき、その文字列がもう一度出力されれば OK。
```shell
~/ruby-book % ruby lib/regexp_checker.rb
Text?: Hello
Hello
```
続けて、正規表現のパターンを受け付ける。動作確認のために書いた`puts text`は削除して以下の内容を書く。
```ruby
print 'Text?: '
text = gets.chomp
print 'Pattern?: '
pattern = gets.chomp

regexp = Regexp.new(pattern)
matches = text.scan(regexp)
if matches.size > 0
  puts "Matched: #{matches.join(', ')}"
else
  puts 'Nothing matched.'
end
```
動作確認。
```shell
# マッチした結果を出力する
~/ruby-book % ruby lib/regexp_checker.rb
Text?: 123-456-789
Pattern?: [1-6]+
Matched: 123, 456

# 1つもマッチしない場合の実行結果
~/ruby-book % ruby lib/regexp_checker.rb
Text?: abc-def-ghi
Pattern?: [1-6]+
Nothing matched.
```
以下は不正な正規表現パターンを入力した場合。試しに`[1-6+`と入力する。
```ruby
~/ruby-book % ruby lib/regexp_checker.rb
Text?: 123-456-789
Pattern?: [1-6+
lib/regexp_checker.rb:6:in `initialize': premature end of char-class: /[1-6+/ (RegexpError)
	from lib/regexp_checker.rb:6:in `new'
	from lib/regexp_checker.rb:6:in `<main>'
```
例外が発生して異常終了してしまったので、次は例外処理を組み込んでパターンを再入力できるようにする。

---


## ✍🏻 感想
### 🍒 フローチャートで効率的に
正規表現チェッカープログラムの仕様を作成していますが、フローチャートのおかげで作業の流れを抑えることができ、効率的に進められます。

実際の開発現場でもフローチャートは活用されているのでしょうか？プロジェクトや開発チームによって、使われる場面と使われない場面があるのか気になります🤔

次回は例外処理を組み込んでいきます。


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2 hours 12 min
- Total: 1013 hours 03 min
