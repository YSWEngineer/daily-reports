# 2025/03/05(水)
## 📚 プラクティス『Ruby中級』


## 🧩 タスクばらし
- [x] プラクティスの内容を咀嚼
- [x] タスクばらし、スモールステップの作成
- [x] 各参考ページを確認
- [ ] 参考書籍：[プロを目指す人のためのRuby入門 <改訂2版>](https://www.amazon.co.jp/dp/4297124378/)を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる


## 🐾 スモールステップ
<details><summary>プラクティスの内容を咀嚼</summary>

- [x] プラクティスの内容を咀嚼
</details>

<details><summary>タスクばらし、スモールステップの作成</summary>

- [x] タスクばらし、スモールステップの作成
</details>

<details><summary>各参考ページを確認</summary>

- [x] [学習を加速させるインデックス読書術](https://qiita.com/dkatsura/items/3364b293ed1451a66a8a)を再読
- [x] 動画：[著者自身が語る「プロを目指す人のためのRuby入門」の効果的な読み方](https://www.youtube.com/watch?v=qqqbHXarPO8)
</details>

<details><summary>参考書籍：プロを目指す人のためのRuby入門 <改訂2版>を読んで、実際に手を動かしてツールを使ってみてコードを書いてみる</summary>

- [x] 第1章  本書を読み進める前に
   - [x] 1.1 イントロダクション
   - [x] 1.2 本書の概要
   - [x] 1.3 Ruby について
   - [x] 1.4 Ruby のインストール
   - [x] 1.5 エディタ/IDE について
   - [x] 1.6 Ruby を動かしてみる
   - [x] 1.7 本書のサンプルコードについて
   - [x] 1.8 Ruby の公式リファレンスについて
   - [x] 1.9 この章のまとめ
- [x] 第2章  Ruby の基礎を理解する
   - [x] 2.1 イントロダクション
   - [x] 2.2 Ruby に関する基礎知識
   - [x] 2.3 文字列
   - [x] 2.4 数値
   - [x] 2.5 真偽値と条件分岐
   - [x] 2.6 メソッドの定義
   - [x] 2.7 例題：FizzBuzzプログラムを作成する
   - [x] 2.8 文字列についてもっと詳しく
   - [x] 2.9 数値についてもっと詳しく
   - [x] 2.10 真偽値と条件分岐についてもっと詳しく
   - [x] 2.11 メソッド定義についてもっと詳しく
   - [x] 2.12 そのほかの基礎知識
   - [x] 2.13 この章のまとめ
- [x] 第3章  テストを自動化する
   - [x] 3.1 イントロダクション
   - [x] 3.2 Minitest の基本
   - [x] 3.3 FizzBuzzプログラムのテスト自動化
   - [x] 3.4 この章のまとめ
- [x] 第4章  配列や繰り返し処理を理解する
   - [x] 4.1 イントロダクション
   - [x] 4.2 配列
   - [x] 4.3 ブロック
   - [x] 4.4 ブロックを使う配列のメソッド
   - [x] 4.5 範囲（Range）
   - [x] 4.6 例題：RGB変換プログラムを作成する
   - [x] 4.7 配列についてもっと詳しく
   - [x] 4.8 ブロックについてもっと詳しく
   - [x] 4.9 範囲（Range）についてもっと詳しく
   - [x] 4.10 さまざまな繰り返し処理
   - [x] 4.11 繰り返し処理用の制御構造
   - [x] 4.12 この章のまとめ
- [x] 第5章  ハッシュやシンボルを理解する
   - [x] 5.1 イントロダクション
   - [x] 5.2 ハッシュ
   - [x] 5.3 シンボル
   - [x] 5.4 続・ハッシュについて
   - [x] 5.5 例題：長さの単位交換プログラムを作成する
   - [x] 5.6 ハッシュとキーワード引数についてもっと詳しく
   - [x] 5.7 シンボルについてもっと詳しく
   - [x] 5.8 この章のまとめ
- [x] 第6章  正規表現を理解する
   - [x] 6.1 イントロダクション
   - [x] 6.2 正規表現って何？
   - [x] 6.3 Ruby における正規表現オブジェクト
   - [x] 6.4 例題：Ruby のハッシュ記法を変換する
   - [x] 6.5 正規表現オブジェクトについてもっと詳しく
   - [x] 6.6 この章のまとめ
- [x] 第7章  クラスの作成を理解する
   - [x] 7.1 イントロダクション
   - [x] 7.2 オブジェクト指向プログラミングの基礎知識
   - [x] 7.3 クラスの定義
   - [x] 7.4 例題：改札機プログラムの作成
   - [x] 7.5 selfキーワード
   - [x] 7.6 クラスの継承
   - [x] 7.7 メソッドの可視性
   - [x] 7.8 定数についてもっと詳しく
   - [x] 7.9 さまざまな種類の変数
   - [x] 7.10 クラス定義や Ruby の言語使用に関する高度な話題
   - [x] 7.11 この章のまとめ
- [ ] 第8章  モジュールを理解する
   - [x] 8.1 イントロダクション
   - [x] 8.2 モジュールの概要
   - [x] 8.3 モジュールを利用したメソッド定義（include と extend）
   - [x] 8.4 例題：rainbowメソッドの作成
   - [x] 8.5 モジュールを利用したメソッド定義についてもっと詳しく
   - [ ] 8.6 モジュールを利用した名前空間の作成
   - [ ] 8.7 関数や定数を提供するモジュールの作成
   - [ ] 8.8 状態を保持するモジュールの作成
   - [ ] 8.9 モジュールに関する高度な話題
   - [ ] 8.10 この章のまとめ
- [ ] 第9章  例外処理を理解する
   - [ ] 9.1 イントロダクション
   - [ ] 9.2 例外の捕捉
   - [ ] 9.3 意図的に例外を発生させる
   - [ ] 9.4 例外処理のベストプラクティス
   - [ ] 9.5 例題：正規表現チェッカープログラムの作成
   - [ ] 9.6 例外処理についてもっと詳しく
   - [ ] 9.7 この章のまとめ
- [ ] 第10章  yield と Proc を理解する
   - [ ] 10.1 イントロダクション
   - [ ] 10.2 ブロックを利用するメソッドの定義と yield
   - [ ] 10.3 Procオブジェクト
   - [ ] 10.4 例題：ワードシンセサイザーの作成
   - [ ] 10.5 Procオブジェクトについてもっと詳しく
   - [ ] 10.6 この章のまとめ
- [ ] 第11章  パターンマッチを理解する
   - [ ] 11.1 イントロダクション
   - [ ] 11.2 パターンマッチの基本
   - [ ] 11.3 パターンマッチの利用パターン
   - [ ] 11.4 例題：ログフォーマッターの作成
   - [ ] 11.5 パターンマッチについてもっと詳しく
   - [ ] 11.6 この章のまとめ
- [ ] 第12章  Ruby のデバッグ技法を身につける
   - [ ] 12.1 イントロダクション
   - [ ] 12.2 バックトレースの読み方
   - [ ] 12.3 よく発生する例外クラスとその原因
   - [ ] 12.4 プログラムの途中経過を確認する
   - [ ] 12.5 汎用的なトラブルシューティング方法
   - [ ] 12.6 この章のまとめ
- [ ] 第13章  Ruby に関するその他のトピック
   - [ ] 13.1 イントロダクション
   - [ ] 13.2 日付や時刻の扱い
   - [ ] 13.3 ファイルやディレクトリの扱い
   - [ ] 13.4 特定の形式のファイルを読み書きする
   - [ ] 13.5 環境変数や起動時引数の取得
   - [ ] 13.6 非推奨機能を使ったときに警告を出力する
   - [ ] 13.7 eval、バッククオートリテラル、sendメソッド
   - [ ] 13.8 Rake
   - [ ] 13.9 gem と Bundler
   - [ ] 13.10 Ruby における型情報の定義と型検査（RBS、TypeProf、Steep）
   - [ ] 13.11 「Rails の中の Ruby」と「素の Ruby」の違い
   - [ ] 13.12 この章のまとめ

</details>


------------


## 🧑🏻‍💻 本日の取り組み
### Hatena Blog
- [フィヨルドブートキャンプでの学習時間と進捗：2月の振り返り](https://yswengineer.hatenablog.com/entry/2025/03/05/154723)を投稿

### Ruby Association
- 『Ruby を学ぶポイントとコツ』について学ぶ

### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第8章  モジュールを理解する
    - 8.5 モジュールを利用したメソッド定義についてもっと詳しく 途中から
      - Kernelモジュール
      - トップレベルは main という名前の Object
      - クラスやモジュール自身もオブジェクト
      - モジュールとインスタンス変数
      - クラス以外のオブジェクトに extend する


------------


## 🎯 次回
### プラクティス『Ruby中級』
- 参考書籍：『プロを目指す人のためのRuby入門 <改訂2版>』を読み進める
  - 第8章  モジュールを理解する
    - 8.6 モジュールを利用した名前空間の作成


------------


## 💡 本日の学び・気付き
### 8.5 モジュールを利用したメソッド定義についてもっと詳しく
#### Kernelモジュール
Ruby には重要なモジュールがまだある。それは Kernelモジュール。以下は Kernelモジュールが提供するメソッド。
```
puts   p   pp   print   require   loop
```
`puts`のように最初から当たり前のように使えるメソッドや、`require`や`loop`のような普通の構文のように見えるメソッドの多くは、Kernelモジュールで定義されている。

なぜ、Kernelモジュールのメソッドがどこでも使えるようになっているのかというと、Objectクラスが Kernelモジュールを`include`しているから。
```ruby
irb(main):001> Object.include?(Kernel)
=> true
```
Objectクラスが事実上、全クラスの頂点にいるクラスなので、すべてのクラスは Kernelモジュールのメソッドが使えるようになっている。

<a href="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBeFBZQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--dac13d6d768d5315f4b84e8ba99ad695e86bffcb/IMG_1252.jpeg" target="_blank" rel="noopener noreferrer"><img src="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBeFBZQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--dac13d6d768d5315f4b84e8ba99ad695e86bffcb/IMG_1252.jpeg" width="3663" height="2121" alt="IMG_1252.jpeg"></a>

#### トップレベルは main という名前の Object
irb を起動した直後に自分がいる場所は「**Ruby のトップレベル**」である。トップレベルには main という名前の Objectクラスのインスタンスが self として存在している。つまり、**Objectクラスのインスタンス**になる。たとえば、irb を起動した直後に次のようにするとそのことを確認できる。
```ruby
irb(main):001> self
=> main
irb(main):002> self.class
=> Object
```
Rubyプログラムをファイルに保存して実行した場合も同様。クラスやモジュールの外部では self が Objectクラスのインスタンスになっている。
```ruby
p self        #=> main
p self.class  #=> Object

class User
  # ここはクラスの内部
  p self        #=> User
  p self.class  #=> Class
end
```
```shell
~/cherry % ruby cherry.rb 
main
Object
User
Class
```
トップレベルでも pメソッドや putsメソッドが問題なく呼び出せるのは、self が Objectクラスのインスタンスであり、Objectクラスが Kernelモジュールを`include`しているから、ということがわかる。

#### クラスやモジュール自身もオブジェクト
Ruby は全てがオブジェクトであるため、Stringクラスのようなクラスや、Kernelモジュールのようなモジュール自身もオブジェクトになっている。**クラスは Classクラスのインスタンス**であり、**モジュールは Moduleクラスのインスタンス**である。さらに、Classクラスも Moduleクラスも Objectクラスを継承している。


<a href="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBeHpZQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--7c3e6687f9401dde9d514d890ca80b18059f013e/IMG_1253.jpeg" target="_blank" rel="noopener noreferrer"><img src="https://bootcamp.fjord.jp/rails/active_storage/blobs/redirect/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBeHpZQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--7c3e6687f9401dde9d514d890ca80b18059f013e/IMG_1253.jpeg" width="4032" height="2268" alt="IMG_1253.jpeg"></a>

次のようなコードを動かしてみると、それが事実であることを確認できる。
```ruby
irb(main):001* class User
irb(main):002> end

# Userクラス自身のクラスはClassクラス
irb(main):003> User.class
=> Class

# ClassクラスのスーパークラスはModuleクラス
irb(main):004> Class.superclass
=> Module

irb(main):005* module Loggable
irb(main):006> end

# Loggableモジュール自身のクラスはModuleクラス
irb(main):007> Loggable.class
=> Module

# ModuleクラスのスーパークラスはObjectクラス
irb(main):008> Module.superclass
=> Object
```
クラス構文やモジュール構文の内部（構文の直下）では self がクラス自身やモジュール自身を指している。
```ruby
irb(main):001* class User
irb(main):002*   p self
irb(main):003*   p self.class
irb(main):004> end
User
Class
=> Class

irb(main):005* module Loggable
irb(main):006*   p self
irb(main):007*   p self.class
irb(main):008> end
Loggable
Module
=> Module
```
つまり、クラス構文やモジュール構文の直下では、`self`がクラス自身やモジュール自身になっており、なおかつ Classクラスや Moduleクラスが Objectクラスを継承している（さらに Objectクラスは Kernelモジュールを`include`している）から、ということになる。

#### モジュールとインスタンス変数
モジュール内で定義したメソッドの中でインスタンス変数を読み書きすると、`include`先のクラスのインスタンス変数を読み書きしたことと同じになる。
```ruby
irb(main):001* module NameChangeable
irb(main):002*   def change_name
# include先のクラスのインスタンス変数を変更する
irb(main):003*     @name = 'ありす'
irb(main):004*   end
irb(main):005> end
=> :change_name

irb(main):006* class User
irb(main):007*   include NameChangeable

irb(main):008*   attr_reader :name

irb(main):009*   def initialize(name)
irb(main):010*     @name = name
irb(main):011*   end
irb(main):012> end
=> :initialize

irb(main):013> user = User.new('alice')
irb(main):014> user.name
=> "alice"

# モジュールで定義したメソッドでインスタンス変数を書き換える
irb(main):015> user.change_name
irb(main):016> user.name
=> "ありす"
```
モジュールがミックスイン先のクラスでインスタンス変数を直接参照するのはあまり良い設計ではない。なぜなら、インスタンス変数は任意のタイミングで新しく定義したり、未定義のインスタンス変数を参照したりできてしまうから。

一方、メソッドであれば未定義のメソッドを呼び出したときにエラーが発生する。そのため、ミックスイン先のクラスと連携する場合は特定のインスタンス変数の存在を前提とするより、特定のメソッドの存在を前提とする方が安全。

たとえば、先ほどのコードは次のようにセッターメソッド経由でデータを変更するようにしたほうが安全性が高まる。
```ruby
irb(main):001* module NameChangeable
irb(main):002*   def change_name
# セッターメソッド経由でデータを変更する
# （ミックスイン先のクラスでセッターメソッドが未定義であれば、エラーが発生して実装上の問題に気づける）
irb(main):003*     self.name = 'ありす'
irb(main):004*   end
irb(main):005> end
=> :change_name

irb(main):006* class User
irb(main):007*   include NameChangeable

# ゲッターメソッドとセッターメソッドを用意する
irb(main):008*   attr_accessor :name

irb(main):009*   def initialize(name)
irb(main):010*     @name = name
irb(main):011*   end
irb(main):012> end
=> :initialize

# Userクラスの使い方は先程と同じ
irb(main):013> user = User.new('alice')
=> #<User:0x0000000123c80900 @name="alice">
irb(main):014> user.change_name
irb(main):015> user.name
=> "ありす"
```

#### クラス以外のオブジェクトに extend する
モジュールを`extend`する先はクラスが多いが、クラスだけでなくここのオブジェクトに`extend`することもできる。その場合、モジュールのメソッドは`extend`したオブジェクトの特異メソッドになる。以下は文字列オブジェクトの特異メソッドとしてモジュールを`extend`する例。
```ruby
irb(main):001* module Loggable
irb(main):002*   def log(text)
irb(main):003*     puts "[LOG] #{text}"
irb(main):004*   end
irb(main):005> end
=> :log

irb(main):006> s = 'abc'

# 文字列は通常logメソッドを持たない
irb(main):007> s.log('Hello.')
(irb):7:in `<main>': undefined method `log' for an instance of String (NoMethodError)

# 文字列sにLoggableモジュールをextendして、特異メソッドを定義する
irb(main):008> s.extend Loggable

# Loggableモジュールのlogメソッドが呼び出せるようになる
irb(main):009> s.log('Hello.')
[LOG] Hello.
```


-------------


## ✍🏻 感想
### 💎 Rubyセミナーに参加しました
:@igaiga: 五十嵐さんによる『Ruby を学ぶポイントとコツ』のセミナーに参加しました。今回のセミナーでは、今の自分が Ruby について「何を知っていて、何をまだ知らないのか」を再確認する良い機会となりました。

あっという間の50分間でしたが、もっと五十嵐さんの解説をじっくりお聴きしたかったです。後日、動画が公開されるとのことで、ぜひ何度も見返したいと思います。本当にありがとうございました😊🙏🏻


------------


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp; 7 hours 43 min
- Total: 989 hours 51 min
