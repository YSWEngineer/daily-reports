# 2025/11/05(水)
## 📚 Ruby の基礎を押さえる

<details><summary>🔰 基礎をおさらい</summary>

- [x] 書籍『ゼロからわかる Ruby超入門』
- [ ] 書籍『たのしいRuby 第6版』
  - [x] 第1章 はじめてのRuby
  - [x] 第2章 便利なオブジェクト
  - [x] 第3章 コマンドを作ろう
  - [x] 第4章 オブジェクトと変数・定数
  - [x] 第5章 条件判断
  - [x] 第6章 繰り返し
  - [ ] 第7章 メソッド
  - [ ] 第8章 クラスとモジュール
  - [ ] 第9章 演算子
  - [ ] 第10章 エラー処理と例外
  - [ ] 第11章 ブロック
  - [ ] 第12章 数値（Numeric）クラス
  - [ ] 第13章 配列（Array）クラス
  - [ ] 第14章 文字列（String）クラス
  - [ ] 第15章 ハッシュ（Hash）クラス
  - [ ] 第16章 正規表現（Regexp）クラス
  - [ ] 第17章 IOクラス
  - [ ] 第18章 FileクラスとDirクラス
  - [ ] 第19章 エンコーディング（Encoding）クラス
  - [ ] 第20章 TimeクラスとDateクラス
  - [ ] 第21章 Procクラス
  - [ ] 第22章 テキスト処理を行う
  - [ ] 第23章 郵便番号データを検索する
</details>


---


## 🧑🏻‍💻 本日の取り組み
### 📕 書籍『たのしいRuby 第6版』
- 第7章 メソッド
  - 「メソッドの定義」 〜 「引数の数が不定なメソッド」まで

### 🤖 ChatGPT演習問題
- ChatGPT の演習問題に取り組む（コードの読み書き練習）


---


## ⏭️ 次回
### 📕 書籍『たのしいRuby 第6版』
- 第7章 メソッド
  - 「キーワード引数」 〜

### 🤖 ChatGPT演習問題
- ChatGPT の演習問題に取り組む（コードの読み書き練習）


---


## 💡 本日の学び・気付き
### メソッドの定義の構文
```ruby
def メソッド名(引数1, 引数2, ...)
  実行したい処理
end
```
メソッド名にはアルファベット、数字、`_`（アンダースコア）を使うことができる。ただし、**数字で始めてはいけない**。

引数にはデフォルト値を指定することもできる。デフォルト値は、**引数を省略してメソッドを呼び出したときに使われる値**。`引数名 = 値`と書く。
```ruby
def hello(name="Ruby")
  puts "Hello, #{name}."
end

hello()         # 引数を省略して呼び出す
hello("Newbie") # 引数を指定して呼び出す

# 実行結果
Hello, Ruby.
Hello, Newbie.
```
メソッドが複数の引数を持つ場合は、引数リストのうち右端から順にデフォルト値を指定する。たとえば、3つの引数のうち 2つを省略可能にする場合は、右側の 2つにデフォルト値を指定する。
```ruby
def func(a, b=1, c=2)
  ︙
end
```

### メソッドの戻り値
メソッドの中で return文を使うことで、メソッドの戻り値を指定できる。
```ruby
return 値
```
```ruby
def volume(x, y, z)
  return x * y * z
end

p volume(2, 3, 4)
p volume(10, 20, 30)

# 実行結果
24
6000
```
- `def volume(x, y, z)`
  - `volume`というメソッドを定義している。
  - このメソッドは「3つの数を受け取る」と決まっている（引数）。
- `return x * y * z`
  - 「x, y,  z を掛けた結果」を呼び出し元に返す。
  - この「返す結果」が**戻り値**。
- `p volume(2, 3, 4)`
  - `volume`メソッドを呼び出す。
  - `x = 2, y = 3, z = 4`が渡される。
  - `volume`メソッドの中では`return 2 * 3 * 4`が実行される。
  - 計算結果の`24`が返される。
  - `p`メソッドがその結果（戻り値）を出力する。

`return`文は省略しても大丈夫。その場合は、**メソッドの中で最後に得られる値が戻り値**となる。以下は省略した場合の例。
```ruby
def area(x, y, z)
  xy = x * y
  yz = y * z
  zx = z * x
  (xy + yz + zx) * 2
end

p area(2, 3, 4)
p area(10, 20, 30)

# 実行結果
52
2200
```
- 「メソッドの中で**メソッドの中で最後に得られる値が戻り値**となる」とは、つまり`(xy + yz + zx) * 2`の計算結果（たとえば`52`）がそのまま呼び出し元へ返される、という仕組み。

`return`を書くか書かないかの違いは、「明示的か、自動か」だけ。
|書き方   |意味   |
|---|---|
|return (xy + yz + zx) * 2   |「この値を返す」と書いている（明示的）   |
|(xy + yz + zx) * 2   |Ruby が「メソッドの中で最後に得られる値を戻り値として返す」と判断（自動）   |


メソッドの戻り値は、最後の行の結果とは限らない。たとえば、2つの値を比較して大きい方を返すメソッドでは、「`a > b`」が真の場合は`a`が、偽の場合は`b`が`if`文全体の結果となり、それが戻り値となる。
```ruby
def max(a, b)
  if a > b
    a
  else
    b
  end
end

p max(10, 5)

# 実行結果
10
```

`return`文は、条件によってメソッドをすぐに終了させたいときに便利。
```ruby
def max(a, b)
  if a > b
    return a
  end
  return b
end

p max(10, 5)

# 実行結果
10
```
- `return`が実行された時点で、**その場でメソッドの処理が終了し、値を返す**。
  - `a > b`が`ture`→`return a`が実行され、そこでメソッドが終了。
  - `a > b`が`false`→`if`の中はスキップされ、次の`return b`が実行されて終了。

|比較する項目   |1つ目（returnなし）   |2つ目（returnあり）   |
|---|---|---|
|戻り値の決まり方   |最後に得られた式の値   |returnで明示的に指定   |
|処理の流れ   |最後まで実行される   |returnに到達した時点で終了   |
|処理の結果   |10が出力   |10が出力   |
|用途の違い   |シンプルな処理で便利   |途中で終了させたいときに便利   |

### ブロック付きメソッドの定義
```ruby
def myloop
  while true
    yield               # ブロックを実行する
  end
end

num = 1                 # numを初期化する
myloop do 
  puts "num is #{num}"  # numを表示する
  break if num > 10     # numが10を超えていたら抜ける
  num *= 2              # numを2倍する
end

# 実行結果
num is 1
num is 2
num is 4
num is 8
num is 16
```
メソッド定義の中の`yield`は、**メソッドの呼び出しの際に与えられたブロックを実行する**。
- `def myloop`
  - `myloop`というメソッドを定義。
- `while true`
  - 永遠に繰り返す無限ループ。ただし、`break`で途中で抜けることが可能。
- `yield`
  - **ブロックを実行する命令**。メソッドを呼び出すときに一緒に渡されたブロック（`do ... end`の部分）がここで実行される。つまり、`myloop`メソッド自体は「ブロックを何度も呼び出す役目」だけをしている。
- `num = 1`
  - 繰り返しで使う変数`num`を初期化。
- `myloop do ... end`
  - `myloop`メソッドを呼び出し、**ブロック**を渡す。`do ... end`の部分が、`yield`に対応する。
- `puts "num is #{num}"`
  - 現在の`num`の値を表示。
- `break if num > 10`
  - `num`が 10 より大きくなったらループを抜ける（`while true`を終了させる）。
- `num *= 2`
  - `num`を 2倍させる。

### 引数の数が不定なメソッド
引数の数が決められないメソッドは、「`*変数名`」の形式で定義することで、与えられた引数をまとめて配列として得られる。
```ruby
def foo(*args)
  args
end

p foo(1, 2, 3)

# 実行結果
[1, 2, 3]
```
- `def foo(*args)`
  - `foo`メソッドを定義。
  - `*`は「引数をまとめて 1つの配列にする」記号。
  - つまり、`*args`は「受け取った引数たちを全部まとめて配列にして、変数`args`に入れる」という意味。
  - ちなみに`args`という名前は`arguments`（複数の引数をまとめて表す言葉）。「複数の引数（arguments）を受け取って、まとめて配列にする」という意味のお約束的な表現。

少なくても 1つは引数を指定しなければならないメソッドを定義したい場合は次のようにする。
```ruby
def meth(arg, *args)
  [arg, args]
end

p meth(1)
p meth(1, 2, 3)

# 実行結果
[1, []]
[1, [2, 3]]
```

|呼び出し   |arg   |args   |戻り値   |
|---|---|---|---|
|meth(1)   |1   |[]   |[1, []]   |
|meth(1, 2, 3)   |1   |[2, 3]   |[1, [2, 3]]   |
- `*変数名`の形式は、**引数を「配列」として受け取るための仕組み**。そして、引数がなかった場合でも必ず配列として存在し、中身が空の状態`[]`になる。


---


## ✍🏻 感想
メソッドの基本構文から、`return`文の使い方、ブロック付きメソッド、`*変数名`まで幅広く理解を深めました。特に`*変数名`が引数をまとめて配列として受け取る仕組みを確認し、「引数がなくても空配列`[]`になる」という動作も理解できました。次回はキーワード引数に進み、より柔軟なメソッド定義を学んでいきます。


---


## ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 hours 36 min
- Total: 1387 hours 04 min
