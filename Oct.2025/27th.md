# 2025/10/27(月)
## 📚 Ruby の基礎を押さえる

<details><summary>🔰 基礎をおさらい</summary>

- [x] 書籍『ゼロからわかる Ruby超入門』
- [ ] 書籍『たのしいRuby 第6版』
  - [x] 第1章 はじめてのRuby
  - [x] 第2章 便利なオブジェクト
  - [x] 第3章 コマンドを作ろう
  - [x] 第4章 オブジェクトと変数・定数
  - [x] 第5章 条件判断
  - [ ] 第6章 繰り返し
  - [ ] 第7章 メソッド
  - [ ] 第8章 クラスとモジュール
  - [ ] 第9章 演算子
  - [ ] 第10章 エラー処理と例外
  - [ ] 第11章 ブロック
  - [ ] 第12章 数値（Numeric）クラス
  - [ ] 第13章 配列（Array）クラス
  - [ ] 第14章 文字列（String）クラス
  - [ ] 第15章 ハッシュ（Hash）クラス
  - [ ] 第16章 正規表現（Regexp）クラス
  - [ ] 第17章 IOクラス
  - [ ] 第18章 FileクラスとDirクラス
  - [ ] 第19章 エンコーディング（Encoding）クラス
  - [ ] 第20章 TimeクラスとDateクラス
  - [ ] 第21章 Procクラス
  - [ ] 第22章 テキスト処理を行う
  - [ ] 第23章 郵便番号データを検索する
</details>


---


## 🧑🏻‍💻 本日の取り組み
### 📕 書籍『たのしいRuby 第6版』
- 第5章 条件判断

### 🤖 ChatGPT演習問題
- ChatGPT の演習問題を解く（コードの読み書き）


---


## ⏭️ 次回
### 📕 書籍『たのしいRuby 第6版』
- 第6章 繰り返し

### 🤖 ChatGPT演習問題
- ChatGPT の演習問題を解く（コードの読み書き）


---


## 💡 本日の学び・気付き
### 条件判断
- 条件判断文は、大きく3つある。
  - **if文**
  - **unless文**
  - **case文**
- 条件判断によく使われるものとして、「比較演算子」がある。比較演算の結果は、`true`か`false`。
- 比較演算子以外でも、条件を表すメソッドがたくさんある。文字列クラスの`empty?`メソッドは、文字列の長さが`0`のときに`true`、そうではないときは`false`を返す。参照：[instance method String#empty?](https://rurema.clear-code.com/3.4/method/String/i/empty=3f.html)
```ruby
>> p "".empty?
true
=> true

>> p "AAA".empty?
false
=> false
```
- `true`か`false`以外にも、条件判断に使える値がある。たとえば、正規表現によるマッチングでは、マッチした場合には文字列中でマッチした部分の位置を、マッチしなかった場合には`nil`を返す。
```ruby
>> p /Ruby/ =~ "Ruby"
0
=> 0

>> p /Ruby/ =~ "Diamond"
nil
=> nil
```
- `true`と`false`以外についても真偽が決まるように、以下のような内容が定義されている。

**Ruby の真偽値**
|真 |false と nil を除くオブジェクトすべて   |
|---|---|
|**偽**   |**false と nil**   |

- 表から分かるように、`false`と`nil`だけが「`偽`」として扱われ、それ以外はすべて「`真`」として扱われる。一方、`ture`や`false`を返さないメソッドでも、意味のある値を返せない場合は`nil`を返すメソッドであれば、条件判断に利用できる。
- 真偽値を返すメソッドの名前は、末尾に「`?`」を付けるルールがある。もし、自分でメソッドを作る場合はこのルールに合わせるのがよい。

### 論理演算子
- 論理演算子「`&&`」と「`||`」は、**複数の条件を1つにまとめる**ときに使う。

`条件1 && 条件2`：
**条件1**と**条件2**のどちらもが「`真`」である場合に、全体も「`真`」となる。どちらか一方でも「`偽`」であった場合は、全体も「`偽`」になる。

`条件1 || 条件2`：
**条件1**と**条件2**のいずれか一方が「`真`」なら、全体も「`真`」になる。

`!条件`：
否定の論理演算子は、条件を反転させる。条件が「`偽`」である場合は「`真`」に、「`真`」である場合は「`偽`」になる。たとえば、整数x が 1 から 10 の間にあるかどうかを判断し、処理を行う if文は次のように書く。
```ruby
if x >= 1 && x <= 10
  ︙
end
```
- 「1 から 10 以外」という条件を表すには、「1 より小さいか、10 より大きい」と書くほうが素直。
```ruby
if x < 1 || x > 10
  ︙
end
```
- 条件判断は、プ**ログラムの制御**を行う重要な部分。条件の記述がわかりにくいと、何をやろうとしているのかが読み取りにくくなってしまう。できるだけ**読みやすい条件**で書くことを心がけること。

### if文
- if文は、もっとも基本的な条件判断文。一番単純な構文は以下の書き方。
```ruby
# thenは省略可能
if 条件 then
  文
end
```
- さらに、`elsif`と`else`を加えると、次のようになる。
```ruby
if 条件1 then
  文1
elsif 条件2 then
  文2
elsif 条件3 then
  文3
else
  文4
end
```

### unless文
- if文と反対の役割をする条件判断文。構文は以下の書き方。
```ruby
# thenは省略可能
unless 条件 then
  文
end
```
- unless文では条件が**偽**のときに文を実行する。
- unless文でも、`else`を使うことができる。
```ruby
unless 条件
  文1
else
  文2
end
```
これは、以下の if文と同じ。
```ruby
if 条件
  文2
else
  文1
end
```
- ↑**文1**と**文2**の場所が入れ替わっている。このように入れ替えることで、if文で unless文と同じ処理を表現することが可能。

### case文
- 比較したいオブジェクトが1つだけで、そのオブジェクトの値によって場合分けをしたい場合、case文を使うほうがシンプルで分かりやすくなる。
- case文の書き方は次のようになる。
```ruby
# thenは省略可能
case 比較したいオブジェクト
when 値1 then
  文1
when 値2 then
  文2
when 値3 then
  文3
else
  文4
end
```
- `when`には一度に複数の値を指定できる。以下のプログラムは配列tags の要素を先頭から順に処理理し、要素の合わせて異なったメッセージを出力する。
```ruby
tags = [ "A", "IMG", "PRE"]
tags.each do |tagname|
  case tagname
  when "P", "A", "I", "B", "BLOCKQUOTE"
    puts "#{tagname} has a child."
  when "IMG", "BR"
    puts "#{tagname} has no child."
  else
    puts "#{tagname} cannot be used."
  end
end

# 実行例
% ruby case.rb
A has a child.
IMG has no child.
PRE cannot be used.
```

### 「===」とcase文
- case文は、when で指定した値に一致するかどうかを「`===`」という演算子を使って判断する。「`===`」は、左辺が数値や文字列の場合は「`==`」と同じ意味を持つが、正規表現の場合は「`=~`」とマッチしたかどうかを判定したり、クラスの場合は右辺が流のクラスのインスタンスかどうかを判定するなど、両辺の値を比較するよりも、少し緩い意味で同じかどうかを判断するために使用する。
```ruby
>> p(/zz/ === "xyzzy")
true
=> true

>> p(String === "xyzzy")
true
=> true

>> p((1..3) === 2)
true
=> true
```
- case文を if文に書き換えると次のようになる。
```ruby
# case文
case value
when A
  文1
when B
  文2
else
  文3
end

# case文をif文に書き換える
if A === value
  文1
elsif B === value
  文2
else
  文3
end
```

### オブジェクトの同一性
- すべてのオブジェクトは「**アイデンティティ**」と「**値**」を持っている。
- **アイデンティティ**(ID)とは、オブジェクトの同一性を表すもの。すべてのオブジェクトに対して一意に与えられる。
- オブジェクトの ID は、`object_id`または`__id__`メソッドで得ることができる。
```ruby
>> ary1 = []
=> []
>> ary2 = []
=> []
>> p ary1.object_id
30940
=> 30940
>> p ary2.object_id
45580
=> 45580
```
- 2つのオブジェクトが同じかどうか（ID が同じかどうか）は`equal?`メソッドで判定する。
```ruby
>> str1 = "foo"
=> "foo"
>> str2 = str1
=> "foo"
>> str3 = "f" + "o" + "o"
=> "foo"
>> p str1.equal?(str2)
true
=> true
>> p str1.equal?(str3)
false
=> false
```
- 一方、「値」はオブジェクトが持っている情報のこと。たとえば、内容が同じ文字列は同じ値を持っている。オブジェクトの値が等しいかどうかを調べるには、「`==`」を使う。
```ruby
>> str1 = "foo"
=> "foo"
>> str2 = "f" + "o" + "o"
>> p str1 == str2
true
=> true
```


---


## ✍🏻 感想
条件判断の基本を体系的に整理しました。特に、case文では`===`が使われていることを知り、仕組みを理解できたのが収穫です。一方で`unless`文の考え方はまだ少し混乱するので、実際に書いて慣れていきたいです。


---


## ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3 hours 39 min
- Total: 1371 hours 52 min
