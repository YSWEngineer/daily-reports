# 2025/09/13(土)
## 📚 プラクティス『lsコマンドを作る1』

:::details 🎯 学習の狙い
- 標準出力について学ぶ
- 標準ライブラリの使い方を学ぶ
- Enumeratorには、each以外に便利なメソッドがあることを学ぶ
- RailsじゃないRubyプログラミングを学ぶ
- メソッド分割を学ぶ
- わかりやすい変数名メソッド名を学ぶ
- 大きな問題を分割する力を学ぶ
:::

:::details 📌 要件（Docs：lsコマンドを作る 参照）
- [ ] オプション（`-a`や`-r`など）を付けず、且つ引数（フォルダのパス）も指定せずに実行する
- [ ] そのまま実行すると、今いるフォルダ（カレントディレクトリ）の中身を表示する
- [ ] `gem`は使わずに Ruby の標準ライブラリだけで作ること
- [ ] 完成したコードは GitHub の Pull Request として提出すること
- [ ] `rubocop-fjord`でデバッグを実行し、全てパスさせること
- [ ] 2つ以上のメソッドを自分で定義すること
- [ ] 表示は横に最大3列になるようにレイアウトすること
  - 3, 6, 9, 12のように3の倍数の件数だけでなく、最後の列に空欄ができるケースの結果も載せる
  - 「3列から5列に仕様変更してください」または「3列から100列に変えてください」とあとから言われても必要最小限の変更で対応できるようなロジックにしておくこと
:::

:::details 🧩 タスクばらし ※ 随時、追加・変更あり
- [x] タスク1：開発の準備（テストフォルダ）
  - [x] ToDo：作業用フォルダを用意し、その中にダミーファイルをいくつか置く
  - [x] 作業時間： 30分
  - [x] 終了条件：テストフォルダにファイルがある

- [x] タスク2：全体設計
  - [x] ToDo：「主要な処理」を列挙する
  - [x] 作業時間：60分
  - [x] 終了条件：主要な処理（要件）を一つずつ列挙すること

- [ ] タスク3：ファイルの取得とソート（並び替え）
  - [ ] ToDo：`.`や`..`から始まるファイルや隠しファイルは出力させないようにする
  - [ ] 作業時間：60分
  - [ ] 終了条件：期待している並び順になっていること

- [ ] タスク4：行数・列数のロジックを考える（余りの切り上げを用いる）
  - [ ] ToDo：先ずは列数を3列に決め、行数が切り上げになること
  - [ ] 作業時間：60分
  - [ ] 終了条件：列数や要素の数を変更しても期待どおりになっていること

- [ ] タスク5：縦詰めにロジックをメソッド化
  - [ ] ToDo：縦詰めに変換するメソッドを実装し、期待どおりなっていること
  - [ ] 作業時間：90分
  - [ ] 終了条件：縦詰めの出力が期待どおりであること

- [ ] タスク6：列幅を揃える
  - [ ] ToDo：タブ文字を用いて文字列同志の幅を整える
  - [ ] 作業時間：90分
  - [ ] 終了条件：実際に見て読みやすくなっていること

- [ ] タスク7：rubocop-fjord に通す
  - [ ] ToDo：rubocop-fjord 通して出力されたエラーを一つずつ直していく
  - [ ] 作業時間：数時間？エラーの内容によりけり
  - [ ] 終了条件：rubocop-fjord の警告・エラーが発生していないこと

- [ ] タスク8：提出
  - [ ] ToDo：作成した lsコマンドを Pull Request として提出
  - [ ] ToDo：提出物にlsコマンドの実行結果とOS標準（macなど自分の使ってるOS）のlsコマンドをのスクリーンショットを併記して貼る
  - [ ] ToDo：rubocop-fjord のチェックが全てパスした画面をスクショして添付
  - [ ] 作業時間：60分
  - [ ] 終了条件：メンターさんに課題を提出すること
:::


---


### 🧑🏻‍💻 本日の取り組み
#### プラクティス『lsコマンドを作る1』🛠️💻
- lsコマンド作成
  - タスクばらし作成
  - 作業用のテストフォルダとダミーファイル作成
  - lsコマンド作成に必要な要件を列挙


---


### ⏭️ 次回
#### プラクティス『lsコマンドを作る1』🛠️💻
- lsコマンド作成
  - ファイルの取得とソート（並び替え）に取り組む


---


### 💡 本日の学び・気付き
:::details ⚠️ ネタバレ注意
### タスクばらし作成
**タスク1：開発の準備（テストフォルダ）**
- ToDo：作業用フォルダを用意し、その中にダミーファイルを幾つか置く
- 作業時間：30分
- 終了条件：テストフォルダにファイルがある

**タスク2：全体の設計**
- ToDo：「主要な処理」を列挙する
- 作業時間：60分
- 終了条件：主要な処理（要件）を一つずつ列挙すること

**タスク3：ファイルの取得とソート（並び替え）**
- ToDo：`.`や`..`から始まるファイルや隠しファイルは出力させないようにする
- 作業時間：60分
- 終了条件：期待している並び順になっていること

**タスク4：行数・列数のロジックを考える（余りの切り上げを用いる）**
- ToDo：先ずは列数を3列に決め、行数が切り上げになること
- 作業時間：60分
- 終了条件：列数や要素の数を変更しても期待どおりになっていること

**タスク5：縦詰めにロジックをメソッド化**
- ToDo：縦詰めに変換するメソッドを実装し、期待どおりなっていること
- 作業時間：90分
- 終了条件：縦詰めの出力が期待どおりであること

**タスク6：列幅を揃える**
- ToDo：タブ文字を用いて文字列同志の幅を整える
- 作業時間：90分
- 終了条件：実際に見て読みやすくなっていること

**タスク7：rubocop-fjord に通す**
- ToDo：rubocop-fjord 通して出力されたエラーを一つずつ直していく
- 作業時間：数時間？エラーの内容によりけり
- 終了条件：rubocop-fjord の警告・エラーが発生していないこと

**タスク8：提出**
- ToDo：作成した lsコマンドを Pull Request として提出
- ToDo：提出物にlsコマンドの実行結果とOS標準（macなど自分の使ってるOS）のlsコマンドをのスクリーンショットを併記して貼る
- ToDo：rubocop-fjord のチェックが全てパスしたところをスクショし、貼り付ける
- 作業時間：60分
- 終了条件：メンターさんに課題を提出すること


---


### タスク1：開発の準備
#### 作業用フォルダの作成
```shell
% mkdir test_file
```

##### ダミーファイルの作成
```shell
# 作成したtest_fileディレクトリに移動し以下のコマンドを順に実行
% touch Gemfile Gemfile.lock Procfile README.md babel.config.js bin config config.ru log package.json postcss.config.js

# ブレース展開を使って1.txtから15.txtまでを一度に作成
% touch {1..15}.txt

# ダミーファイル完成
% ls
1.txt			4.txt			config.ru
10.txt			5.txt			Gemfile
11.txt			6.txt			Gemfile.lock
12.txt			7.txt			log
13.txt			8.txt			ls.rb
14.txt			9.txt			package.json
15.txt			babel.config.js		postcss.config.js
2.txt			bin			Procfile
3.txt			config			README.md
```

### タスク2：全体の設計
#### 1. ファイルの取得（ソート含む）
- 入力：検索パターン
- 処理：`Dir.glob`で指定パターンに合うファイルやディレクトリを取得し、並び替え
- 出力：ファイル・ディレクトリ一覧（配列でまとめたもの）

#### 2. 行数の計算
- 入力：ファイル（要素）を配列でまとめたものと列数
- 処理：`行数 = (要素の数 ÷ 列数).ceil`で余りを切り上げる
- 出力：行数（Integer = 整数）

#### 3. 要素一つ一つを縦に配置
- 入力：ファイル（要素）を配列でまとめたもの、行数・列数
- 処理：①行ごとの配列を作る　②各列に要素を縦に配置　③インデックス計算：`index = row + column * rows`
- 出力：縦詰めに並んだ配列

#### 4. 配置を整える
- 入力：縦詰めに並んだ要素
- 処理：タブ文字（`join("\t")`）を使用して見やすく整える
- 出力：整えられた文字列
:::


---


### ✍🏻 感想
#### 🧩 ようやくタスクばらし作成
今回のプラクティスでは、いきなり lsコマンドを作成しようとしても「何をすればよいのか」「何から始めればよいのか」が全くイメージできず、何もできない状態が続いていました。

とりあえず手を動かそうと思い、配列を例に練習したところ（メンターさんのアドバイスもあり） lsコマンドを作成する流れを掴めるようになってきました。

この経験と[セルフマネジメントの必須スキル「タスクばらし」そのポイント](https://kuranuki.sonicgarden.jp/archives/21981)をもとに、初めの一歩としてタスクばらしを作成しました（ここまで本当に長かった）。
- ToDo（何をすべきなのか）
- おおよその作業時間
- タスクごとの終了条件

以上の3つを整理しました。途中で追加や変更もあると思うので、都度調整して進めていきます。


#### 📑 要件を理解する
lsコマンドの作成で必要となる要件を一つずつ挙げることで、「何をどう実装するか」をしっかり押さえる必要があるのでは？と考えました。
- 入力として渡すもの（引数）
- 処理
- 出力（戻り値）

この考えが正しいのかどうかはよく分かっていません。深く考えすぎたかな？もっとシンプルに取り組むべきなのかな？......めっちゃ難しい🤔


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 hours 37 min
- Total: 1293 hours 24 min
