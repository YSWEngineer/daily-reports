# 2025/09/27(土)
## 📚 プラクティス『lsコマンドを作る1』

:::details 🎯 学習の狙い
- 標準出力について学ぶ
- 標準ライブラリの使い方を学ぶ
- Enumeratorには、each以外に便利なメソッドがあることを学ぶ
- RailsじゃないRubyプログラミングを学ぶ
- メソッド分割を学ぶ
- わかりやすい変数名メソッド名を学ぶ
- 大きな問題を分割する力を学ぶ
:::

:::details 📌 要件（Docs：lsコマンドを作る 参照）
- [ ] オプション（`-a`や`-r`など）を付けず、且つ引数（フォルダのパス）も指定せずに実行する
- [ ] そのまま実行すると、今いるフォルダ（カレントディレクトリ）の中身を表示する
- [ ] `gem`は使わずに Ruby の標準ライブラリだけで作ること
- [ ] 完成したコードは GitHub の Pull Request として提出すること
- [ ] `rubocop-fjord`でデバッグを実行し、全てパスさせること
- [ ] 2つ以上のメソッドを自分で定義すること
- [ ] 表示は横に最大3列になるようにレイアウトすること
  - 3, 6, 9, 12のように3の倍数の件数だけでなく、最後の列に空欄ができるケースの結果も載せる
  - 「3列から5列に仕様変更してください」または「3列から100列に変えてください」とあとから言われても必要最小限の変更で対応できるようなロジックにしておくこと
:::

:::details 📑 全体の設計 （⚠️ ネタバレに注意）
#### 1. ファイルの取得（ソート含む）
- 入力：検索パターン
- 処理：`Dir.glob`で指定パターンに合うファイルやディレクトリを取得し、並び替え
- 出力：ファイル・ディレクトリ一覧（配列でまとめたもの）

#### 2. 行数の計算
- 入力：ファイル（要素）を配列でまとめたものと列数
- 処理：`行数 = (要素の数 ÷ 列数).ceil`で余りを切り上げる
- 出力：行数（Integer = 整数）

#### 3. 要素一つ一つを縦に配置
- 入力：ファイル（要素）を配列でまとめたもの、行数・列数
- 処理：①行ごとの配列を作る　②各列に要素を縦に配置　③インデックス計算：`index = row + column * rows`
- 出力：縦詰めに並んだ配列

#### 4. 配置を整える
- 入力：縦詰めに並んだ要素
- 処理：タブ文字（`join("\t")`）を使用して見やすく整える
- 出力：整えられた文字列
:::

:::details 🧩 タスクばらし ※ 随時、追加・変更あり
- [x] タスク1：開発の準備（テストフォルダ）
  - [x] ToDo：作業用フォルダを用意し、その中にダミーファイルをいくつか置く
  - [x] 作業時間： 30分
  - [x] 終了条件：テストフォルダにファイルがある

- [x] タスク2：全体設計
  - [x] ToDo：「主要な処理」を列挙する
  - [x] 作業時間：60分
  - [x] 終了条件：主要な処理（要件）を一つずつ列挙すること

- [x] タスク3：ファイルの取得とソート（並び替え）
  - [x] ToDo：`.`や`..`から始まるファイルや隠しファイルは出力させないようにする
  - [x] 作業時間：60分
  - [x] 終了条件：期待している並び順になっていること

- [x] タスク4：行数・列数のロジックを考える（余りの切り上げを用いる）
  - [x] ToDo：先ずは列数を3列に決め、行数が切り上げになること
  - [x] 作業時間：60分
  - [x] 終了条件：列数や要素の数を変更しても期待どおりになっていること

- [x] タスク5：縦詰めにロジックをメソッド化
  - [x] ToDo：縦詰めに変換するメソッドを実装し、期待どおりなっていること
  - [x] 作業時間：90分
  - [x] 終了条件：縦詰めの出力が期待どおりであること

- [x] タスク6：列幅を揃える
  - [x] ToDo：タブ文字を用いて文字列同志の幅を整える
  - [x] 作業時間：90分
  - [x] 終了条件：実際に見て読みやすくなっていること

- [ ] ✨New タスク7：2つ以上のメソッドを自分で定義する
  - [ ] ToDo：「何をやるか」に名前を付けて、後で呼び出せるようにする
  - [ ] 作業時間：240分
  - [ ] 終了条件：mainメソッドともう一つのメソッド2つを定義すること

- [ ] タスク8：rubocop-fjord に通す
  - [ ] ToDo：rubocop-fjord 通して出力されたエラーを一つずつ直していく
  - [ ] 作業時間：数時間？エラーの内容によりけり
  - [ ] 終了条件：rubocop-fjord の警告・エラーが発生していないこと

- [ ] タスク9：提出
  - [ ] ToDo：作成した lsコマンドを Pull Request として提出
  - [ ] ToDo：提出物にlsコマンドの実行結果とOS標準（macなど自分の使ってるOS）のlsコマンドをのスクリーンショットを併記して貼る
  - [ ] ToDo：rubocop-fjord のチェックが全てパスした画面をスクショして添付
  - [ ] 作業時間：60分
  - [ ] 終了条件：メンターさんに課題を提出すること
:::

:::details 🔰 基礎をおさらい
- [ ] 書籍『ゼロからわかる Ruby超入門』
  - [x] 7 - 1 メソッドを作って呼び出す
  - [x] 7 - 2 メソッドへオブジェクトを渡す
  - [x] 7 - 3 引数の便利な機能を使う
  - [x] 7 - 4 変数には見える範囲がある
  - [x] 練習問題 CHAPTER 2
  - [ ] 練習問題 CHAPTER 3
  - [ ] 練習問題 CHAPTER 4
  - [ ] 練習問題 CHAPTER 5
  - [ ] 練習問題 CHAPTER 6
  - [x] 練習問題 CHAPTER 7
  - [ ] 練習問題 CHAPTER 8
  - [ ] 練習問題 CHAPTER 9
  - [ ] 練習問題 CHAPTER 10
:::


---


### 🧑🏻‍💻 本日の取り組み
#### Ruby の基礎
- 「戻り値」と「出力」の違いの整理

#### 📕 書籍『ゼロからわかる Ruby超入門』
- 練習問題 CHAPTER 7
- 練習問題 CHAPTER 2


---


### ⏭️ 次回
#### 📕 書籍『ゼロからわかる Ruby超入門』
- 練習問題 CHAPTER 3


---


### 💡 本日の学び・気付き
#### 「戻り値」と「出力」の違い
##### 戻り値とは
- メソッドや処理の**結果として返される値**
- プログラムの内部で次の処理に使える
- 表示はされない（あくまで「返すだけ」）
```ruby
def area
  3 * 3
end

x = area  # areaの戻り値9が変数xに入る
```
##### 出力とは
- 画面に表示すること
- 返すのではなく「人間に見せる」ためのもの
- `puts`や`print`を使う
```ruby
puts area  # 戻り値9を画面に表示する
```

##### 違いをまとめると
- **戻り値** → プログラムが使うための「値の受け渡し」
- **出力** → 人間に見せるための「画面表示」


#### 「メソッド内で出力」と「戻り値を返して出力」の違い
```ruby
# パターン① メソッド内で出力
def area
  puts 3 * 3
end

area # 9が表示されるが戻り値はnil
```
- メソッドが直接出力してしまう
- 戻り値は`nil`になる
- 画面に出すだけなら簡単でわかりやすいが、結果を再利用できない

```ruby
# パターン② 戻り値を返して出力
def area
  3 * 3
end

puts area #=> 9
```
- メソッドは計算だけして戻り値を返す
- 出力は呼び出し側で行う
- 戻り値を他の処理に使えるため再利用性が高い

##### 結論
- 「ただ表示するだけ」なら①でもOK
- **良いコード**としては②の方が望ましい
  - メソッドは「処理や計算」だけを担当
  - 出力は呼び出し側に任せるのが基本スタイル


#### 練習問題
##### 7 - 3 問7
**問6に加えて、キーワード引数で size を渡し、sizeによって値段を上乗せしてください。size が"ショート"のときは +0円、"トール"のときは +50円、"ベンティ"のときは +100円としてください。**
```ruby
def price(item:, size:)
  items = { "コーヒー" => 300, "カフェオレ" => 400 }
  sizes = { "ショート" => 0, "トール" => 50, "ベンティ" => 100 }
  items[item] + sizes[size]
end

puts price(item: "コーヒー", size: "ベンティ") #=> 400
puts price(item: "カフェオレ", size: "トール") #=> 450
```
1. `def price(item:, size:)`
- priceメソッドを定義。
- `item:`と`size:`はキーワード引数。呼び出すときは`price(item: "...", size: "...")`のように名前付きで渡す。
2. `items = { "コーヒー" => 300, "カフェオレ" => 400 }`
- `items`というローカル変数に、飲み物と価格を持つハッシュを代入。
3. `sizes = { "ショート" => 0, "トール" => 50, "ベンティ" => 100 }`
- `sizes`というローカル変数に、サイズごとの追加料金を持つハッシュを代入。
4. `items[item] + sizes[size]`
- `items[item]`で対応する値を取り出し、`sizes[size]`でも対応する値を取り出し、それぞれを足し合わせる。

##### 問8
**問7を変更し、size が渡されないときのデフォルト値として"ショート"を設定してください。**
```ruby
def price(item:, size: "ショート")
  items = { "コーヒー" => 300, "カフェラテ" => 400 }
  sizes = { "ショート" => 0, "トール" => 50, "ベンティ" => 100 }
  items[item] + sizes[size]
end

puts price(item: "カフェラテ") #=> 400
puts price(item: "カフェラテ", size: "ベンティ") #=> 500
```
1. `def price(item:, size: "ショート")`
- priceメソッドを定義。
- `item:`と`size:`はキーワード引数。キーワード引数`size:`にはデフォルト値として`"ショート"`を設定。

##### 7 - 5 問9
**次のプログラムはエラーになります。えらーにならずに「コーヒーをください」と表示するようにプログラムを書き換えてください。**
```ruby
# エラーになるコード
def order
  puts "#{drink}をください"
end

drink = "コーヒー"
order


# 書き換えたプロブラム
def order(drink)
  puts "#{drink}をください"
end

drink = "コーヒー"
order(drink) #=> コーヒーをください
```
エラーになる原因
**1. 変数のスコープ（ローカル変数の見えない範囲）**
- `drink = "コーヒー"`は orderメソッドの外側で定義されている。
- Ruby では、メソッドの外で定義したローカル変数は、メソッドの中では見えない。
- そのため、orderメソッドの中で`drink`を呼び出しても、`NameError`になる。

**2. 引数が定義されていない**
- orderメソッドは`der order`としか書かれていないので、`drink`を受け取る仕組み（引数）がない。もし「`drink`を渡して使いたい」なら、引数を定義する必要がある。


---


### ✍🏻 感想
- 戻り値と出力の違いを改めて整理できた。
- 「メソッドは処理」「表示は呼び出し側」と役割を分けることで、コードの再利用性が高まることを実感。
- 今回の練習問題を通じて、**キーワード引数・デフォルト値・スコープ**の理解が深まった。

焦らず基礎をしっかり固めることが大切だと感じています。理解が曖昧なまま進むのではなく、「**なぜこのコードが動くのか**」を自分の言葉で説明できるようになるまで時間をかけて取り組みます。


---


### ⏰ 学習時間
- Today:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4 hours 28 min
- Total: 1319 hours 01 min
